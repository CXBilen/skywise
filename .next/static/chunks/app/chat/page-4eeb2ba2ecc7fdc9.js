(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{5794:(e,t,a)=>{Promise.resolve().then(a.bind(a,555))},555:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tn});var s=a(5155),i=a(2115),n=a(5683),r=a(9124),o=a(4522),l=a(2423),c=a(6889),d=a(7223),m=a(2428),h=a(767),u=a(4085),p=a(9602);function f(e){let{open:t,onClose:a,title:i,children:o,className:l}=e;return(0,s.jsx)(n.N,{children:t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"hidden md:block fixed inset-0 z-40 bg-black/20 backdrop-blur-sm"}),(0,s.jsxs)(r.P.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:(0,p.cn)("hidden md:flex fixed top-0 right-0 z-50 h-screen w-[400px] max-w-[90vw] bg-white/95 backdrop-blur-xl border-l border-slate-200/60 flex-col shadow-2xl overflow-hidden",l),children:[(0,s.jsxs)("div",{className:"shrink-0 flex items-center justify-between p-4 border-b border-slate-200/60",children:[i&&(0,s.jsx)("h2",{className:"font-semibold text-slate-900",children:i}),(0,s.jsx)(u.$,{variant:"ghost",size:"icon",onClick:a,className:"ml-auto",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:(0,s.jsx)("div",{className:"p-3 sm:p-4 w-full min-w-0 max-w-full",children:o})})]})]})})}let g={px:"1px",0:"0",.5:"2px",1:"4px",1.5:"6px",2:"8px",2.5:"10px",3:"12px",3.5:"14px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",11:"44px",12:"48px",14:"56px",16:"64px",20:"80px",24:"96px",28:"112px",32:"128px"},x={md:"10px",lg:"14px","2xl":"24px"},y={card:"0 1px 3px 0 rgb(0 0 0 / 0.08), 0 1px 2px -1px rgb(0 0 0 / 0.08)",cardHover:"0 4px 12px 0 rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.08)"};g[11],g[4],g[2],x.md,g[4],x.lg,y.card,y.cardHover,g[10],g[3],x.md,g[8],g[10],g[12],g[4],x.lg,x["2xl"];let w={short:{min:500,max:800},medium:{min:800,max:1200},long:{min:1500,max:2500},searching:{min:1500,max:2500},error:{min:800,max:1200}},b={default:15e3};function v(e){let{open:t,onClose:a,title:o,children:l,showHandle:c=!0,showCloseButton:d=!0}=e,m=function(){let[e,t]=(0,i.useState)({top:0,bottom:0,left:0,right:0});return(0,i.useEffect)(()=>{if("undefined"==typeof CSS)return;let e=()=>{let e=getComputedStyle(document.documentElement);t({top:parseInt(e.getPropertyValue("--sat")||"0")||0,bottom:parseInt(e.getPropertyValue("--sab")||"0")||0,left:parseInt(e.getPropertyValue("--sal")||"0")||0,right:parseInt(e.getPropertyValue("--sar")||"0")||0})};return document.documentElement.style.setProperty("--sat","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--sab","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--sal","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--sar","env(safe-area-inset-right)"),requestAnimationFrame(e),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}();return!function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,i.useEffect)(()=>{if("undefined"==typeof document)return;let t=document.body.style.overflow,a=document.body.style.paddingRight;if(e){let e=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.body.style.paddingRight="".concat(e,"px")}return()=>{document.body.style.overflow=t,document.body.style.paddingRight=a}},[e])}(t),(0,s.jsx)(n.N,{children:t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:a,className:"fixed inset-0 bg-slate-900/40 bottom-sheet-backdrop z-50","aria-hidden":"true"}),(0,s.jsxs)(r.P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-50 bg-white rounded-t-3xl shadow-2xl overflow-hidden",style:{paddingBottom:m.bottom||16},role:"dialog","aria-modal":"true","aria-labelledby":o?"bottom-sheet-title":void 0,children:[c&&(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-2",children:(0,s.jsx)("div",{className:"w-10 h-1 rounded-full",style:{backgroundColor:"#cbd5e1"}})}),(o||d)&&(0,s.jsxs)("div",{className:"flex items-center justify-between px-3 pb-2",children:[o&&(0,s.jsx)("h2",{id:"bottom-sheet-title",className:"font-semibold text-slate-900 text-base",children:o}),d&&(0,s.jsx)(u.$,{variant:"ghost",size:"icon",onClick:a,className:"ml-auto h-8 w-8 rounded-full hover:bg-slate-100","aria-label":"Close",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"px-3 pb-2 w-full min-w-0 overflow-hidden",children:l})]})]})})}var k=a(4752);let N=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(k.bL,{ref:t,className:(0,p.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...i})});N.displayName=k.bL.displayName;let j=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(k._V,{ref:t,className:(0,p.cn)("aspect-square h-full w-full",a),...i})});j.displayName=k._V.displayName;let A=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(k.H4,{ref:t,className:(0,p.cn)("flex h-full w-full items-center justify-center rounded-full bg-gradient-to-br from-sky-400 to-sky-600 text-white font-medium",a),...i})});A.displayName=k.H4.displayName;var C=a(98),S=a(6336),I=a(1594),D=a(853),T=a(1466),L=a(6835);let F={high:{icon:S.A,color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200"},medium:{icon:L.A,color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200"},low:{icon:I.A,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}},P={destination:{high:"I'm confident about this destination.",medium:"I found a match, but there are similar options. Is this correct?",low:"I'm not sure about this destination. Please clarify where you'd like to go."},date:{high:"Date confirmed.",medium:"I interpreted this as the date. Please verify.",low:"I couldn't parse the date clearly. Please specify the date."},time:{high:"Time preference noted.",medium:"I understood this as your preferred time range.",low:"The time wasn't clear to me. Please specify morning, afternoon, or evening."},email_extraction:{high:"Extracted with high confidence from your email.",medium:"Detected from email (some details may need review).",low:"Found in email, but I'm uncertain about some fields."},calendar_check:{high:"Checked your calendar—no conflicts found.",medium:"Your calendar might have a related event around this time.",low:"I couldn't fully check your calendar. Please verify manually."},airport:{high:"Airport confirmed.",medium:"Multiple airports available. I selected the main one.",low:"Several airports match. Please specify which airport you prefer."}};function O(e){var t;let{level:a,context:i,value:n,inline:o=!1,showExplanation:l=!0}=e,c=F[a],d=c.icon,m=(null===(t=P[i])||void 0===t?void 0:t[a])||"";return o?(0,s.jsxs)("span",{className:(0,p.cn)("inline-flex items-center gap-1 text-xs font-medium px-1.5 py-0.5 rounded",c.bgColor,c.color),title:m,children:[(0,s.jsx)(d,{className:"h-3 w-3"}),"high"===a?"✓":"medium"===a?"?":"⚠"]}):(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:(0,p.cn)("flex items-start gap-2 p-2 rounded-lg border text-sm max-w-full overflow-hidden box-border",c.bgColor,c.borderColor),style:{maxWidth:"100%",width:"100%"},children:[(0,s.jsx)(d,{className:(0,p.cn)("h-4 w-4 mt-0.5 flex-shrink-0",c.color)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 overflow-hidden",children:[n&&(0,s.jsx)("span",{className:(0,p.cn)("font-medium break-words",c.color),children:n}),l&&(0,s.jsx)("p",{className:(0,p.cn)("text-xs mt-0.5 break-words",c.color.replace("600","700")),children:m})]})]})}function R(e){let{role:t,content:a,timestamp:i,isTyping:n,confidence:l,showConfidence:c,messageType:d,children:m}=e,h="user"===t;if("system"===t)return(0,s.jsx)(r.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex justify-center py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-gradient-to-r from-slate-100 to-slate-50 text-slate-600 text-sm px-5 py-2.5 rounded-full border border-slate-200/50 shadow-sm",children:[(0,s.jsx)(C.A,{className:"w-3.5 h-3.5 text-sky-500"}),a]})});let u=()=>{switch(d){case"success":return(0,s.jsx)(S.A,{className:"w-4 h-4 text-emerald-500"});case"error":return(0,s.jsx)(I.A,{className:"w-4 h-4 text-red-500"});case"searching":return(0,s.jsx)(D.A,{className:"w-4 h-4 text-sky-500 animate-pulse"});default:return null}};return(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:15,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,ease:[.23,1,.32,1],opacity:{duration:.3}},className:(0,p.cn)("flex gap-3 py-4 group w-full min-w-0 max-w-full overflow-hidden box-border",h?"flex-row-reverse":"flex-row"),children:[(0,s.jsx)(r.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1,duration:.3},children:(0,s.jsx)(N,{className:(0,p.cn)("h-10 w-10 shrink-0 ring-2 ring-offset-2 transition-all duration-300",h?"ring-slate-200 ring-offset-white":"ring-sky-200 ring-offset-white group-hover:ring-sky-300"),children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j,{src:"/avatar-user.png"}),(0,s.jsx)(A,{className:"bg-gradient-to-br from-slate-700 to-slate-900 text-white",children:(0,s.jsx)(T.A,{className:"h-4 w-4"})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j,{src:"/avatar-assistant.png"}),(0,s.jsx)(A,{className:"bg-gradient-to-br from-sky-400 via-sky-500 to-blue-600 text-white",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})]})})}),(0,s.jsxs)("div",{className:(0,p.cn)("flex flex-col gap-2 flex-1 min-w-0 max-w-[calc(100%-52px)] overflow-hidden chat-message-content",h?"items-end":"items-start"),children:[(0,s.jsxs)(r.P.div,{initial:{scale:.95},animate:{scale:1},transition:{delay:.05,duration:.2},className:(0,p.cn)("relative rounded-2xl px-4 py-3 transition-all duration-200 max-w-full sm:max-w-[85%] lg:max-w-[75%]",h?"bg-gradient-to-br from-sky-500 via-sky-500 to-sky-600 text-white rounded-tr-sm shadow-lg shadow-sky-500/25":"bg-white/90 backdrop-blur-sm border border-slate-200/80 text-slate-800 rounded-tl-sm shadow-md shadow-slate-900/5 hover:shadow-lg hover:shadow-slate-900/10","success"===d&&!h&&"border-emerald-200 bg-emerald-50/50","error"===d&&!h&&"border-red-200 bg-red-50/50","searching"===d&&!h&&"border-sky-200 bg-sky-50/50"),children:[!h&&!n&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-2xl rounded-tl-sm bg-gradient-to-br from-white/50 to-transparent pointer-events-none"}),d&&u()&&(0,s.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,s.jsx)("div",{className:"p-1 bg-white rounded-full shadow-sm border border-slate-100",children:u()})}),n?(0,s.jsx)("div",{className:"flex gap-1.5 py-1 px-1",children:[0,1,2].map(e=>(0,s.jsx)(r.P.span,{animate:{y:[0,-6,0],opacity:[.5,1,.5]},transition:{duration:.8,repeat:1/0,delay:.15*e,ease:"easeInOut"},className:"w-2 h-2 bg-sky-400 rounded-full"},e))}):(0,s.jsx)("div",{className:"relative z-10 overflow-hidden max-w-full",children:(0,s.jsx)("p",{className:"text-[15px] leading-relaxed whitespace-pre-line break-words max-w-full",children:function(e){let t;let a=[],i=/\*\*(.+?)\*\*/g,n=0;for(;null!==(t=i.exec(e));)t.index>n&&a.push(e.slice(n,t.index)),a.push((0,s.jsx)("strong",{className:"font-semibold",children:t[1]},t.index)),n=i.lastIndex;return n<e.length&&a.push(e.slice(n)),a.length>0?a:[e]}(a)})})]}),c&&void 0!==l&&!h&&!n&&(0,s.jsx)(r.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.3},children:(0,s.jsx)(O,{level:l>=.8?"high":l>=.5?"medium":"low",context:"destination",showExplanation:!0})}),m&&(0,s.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},className:"w-full min-w-0 max-w-[calc(100vw-5rem)] sm:max-w-full overflow-hidden box-border",children:m}),i&&!n&&(0,s.jsx)(r.P.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-xs text-slate-400 px-1 font-medium",children:i.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})]})]})}var _=a(6164),M=a(4505),W=a(1864);let E=["I need a flight to San Francisco next Tuesday","Import flights from my email","Show my upcoming trips","Book a flight to New York tomorrow","Find flights to Miami this weekend"];function H(e){let{onSend:t,disabled:a,isLoading:n,placeholder:o,suggestions:l,onSuggestionClick:c}=e,[d,m]=(0,i.useState)(""),[h,f]=(0,i.useState)(!1),[g,x]=(0,i.useState)(0),[y,w]=(0,i.useState)(""),[b,v]=(0,i.useState)(!0),k=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(d.length>0||h)return;let e=E[g],t=0;w(""),v(!0);let a=setInterval(()=>{t<e.length?(w(e.slice(0,t+1)),t++):(clearInterval(a),v(!1))},50);return()=>clearInterval(a)},[g,d.length,h]),(0,i.useEffect)(()=>{if(d.length>0||h||b)return;let e=setTimeout(()=>{x(e=>(e+1)%E.length)},4e3);return()=>clearTimeout(e)},[b,d.length,h]),(0,i.useEffect)(()=>{k.current&&(d?(k.current.style.height="auto",k.current.style.height="".concat(Math.min(k.current.scrollHeight,150),"px")):k.current.style.height="38px")},[d]);let N=()=>{!d.trim()||a||n||(t(d.trim()),m(""))},j=d.trim()&&!a&&!n;return(0,s.jsxs)("div",{className:"w-full space-y-3",children:[!a&&(0,s.jsx)("div",{className:"flex gap-2 mb-2 overflow-x-auto scrollbar-hide pb-1",children:(l&&l.length>0?l:["Book a Flight to New York","Import from my mail","Show my trips"]).map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>null==c?void 0:c(e),className:"flex-shrink-0 whitespace-nowrap px-3 py-1.5 text-sm font-medium bg-white border border-slate-200 rounded-full text-slate-700 hover:bg-sky-50 hover:border-sky-300 hover:text-sky-700 transition-colors shadow-sm",children:(0,s.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(C.A,{className:"w-3 h-3"}),e]})},e))}),(0,s.jsxs)(r.P.div,{"data-tour-id":"chat-input",animate:{boxShadow:h?"0 0 0 2px rgba(14, 165, 233, 0.15), 0 10px 40px -10px rgba(0, 0, 0, 0.1)":"0 4px 20px -5px rgba(0, 0, 0, 0.08)"},transition:{duration:.2},className:(0,p.cn)("relative rounded-2xl overflow-hidden","bg-white/95 backdrop-blur-xl","border transition-colors duration-200",h?"border-sky-300":"border-slate-200/80"),children:[(0,s.jsx)("div",{className:(0,p.cn)("absolute inset-0 rounded-2xl opacity-0 transition-opacity duration-300 pointer-events-none",h&&"opacity-100"),style:{background:"linear-gradient(135deg, rgba(14, 165, 233, 0.1), rgba(59, 130, 246, 0.05))"}}),(0,s.jsxs)("div",{className:"relative flex items-center gap-2 py-2 pl-2 pr-3",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)("textarea",{ref:k,value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},onFocus:()=>f(!0),onBlur:()=>f(!1),placeholder:y,disabled:a||n,rows:1,className:(0,p.cn)("w-full resize-none bg-transparent overflow-hidden","text-slate-800 placeholder:text-slate-400","focus:outline-none","text-[15px] leading-[38px]","px-3 pr-3 sm:pr-24","h-[38px] max-h-[150px]","transition-opacity duration-200",(a||n)&&"opacity-50 cursor-not-allowed")}),!d&&!h&&(0,s.jsx)("div",{className:"hidden sm:block absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:(0,s.jsxs)("span",{className:"text-xs text-slate-400",children:["Press ",(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-slate-100 rounded text-slate-500 font-mono text-[10px]",children:"Enter"})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(r.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,s.jsx)(u.$,{variant:"ghost",size:"icon",className:(0,p.cn)("h-10 w-10 shrink-0 rounded-xl","text-slate-400 hover:text-slate-600","hover:bg-slate-100/80","transition-all duration-200"),disabled:a||n,children:(0,s.jsx)(_.A,{className:"h-5 w-5"})})}),(0,s.jsx)(r.P.div,{"data-tour-id":"send-button",whileHover:j?{scale:1.05}:{},whileTap:j?{scale:.95}:{},children:(0,s.jsx)(u.$,{onClick:N,disabled:!j,size:"icon",className:(0,p.cn)("h-10 w-10 shrink-0 rounded-xl","transition-all duration-300",j?"bg-gradient-to-br from-sky-500 to-blue-600 hover:from-sky-400 hover:to-blue-500 shadow-lg shadow-sky-500/30 hover:shadow-xl hover:shadow-sky-500/40":"bg-slate-100 text-slate-400"),children:n?(0,s.jsx)(M.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(W.A,{className:"h-4 w-4"})})})]})]})]})]})}var Y=a(9053);function U(e){let{options:t,onSelect:a,disabled:i,variant:n="default"}=e;return(0,s.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1 w-full min-w-0 max-w-[calc(100vw-4rem)] sm:max-w-full box-border",children:t.map((e,t)=>(0,s.jsxs)(r.P.button,{initial:{opacity:0,scale:.9,y:5},animate:{opacity:1,scale:1,y:0},transition:{delay:.06*t,duration:.2},whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},onClick:()=>!i&&a(e),disabled:i,className:(0,p.cn)("group relative transition-all duration-200 flex-shrink-0 whitespace-nowrap","default"===n&&"px-4 py-2.5 text-sm bg-white/90 backdrop-blur-sm border border-sky-200/80 rounded-xl text-sky-700 hover:bg-gradient-to-r hover:from-sky-50 hover:to-blue-50 hover:border-sky-400 shadow-sm hover:shadow-md hover:shadow-sky-100/50 font-medium","compact"===n&&"px-3 py-1.5 text-xs bg-slate-100/80 rounded-full text-slate-600 hover:bg-slate-200","highlight"===n&&"px-4 py-2.5 text-sm bg-gradient-to-r from-sky-500 to-blue-600 text-white rounded-xl shadow-lg shadow-sky-500/25 hover:shadow-xl hover:shadow-sky-500/40 font-medium",i&&"opacity-50 cursor-not-allowed hover:scale-100 hover:y-0"),children:[(0,s.jsxs)("span",{className:"relative z-10 flex items-center gap-1.5",children:[0===t&&"default"===n&&(0,s.jsx)(C.A,{className:"w-3.5 h-3.5 text-sky-700"}),e,"highlight"===n&&(0,s.jsx)(Y.A,{className:"w-3.5 h-3.5 group-hover:translate-x-0.5 transition-transform"})]}),"default"===n&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-sky-400/0 via-sky-400/5 to-blue-400/0 opacity-0 group-hover:opacity-100 transition-opacity"})]},e))})}var B=a(6967),z=a(1773);function $(e){let{scenario:t,onSelectOption:a,onConfirmOriginal:o}=e,[l,c]=(0,i.useState)(!1),d=t.aiInterpretation.confidence>.8?"high":t.aiInterpretation.confidence>.6?"medium":"low";return(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 rounded-xl border border-amber-200 bg-amber-50/50 overflow-hidden max-w-full box-border",style:{maxWidth:"100%",width:"100%"},children:[(0,s.jsx)("div",{className:"p-4 border-b border-amber-200/50 overflow-hidden",children:(0,s.jsxs)("div",{className:"flex items-start gap-3 max-w-full overflow-hidden",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-amber-100 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(L.A,{className:"h-4 w-4 text-amber-600"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 overflow-hidden",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-amber-900",children:"Let me confirm I understood correctly"}),(0,s.jsxs)("div",{className:"mt-2 p-2 bg-white rounded-lg border border-amber-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[(0,s.jsx)("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:t.aiInterpretation.field}),(0,s.jsxs)("span",{className:(0,p.cn)("text-xs font-medium px-2 py-0.5 rounded-full whitespace-nowrap",{high:"bg-emerald-100 text-emerald-700",medium:"bg-amber-100 text-amber-700",low:"bg-orange-100 text-orange-700"}[d]),children:[Math.round(100*t.aiInterpretation.confidence),"%"]})]}),(0,s.jsx)("p",{className:"text-base font-semibold text-slate-900 mt-1 break-words",children:t.aiInterpretation.understood})]})]})]})}),(0,s.jsxs)("div",{className:"p-4 space-y-2 overflow-hidden",children:[(0,s.jsx)("p",{className:"text-xs text-amber-700 mb-3",children:"Is this what you meant?"}),(0,s.jsxs)(u.$,{variant:"outline",className:"w-full justify-between bg-white hover:bg-emerald-50 border-emerald-200 text-emerald-700 text-left",onClick:o,children:[(0,s.jsxs)("span",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,s.jsx)(S.A,{className:"h-4 w-4 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:"Yes, correct"})]}),(0,s.jsx)(B.A,{className:"h-4 w-4 flex-shrink-0 ml-2"})]}),t.recoveryOptions.map((e,t)=>(0,s.jsxs)(u.$,{variant:"outline",className:"w-full justify-between bg-white hover:bg-slate-50 text-left",onClick:()=>a(e),children:[(0,s.jsxs)("span",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,s.jsx)(z.A,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:e})]}),(0,s.jsx)(B.A,{className:"h-4 w-4 text-slate-400 flex-shrink-0 ml-2"})]},t))]}),(0,s.jsxs)("div",{className:"px-4 pb-4 overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>c(!l),className:"text-xs text-amber-600 hover:text-amber-800 flex items-center gap-1",children:[(0,s.jsx)(I.A,{className:"h-3 w-3 flex-shrink-0"}),l?"Hide":"Why?"]}),(0,s.jsx)(n.N,{children:l&&(0,s.jsx)(r.P.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-xs text-amber-700 mt-2 p-2 bg-amber-100/50 rounded-lg break-words",children:t.explanation})})]})]})}var G=a(6462),J=a(9191);function K(e){let{icon:t,title:a,description:i,onClick:n,variant:o="default",delay:l=0}=e;return(0,s.jsxs)(r.P.button,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:l,duration:.4,ease:[.23,1,.32,1]},whileHover:{scale:1.02,y:-4,transition:{duration:.2}},whileTap:{scale:.98},onClick:n,className:(0,p.cn)("group relative w-full p-3 sm:p-5 rounded-xl sm:rounded-2xl text-left","transition-all duration-300","border border-slate-200/80","bg-white/80 backdrop-blur-sm","hover:bg-gradient-to-br hover:from-sky-50/80 hover:to-white","hover:border-sky-300 hover:shadow-lg hover:shadow-sky-100/50","highlight"===o&&["bg-gradient-to-br from-sky-50 to-blue-50","border-sky-200","shadow-md shadow-sky-100/30"]),children:[(0,s.jsx)(r.P.div,{className:(0,p.cn)("w-9 h-9 sm:w-12 sm:h-12 rounded-lg sm:rounded-xl flex items-center justify-center mb-2 sm:mb-4","bg-gradient-to-br from-sky-100 to-sky-50","group-hover:from-sky-200 group-hover:to-sky-100","transition-all duration-300","highlight"===o&&"from-sky-200 to-sky-100"),whileHover:{rotate:[0,-5,5,0]},transition:{duration:.5},children:(0,s.jsx)(t,{className:(0,p.cn)("w-4 h-4 sm:w-6 sm:h-6 text-sky-600","group-hover:text-sky-700 transition-colors")})}),(0,s.jsx)("h3",{className:(0,p.cn)("font-semibold text-slate-800 mb-0.5 sm:mb-1.5 text-sm sm:text-base","group-hover:text-sky-900 transition-colors"),children:a}),(0,s.jsx)("p",{className:(0,p.cn)("text-xs sm:text-sm text-slate-500 leading-snug sm:leading-relaxed line-clamp-2","group-hover:text-slate-600 transition-colors"),children:i}),(0,s.jsx)(r.P.div,{className:"absolute top-3 right-3 sm:top-5 sm:right-5 opacity-0 group-hover:opacity-100 transition-opacity",initial:{x:-5},whileHover:{x:0},children:(0,s.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl sm:rounded-2xl bg-gradient-to-br from-sky-400/0 to-blue-400/0 group-hover:from-sky-400/5 group-hover:to-blue-400/5 transition-all duration-300 pointer-events-none"})]})}let V=[{id:"assistant",icon:C.A,title:"AI Assistant",description:"Chat naturally and get instant responses for all your travel needs.",example:"I need help"},{id:"search",icon:D.A,title:"Find Flights",description:"Tell me where you want to go, and I'll find the best flights for you.",example:"Find a flight to San Francisco tomorrow"},{id:"calendar",icon:l.A,title:"Calendar Sync",description:"Sync your trips with your calendar and see conflicts instantly.",example:"Show my upcoming trips"},{id:"import",icon:G.A,title:"Import from Email",description:"Automatically detect and save flight confirmations from your emails.",example:"Import flights from my email"}];function q(e){let{onFeatureClick:t,onStartTour:a,onDismiss:i}=e;return(0,s.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-start pt-4 sm:pt-8 sm:justify-center sm:min-h-[50vh]",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 w-full max-w-2xl mb-4 sm:mb-8",children:V.map((e,a)=>(0,s.jsx)(K,{icon:e.icon,title:e.title,description:e.description,onClick:()=>null==t?void 0:t(e.id),delay:.1+.1*a,variant:"default"},e.id))}),(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},className:"flex flex-col items-center gap-3",children:[(0,s.jsxs)(u.$,{onClick:a,variant:"outline",className:(0,p.cn)("group gap-2 px-6 py-5 rounded-xl","border-sky-200 hover:border-sky-300","hover:bg-sky-50 transition-all"),children:[(0,s.jsx)(J.A,{className:"w-4 h-4 text-sky-600 group-hover:text-sky-700"}),(0,s.jsx)("span",{className:"text-slate-700 group-hover:text-slate-800",children:"Take a Quick Tour"})]}),(0,s.jsx)("button",{onClick:i,className:"text-sm text-slate-400 hover:text-slate-600 transition-colors",children:"Skip and start"})]})]})}function Z(e){let{isActive:t,step:a}=e,[o,l]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!t||!a){l(null);return}let e=()=>{let e=document.querySelector('[data-tour-id="'.concat(a.target,'"]'));if(!e){l(null);return}let t=e.getBoundingClientRect(),s=a.highlightPadding||8;l({top:t.top-s,left:t.left-s,width:t.width+2*s,height:t.height+2*s})};return e(),window.addEventListener("resize",e),window.addEventListener("scroll",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}},[t,a]),(0,s.jsx)(n.N,{children:t&&(0,s.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-[1300] pointer-events-none",children:[(0,s.jsxs)("svg",{className:"absolute inset-0 w-full h-full",children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("mask",{id:"tour-mask",children:[(0,s.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),o&&(0,s.jsx)(r.P.rect,{initial:{opacity:0},animate:{x:o.left,y:o.top,width:o.width,height:o.height,opacity:1},transition:{type:"spring",damping:25,stiffness:300},rx:"12",fill:"black"})]})}),(0,s.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(15, 23, 42, 0.6)",mask:"url(#tour-mask)"})]}),o&&(0,s.jsx)(r.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,top:o.top,left:o.left,width:o.width,height:o.height},transition:{type:"spring",damping:25,stiffness:300},className:"absolute rounded-xl ring-2 ring-sky-400 ring-offset-2 ring-offset-transparent",style:{top:o.top,left:o.left,width:o.width,height:o.height,boxShadow:"0 0 0 4px rgba(14, 165, 233, 0.2), 0 0 20px rgba(14, 165, 233, 0.3)"}}),(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-auto",style:{clipPath:o?"polygon(\n                    0% 0%,\n                    0% 100%,\n                    ".concat(o.left,"px 100%,\n                    ").concat(o.left,"px ").concat(o.top,"px,\n                    ").concat(o.left+o.width,"px ").concat(o.top,"px,\n                    ").concat(o.left+o.width,"px ").concat(o.top+o.height,"px,\n                    ").concat(o.left,"px ").concat(o.top+o.height,"px,\n                    ").concat(o.left,"px 100%,\n                    100% 100%,\n                    100% 0%\n                  )"):void 0}})]})})}var X=a(3518);function Q(e){var t,a,o,l;let{step:c,currentStep:d,totalSteps:m,onNext:f,onPrev:g,onSkip:x}=e,[y,w]=(0,i.useState)(null),b=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=()=>{let e=document.querySelector('[data-tour-id="'.concat(c.target,'"]'));if(!e||!b.current)return;let t=e.getBoundingClientRect(),a=b.current.getBoundingClientRect(),s=c.highlightPadding||8,i=0,n=0,r="top";switch(c.placement){case"top":i=t.top-a.height-16-s,n=t.left+t.width/2-a.width/2,r="bottom";break;case"bottom":i=t.bottom+16+s,n=t.left+t.width/2-a.width/2,r="top";break;case"left":i=t.top+t.height/2-a.height/2,n=t.left-a.width-16-s,r="right";break;case"right":i=t.top+t.height/2-a.height/2,n=t.right+16+s,r="left"}n=Math.max(16,Math.min(n,window.innerWidth-a.width-16)),w({top:i=Math.max(16,Math.min(i,window.innerHeight-a.height-16)),left:n,arrowPosition:r})},t=setTimeout(e,50);return window.addEventListener("resize",e),window.addEventListener("scroll",e),()=>{clearTimeout(t),window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}},[c]);let v=d===m-1;return(0,s.jsx)(n.N,{mode:"wait",children:(0,s.jsxs)(r.P.div,{ref:b,initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0,top:null!==(t=null==y?void 0:y.top)&&void 0!==t?t:0,left:null!==(a=null==y?void 0:y.left)&&void 0!==a?a:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",damping:25,stiffness:300},className:(0,p.cn)("fixed z-[1700] w-80 p-4 rounded-xl","bg-white shadow-xl shadow-slate-900/10","border border-slate-200"),style:{top:null!==(o=null==y?void 0:y.top)&&void 0!==o?o:-9999,left:null!==(l=null==y?void 0:y.left)&&void 0!==l?l:-9999,visibility:y?"visible":"hidden"},children:[(0,s.jsx)("div",{className:(0,p.cn)("absolute w-3 h-3 bg-white border-slate-200 rotate-45",(null==y?void 0:y.arrowPosition)==="top"&&"-top-1.5 left-1/2 -translate-x-1/2 border-l border-t",(null==y?void 0:y.arrowPosition)==="bottom"&&"-bottom-1.5 left-1/2 -translate-x-1/2 border-r border-b",(null==y?void 0:y.arrowPosition)==="left"&&"-left-1.5 top-1/2 -translate-y-1/2 border-l border-b",(null==y?void 0:y.arrowPosition)==="right"&&"-right-1.5 top-1/2 -translate-y-1/2 border-r border-t")}),(0,s.jsx)("button",{onClick:x,className:"absolute top-3 right-3 p-1 text-slate-400 hover:text-slate-600 transition-colors",children:(0,s.jsx)(h.A,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mb-3",children:[Array.from({length:m}).map((e,t)=>(0,s.jsx)("div",{className:(0,p.cn)("h-1.5 rounded-full transition-all",t===d?"w-4 bg-sky-500":"w-1.5 bg-slate-200")},t)),(0,s.jsxs)("span",{className:"ml-2 text-xs text-slate-400",children:[d+1," / ",m]})]}),(0,s.jsx)("h3",{className:"font-semibold text-slate-800 mb-1.5",children:c.title}),(0,s.jsx)("p",{className:"text-sm text-slate-500 leading-relaxed mb-4",children:c.content}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:x,className:"text-sm text-slate-400 hover:text-slate-600 transition-colors",children:"Skip Tour"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[0!==d&&(0,s.jsxs)(u.$,{variant:"ghost",size:"sm",onClick:g,className:"gap-1 text-slate-600",children:[(0,s.jsx)(X.A,{className:"w-4 h-4"}),"Back"]}),(0,s.jsxs)(u.$,{size:"sm",onClick:f,className:(0,p.cn)("gap-1","bg-sky-500 hover:bg-sky-600 text-white"),children:[v?"Finish":"Next",!v&&(0,s.jsx)(B.A,{className:"w-4 h-4"})]})]})]})]},c.id)})}var ee=a(8867),et=a(3950);let ea=(0,a(1027).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-sky-100 text-sky-800",secondary:"border-transparent bg-slate-100 text-slate-900",destructive:"border-transparent bg-red-100 text-red-800",success:"border-transparent bg-emerald-100 text-emerald-800",warning:"border-transparent bg-amber-100 text-amber-800",outline:"text-slate-700 border-slate-200",conflict:"border-transparent bg-orange-100 text-orange-800",fits:"border-transparent bg-emerald-100 text-emerald-800"}},defaultVariants:{variant:"default"}});function es(e){let{className:t,variant:a,...i}=e;return(0,s.jsx)("div",{className:(0,p.cn)(ea({variant:a}),t),...i})}var ei=a(5007);let en={united:"from-blue-600 to-blue-700",delta:"from-red-600 to-red-700",american:"from-sky-600 to-sky-700",jetblue:"from-sky-500 to-blue-600",southwest:"from-amber-500 to-orange-600",alaska:"from-teal-600 to-teal-700",default:"from-slate-600 to-slate-700"};function er(e){let{id:t,airline:a,flightNumber:i,departureAirport:n,arrivalAirport:l,departureTime:d,arrivalTime:m,duration:h,stops:f,price:g,calendarFit:x,conflictDetails:y,selected:w,onSelect:b,compact:v}=e,k=en[a.toLowerCase().replace(/\s+/g,"")]||en.default;return(0,s.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.01},transition:{duration:.2},children:(0,s.jsx)(ei.Zp,{className:(0,p.cn)("overflow-hidden transition-all duration-300 cursor-pointer",w?"ring-2 ring-sky-500 shadow-lg shadow-sky-500/20":"hover:shadow-lg hover:shadow-slate-900/10",v&&"p-3"),onClick:()=>null==b?void 0:b(t),children:(0,s.jsxs)("div",{className:(0,p.cn)("p-4",v&&"p-0"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,p.cn)("w-10 h-10 rounded-xl bg-gradient-to-br flex items-center justify-center shadow-lg",k),children:(0,s.jsx)(o.A,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-slate-900",children:a}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:i})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,p.$g)(g)}),(0,s.jsxs)(es,{variant:"fits"===x?"fits":"conflict"===x?"conflict":"secondary",className:"mt-1",children:["fits"===x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ee.A,{className:"h-3 w-3 mr-1"}),"Fits calendar"]}),"conflict"===x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(et.A,{className:"h-3 w-3 mr-1"}),"Conflict"]}),"unknown"===x&&"Checking..."]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-center shrink-0",children:[(0,s.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-slate-900",children:(0,p.fU)(d)}),(0,s.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600",children:n})]}),(0,s.jsx)("div",{className:"flex-1 px-1.5 sm:px-4 min-w-0",children:(0,s.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t-2 border-dashed border-slate-200"})}),(0,s.jsxs)("div",{className:"relative flex flex-col items-center bg-white px-1.5 sm:px-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-0.5 sm:gap-1 text-slate-500",children:[(0,s.jsx)(c.A,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5"}),(0,s.jsx)("span",{className:"text-[10px] sm:text-xs font-medium whitespace-nowrap",children:(0,p.a3)(h)})]}),f>0?(0,s.jsxs)("span",{className:"text-[10px] sm:text-xs text-slate-400 mt-0.5 whitespace-nowrap",children:[f," stop",f>1?"s":""]}):(0,s.jsx)("span",{className:"text-[10px] sm:text-xs text-emerald-600 font-medium mt-0.5 whitespace-nowrap",children:"Nonstop"})]}),(0,s.jsx)(o.A,{className:"absolute right-0 h-3 w-3 sm:h-4 sm:w-4 text-sky-500 transform translate-x-0.5 sm:translate-x-1 hidden sm:block"})]})}),(0,s.jsxs)("div",{className:"text-center shrink-0",children:[(0,s.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-slate-900",children:(0,p.fU)(m)}),(0,s.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600",children:l})]})]}),"conflict"===x&&y&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-orange-50 rounded-xl border border-orange-200",children:(0,s.jsx)("p",{className:"text-sm text-orange-800",children:y})}),b&&(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-100",children:(0,s.jsx)(u.$,{onClick:e=>{e.stopPropagation(),b(t)},variant:w?"default":"outline",className:"w-full",children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ee.A,{className:"h-4 w-4 mr-2"}),"Selected"]}):"Select this flight"})})]})})})}var eo=a(3580),el=a(9282);function ec(e){let{origin:t,destination:a,outbound:i,returnFlight:n,totalPrice:c,calendarEvents:d,onConfirm:m,onEdit:f,onCancel:g,isLoading:x,showCalendarPreview:y=!0}=e;return(0,s.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"w-full min-w-0",children:(0,s.jsxs)(ei.Zp,{className:"overflow-hidden border border-sky-200/60 bg-gradient-to-b from-white to-sky-50/30 w-full",children:[(0,s.jsx)(ei.aR,{className:"p-3 pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center shadow-md shadow-sky-500/30 shrink-0",children:(0,s.jsx)(o.A,{className:"h-4 w-4 text-white"})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)(ei.ZB,{className:"text-sm truncate",children:["Trip to ",a]}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 truncate",children:[t," → ",a,n&&" → ".concat(t)]})]})]}),(0,s.jsx)("div",{className:"text-right shrink-0",children:(0,s.jsx)("p",{className:"text-lg font-bold text-slate-900",children:(0,p.$g)(c)})})]})}),(0,s.jsxs)(ei.Wu,{className:"p-3 pt-0 space-y-2",children:[(0,s.jsxs)("div",{className:"p-2 bg-white rounded-lg border border-slate-200/60",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-slate-500 mb-1.5",children:[(0,s.jsx)(o.A,{className:"h-3 w-3 shrink-0"}),(0,s.jsx)("span",{className:"font-medium",children:"Outbound"}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{className:"truncate",children:(0,p.Yq)(i.date)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[(0,s.jsxs)("div",{className:"shrink-0",children:[(0,s.jsx)("p",{className:"text-base font-bold text-slate-900",children:(0,p.fU)(i.departureTime)}),(0,s.jsx)("p",{className:"text-xs text-slate-600",children:i.departureAirport})]}),(0,s.jsxs)("div",{className:"flex-1 px-1 flex flex-col items-center min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-slate-400",children:[(0,s.jsx)("div",{className:"w-3 h-px bg-slate-300"}),(0,s.jsx)(B.A,{className:"h-3 w-3 shrink-0"}),(0,s.jsx)("div",{className:"w-3 h-px bg-slate-300"})]}),(0,s.jsx)("p",{className:"text-[10px] text-slate-500",children:i.duration})]}),(0,s.jsxs)("div",{className:"text-right shrink-0",children:[(0,s.jsx)("p",{className:"text-base font-bold text-slate-900",children:(0,p.fU)(i.arrivalTime)}),(0,s.jsx)("p",{className:"text-xs text-slate-600",children:i.arrivalAirport})]})]}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1 truncate",children:[i.airline," ",i.flightNumber]})]}),n&&(0,s.jsxs)("div",{className:"p-2 bg-white rounded-lg border border-slate-200/60",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-slate-500 mb-1.5",children:[(0,s.jsx)(o.A,{className:"h-3 w-3 rotate-180 shrink-0"}),(0,s.jsx)("span",{className:"font-medium",children:"Return"}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{className:"truncate",children:(0,p.Yq)(n.date)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[(0,s.jsxs)("div",{className:"shrink-0",children:[(0,s.jsx)("p",{className:"text-base font-bold text-slate-900",children:(0,p.fU)(n.departureTime)}),(0,s.jsx)("p",{className:"text-xs text-slate-600",children:n.departureAirport})]}),(0,s.jsxs)("div",{className:"flex-1 px-1 flex flex-col items-center min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-slate-400",children:[(0,s.jsx)("div",{className:"w-3 h-px bg-slate-300"}),(0,s.jsx)(B.A,{className:"h-3 w-3 shrink-0"}),(0,s.jsx)("div",{className:"w-3 h-px bg-slate-300"})]}),(0,s.jsx)("p",{className:"text-[10px] text-slate-500",children:n.duration})]}),(0,s.jsxs)("div",{className:"text-right shrink-0",children:[(0,s.jsx)("p",{className:"text-base font-bold text-slate-900",children:(0,p.fU)(n.arrivalTime)}),(0,s.jsx)("p",{className:"text-xs text-slate-600",children:n.arrivalAirport})]})]}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1 truncate",children:[n.airline," ",n.flightNumber]})]}),y&&d.length>0&&(0,s.jsxs)("div",{className:"hidden sm:block",children:[(0,s.jsx)(el.w,{className:"my-2"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-700 mb-2",children:[(0,s.jsx)(l.A,{className:"h-3.5 w-3.5 text-sky-500 shrink-0"}),(0,s.jsx)("span",{children:"Adding to calendar"})]}),(0,s.jsx)("div",{className:"space-y-1.5",children:d.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-sky-50 rounded-lg border border-sky-100 min-w-0",children:[(0,s.jsx)("div",{className:"w-0.5 h-6 bg-sky-500 rounded-full shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900 text-xs truncate",children:e.title}),(0,s.jsxs)("p",{className:"text-[10px] text-slate-500 truncate",children:[(0,p.Yq)(e.start)," • ",(0,p.fU)(e.start)," - ",(0,p.fU)(e.end)]})]})]},t))})]})]}),(m||f||g)&&(0,s.jsxs)("div",{className:"pt-2 space-y-1.5",children:[m&&(0,s.jsx)(u.$,{onClick:m,disabled:x,className:"w-full h-9 text-sm",size:"sm",children:x?(0,s.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-3.5 w-3.5 border-2 border-white border-t-transparent rounded-full"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ee.A,{className:"h-3.5 w-3.5 mr-1.5 shrink-0"}),"Confirm Booking"]})}),(g||f)&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-1.5",children:[g&&(0,s.jsxs)(u.$,{variant:"ghost",onClick:g,disabled:x,className:"text-xs h-8",size:"sm",children:[(0,s.jsx)(h.A,{className:"h-3.5 w-3.5 mr-1 shrink-0"}),"Cancel"]}),f&&(0,s.jsxs)(u.$,{variant:"outline",onClick:f,disabled:x,className:"text-xs h-8",size:"sm",children:[(0,s.jsx)(eo.A,{className:"h-3.5 w-3.5 mr-1 shrink-0"}),"Edit"]})]})]})]})]})})}let ed=i.forwardRef((e,t)=>{let{className:a,type:i,...n}=e;return(0,s.jsx)("input",{type:i,className:(0,p.cn)("flex h-11 w-full rounded-xl border-2 border-slate-200 bg-white/80 backdrop-blur-sm px-4 py-2 text-base text-slate-900 shadow-sm transition-all duration-200","placeholder:text-slate-400","focus:outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500","hover:border-slate-300","disabled:cursor-not-allowed disabled:opacity-50","file:border-0 file:bg-transparent file:text-sm file:font-medium",a),ref:t,...n})});function em(e){let{level:t}=e;return(0,s.jsxs)(es,{variant:"high"===t?"fits":"medium"===t?"warning":"conflict",className:"text-xs",children:["high"===t&&(0,s.jsx)(ee.A,{className:"h-2.5 w-2.5 mr-1"}),"low"===t&&(0,s.jsx)(et.A,{className:"h-2.5 w-2.5 mr-1"}),"high"===t?"✓":"low"===t?"Check this":"Verify"]})}function eh(e){let{label:t,value:a,confidence:i,isEditing:n,onChange:r,icon:o}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 gap-2 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-600 shrink-0",children:[o,(0,s.jsx)("span",{className:"text-xs sm:text-sm",children:t})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 min-w-0",children:[n?(0,s.jsx)(ed,{value:a,onChange:e=>r(e.target.value),className:"h-7 sm:h-8 w-24 sm:w-32 text-right text-xs sm:text-sm"}):(0,s.jsx)("span",{className:"font-medium text-slate-900 text-xs sm:text-sm truncate max-w-[100px] sm:max-w-[150px]",children:a}),(0,s.jsx)(em,{level:i})]})]})}function eu(e){let{source:t,data:a,confidence:n,onAddToCalendar:m,onDismiss:p}=e,[f,g]=(0,i.useState)(!1),[x,y]=(0,i.useState)(a),w=(e,t)=>{y(a=>({...a,[e]:t}))},b=Object.values(n).some(e=>"low"===e);return(0,s.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"w-full min-w-0",children:(0,s.jsxs)(ei.Zp,{className:"overflow-hidden border-2 border-amber-200/60 bg-gradient-to-b from-white to-amber-50/30 w-full",children:[(0,s.jsx)(ei.aR,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-amber-500 flex items-center justify-center shadow-lg shadow-amber-500/30 shrink-0",children:(0,s.jsx)(G.A,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)(ei.ZB,{className:"text-sm sm:text-base",children:"Found in your email"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-slate-500 truncate",children:t})]})]}),b&&(0,s.jsxs)(es,{variant:"warning",className:"text-xs shrink-0",children:[(0,s.jsx)(et.A,{className:"h-3 w-3 mr-1"}),"Review"]})]})}),(0,s.jsxs)(ei.Wu,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"divide-y divide-slate-100",children:[(0,s.jsx)(eh,{label:"Airline",value:x.airline,confidence:n.airline,isEditing:f,onChange:e=>w("airline",e),icon:(0,s.jsx)(o.A,{className:"h-4 w-4"})}),(0,s.jsx)(eh,{label:"Flight",value:x.flightNumber,confidence:n.flightNumber,isEditing:f,onChange:e=>w("flightNumber",e),icon:(0,s.jsx)("span",{className:"text-xs font-mono",children:"#"})}),(0,s.jsx)(eh,{label:"Date",value:x.date,confidence:n.date,isEditing:f,onChange:e=>w("date",e),icon:(0,s.jsx)(l.A,{className:"h-4 w-4"})}),(0,s.jsx)(eh,{label:"Departure",value:x.departureTime,confidence:n.departureTime,isEditing:f,onChange:e=>w("departureTime",e),icon:(0,s.jsx)(c.A,{className:"h-4 w-4"})}),(0,s.jsx)(eh,{label:"Route",value:"".concat(x.departureAirport," → ").concat(x.arrivalAirport),confidence:n.airports,isEditing:f,onChange:e=>{let[t,a]=e.split("→").map(e=>e.trim());w("departureAirport",t||x.departureAirport),w("arrivalAirport",a||x.arrivalAirport)},icon:(0,s.jsx)(d.A,{className:"h-4 w-4"})})]}),b&&!f&&(0,s.jsx)("p",{className:"text-xs sm:text-sm text-amber-700 bg-amber-50 p-2 sm:p-3 rounded-lg",children:"I'm not 100% certain about some details. Please verify before adding to your calendar."}),(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[p&&(0,s.jsxs)(u.$,{variant:"ghost",onClick:p,className:"text-sm",size:"sm",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-1.5 shrink-0"}),"Dismiss"]}),(0,s.jsxs)(u.$,{variant:"outline",onClick:()=>g(!f),className:"text-sm",size:"sm",children:[(0,s.jsx)(eo.A,{className:"h-4 w-4 mr-1.5 shrink-0"}),f?"Done":"Edit"]})]}),m&&(0,s.jsxs)(u.$,{onClick:()=>m(x),className:"w-full",disabled:f,children:[(0,s.jsx)(l.A,{className:"h-4 w-4 mr-2 shrink-0"}),"Add to Calendar"]})]})]})]})})}ed.displayName="Input";var ep=a(2598);function ef(e){let{flightArrivalTime:t,flightDepartureTime:a,conflictingEvent:i,onFindAlternatives:n,onBookAnyway:o,onShowDetails:c,isLoadingAlternatives:d}=e;return(0,s.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"w-full min-w-0",children:(0,s.jsxs)(ei.Zp,{className:"overflow-hidden border-2 border-orange-200/60 bg-gradient-to-b from-white to-orange-50/30 w-full",children:[(0,s.jsx)(ei.aR,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-400 to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/30 shrink-0",children:(0,s.jsx)(et.A,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)(ei.ZB,{className:"text-sm sm:text-base text-orange-800",children:"Schedule Conflict Detected"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-orange-600",children:"This flight overlaps with an existing event"})]})]})}),(0,s.jsxs)(ei.Wu,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"relative bg-white rounded-xl p-3 sm:p-4 border border-orange-200",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-sky-500 shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("p",{className:"text-xs sm:text-sm font-medium text-slate-900",children:["Flight ",a?"departs":"arrives"]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:(0,p.fU)(a||t)})]})]}),(0,s.jsx)("div",{className:"ml-1 w-0.5 h-6 bg-gradient-to-b from-sky-500 via-orange-500 to-red-500"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-orange-50 rounded-lg min-w-0",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-500 shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-xs sm:text-sm font-medium text-orange-800 truncate",children:i.title}),(0,s.jsxs)("p",{className:"text-xs text-orange-600",children:[(0,p.fU)(i.start)," -"," ",(0,p.fU)(i.end)]})]}),(0,s.jsx)(l.A,{className:"h-4 w-4 text-orange-400 shrink-0"})]})]})}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-slate-600",children:a?(0,s.jsxs)(s.Fragment,{children:["Your flight departs at ",(0,p.fU)(a),', but you have "',i.title,'" scheduled from'," ",(0,p.fU)(i.start)," to"," ",(0,p.fU)(i.end),"."]}):(0,s.jsxs)(s.Fragment,{children:["Your flight lands at ",(0,p.fU)(t),', which overlaps with "',i.title,'" (',(0,p.fU)(i.start)," -"," ",(0,p.fU)(i.end),")."]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"What would you like to do?"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(o||c)&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[c&&(0,s.jsxs)(u.$,{variant:"ghost",onClick:c,className:"text-sm",size:"sm",children:[(0,s.jsx)(ep.A,{className:"h-4 w-4 mr-1.5 shrink-0"}),"Details"]}),o&&(0,s.jsxs)(u.$,{variant:"outline",onClick:o,className:"text-sm",size:"sm",children:[(0,s.jsx)(Y.A,{className:"h-4 w-4 mr-1.5 shrink-0"}),"Book Anyway"]})]}),n&&(0,s.jsx)(u.$,{variant:"default",onClick:n,disabled:d,className:"w-full",children:d?(0,s.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.A,{className:"h-4 w-4 mr-2 shrink-0"}),"Find Alternatives"]})})]})]})]})]})})}var eg=a(7650),ex=a(5686),ey=a(8324),ew=a(2263);i.forwardRef((e,t)=>{let{className:a,value:i,...n}=e;return(0,s.jsx)(ew.bL,{ref:t,className:(0,p.cn)("relative h-2 w-full overflow-hidden rounded-full bg-slate-100",a),...n,children:(0,s.jsx)(ew.C1,{className:"h-full w-full flex-1 bg-gradient-to-r from-sky-500 to-sky-600 transition-all duration-500 ease-out",style:{transform:"translateX(-".concat(100-(i||0),"%)")}})})}).displayName=ew.bL.displayName;let eb={calendar_add:l.A,booking_confirm:o.A,email_import:G.A,trip_delete:ex.A,preference_change:ee.A},ev={calendar_add:{bg:"bg-emerald-500/20",icon:"text-emerald-400"},booking_confirm:{bg:"bg-sky-500/20",icon:"text-sky-400"},email_import:{bg:"bg-purple-500/20",icon:"text-purple-400"},trip_delete:{bg:"bg-red-500/20",icon:"text-red-400"},preference_change:{bg:"bg-slate-500/20",icon:"text-slate-400"}};function ek(e){let{message:t,description:a,duration:o=b.default,onUndo:l,onDismiss:c,show:d,actionType:m="calendar_add"}=e,[p,f]=(0,i.useState)(100),[g,x]=(0,i.useState)(!1),[y,w]=(0,i.useState)(!1),v=(0,i.useRef)(100),k=(0,i.useRef)(null),N=(0,i.useRef)(!0),j=(0,i.useRef)(c);(0,i.useEffect)(()=>{j.current=c},[c]),(0,i.useEffect)(()=>(N.current=!0,()=>{N.current=!1}),[]),(0,i.useEffect)(()=>{if(!d){f(100);return}if(y){k.current&&(clearInterval(k.current),k.current=null);return}return k.current=setInterval(()=>{f(e=>{let t=e-100/(o/100);return t<=0?(k.current&&(clearInterval(k.current),k.current=null),N.current&&setTimeout(()=>{N.current&&j.current()},0),0):t})},100),()=>{k.current&&(clearInterval(k.current),k.current=null)}},[d,o,y]);let A=(0,i.useCallback)(()=>{v.current=p,w(!0)},[p]),C=(0,i.useCallback)(()=>{f(Math.min(100,v.current+3e3/o*100)),w(!1)},[o]),S=async()=>{x(!0);try{await l()}finally{x(!1)}},I=eb[m]||ee.A,D=ev[m]||ev.calendar_add,T=Math.ceil(p/100*(o/1e3)),[L,F]=(0,i.useState)(!1);(0,i.useEffect)(()=>{F(!0)},[]);let P=(0,s.jsx)(n.N,{children:d&&(0,s.jsx)(r.P.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-4 left-3 right-3 sm:left-auto sm:right-4 z-50 sm:w-full sm:max-w-md",onMouseEnter:A,onMouseLeave:C,role:"alert","aria-live":"polite",children:(0,s.jsxs)("div",{className:"bg-slate-900/95 backdrop-blur-xl text-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-3 sm:p-4 flex items-start sm:items-center gap-2 sm:gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl ".concat(D.bg," flex items-center justify-center flex-shrink-0"),children:(0,s.jsx)(I,{className:"h-4 w-4 sm:h-5 sm:w-5 ".concat(D.icon)})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-xs sm:text-sm font-medium line-clamp-2 sm:truncate",children:t}),a&&(0,s.jsx)("p",{className:"text-xs text-slate-400 truncate",children:a}),(0,s.jsx)("p",{className:"text-[10px] sm:text-xs text-slate-500 mt-0.5",children:y?(0,s.jsx)("span",{className:"text-amber-400",children:"⏸ Paused"}):(0,s.jsxs)("span",{children:[T,"s to undo"]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,s.jsx)(u.$,{variant:"ghost",size:"sm",onClick:S,disabled:g,className:"text-white hover:bg-white/10 h-8 px-2 sm:px-3 text-xs sm:text-sm","aria-label":"Undo action",children:g?(0,s.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-3 w-3 sm:h-4 sm:w-4 border-2 border-white border-t-transparent rounded-full"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ey.A,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-1"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Undo"})]})}),(0,s.jsx)(u.$,{variant:"ghost",size:"icon",onClick:c,className:"h-7 w-7 sm:h-8 sm:w-8 text-slate-400 hover:text-white hover:bg-white/10","aria-label":"Dismiss",children:(0,s.jsx)(h.A,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]}),(0,s.jsx)("div",{className:"relative h-1 bg-slate-700",children:(0,s.jsx)(r.P.div,{className:"absolute inset-y-0 left-0 ".concat(y?"bg-amber-500":"bg-sky-500"),initial:{width:"100%"},animate:{width:"".concat(p,"%")},transition:{duration:.1}})})]})})});return L?(0,eg.createPortal)(P,document.body):null}function eN(e){let{destination:t,origin:a,departureDate:i,returnDate:n,airline:c,flightNumber:d,status:m,calendarSynced:h,onClick:u}=e,p=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"});return(0,s.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,s.jsx)(ei.Zp,{className:"p-3 cursor-pointer hover:border-sky-300 transition-colors",onClick:u,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center shrink-0",children:(0,s.jsx)(o.A,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("p",{className:"font-semibold text-slate-900 text-sm truncate",children:[a," → ",t]}),"upcoming"===m&&(0,s.jsx)("span",{className:"text-xs bg-sky-100 text-sky-700 px-1.5 py-0.5 rounded shrink-0",children:"Upcoming"}),"completed"===m&&(0,s.jsx)("span",{className:"text-xs bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded shrink-0",children:"Completed"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-0.5",children:[(0,s.jsxs)("span",{children:[c," ",d]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(l.A,{className:"h-3 w-3"}),p(i),n&&" - ".concat(p(n))]})]})]}),h&&(0,s.jsx)(S.A,{className:"h-4 w-4 text-green-500 shrink-0"})]})})})}let ej=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],eA=["January","February","March","April","May","June","July","August","September","October","November","December"];function eC(e){var t,a;let{onSelect:n,onCancel:o,minDate:c,selectedDate:d}=e,m=new Date,[h,f]=(0,i.useState)(null!==(t=null==d?void 0:d.getMonth())&&void 0!==t?t:m.getMonth()),[g,x]=(0,i.useState)(null!==(a=null==d?void 0:d.getFullYear())&&void 0!==a?a:m.getFullYear()),[y,w]=(0,i.useState)(null!=d?d:null),b=null!=c?c:m,v=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate())<new Date(b.getFullYear(),b.getMonth(),b.getDate()),k=e=>e===m.getDate()&&h===m.getMonth()&&g===m.getFullYear(),N=e=>!!y&&e===y.getDate()&&h===y.getMonth()&&g===y.getFullYear(),j=e=>{let t=new Date(g,h,e);v(t)||w(t)},A=new Date(g,h+1,0).getDate(),C=new Date(g,h,1).getDay(),S=[{label:"Tomorrow",date:new Date(m.getFullYear(),m.getMonth(),m.getDate()+1)},{label:"Next Week",date:new Date(m.getFullYear(),m.getMonth(),m.getDate()+7)},{label:"In 2 Weeks",date:new Date(m.getFullYear(),m.getMonth(),m.getDate()+14)}];return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Quick Select"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:S.map(e=>(0,s.jsx)(u.$,{variant:"outline",size:"sm",onClick:()=>{w(e.date),f(e.date.getMonth()),x(e.date.getFullYear())},className:(0,p.cn)("text-sm",(null==y?void 0:y.toDateString())===e.date.toDateString()&&"bg-sky-50 border-sky-300 text-sky-700"),children:e.label},e.label))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-sky-50 to-blue-50 border-b border-slate-200",children:[(0,s.jsx)(u.$,{variant:"ghost",size:"icon",onClick:()=>{0===h?(f(11),x(g-1)):f(h-1)},className:"h-8 w-8",children:(0,s.jsx)(X.A,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{className:"font-semibold text-slate-900",children:[eA[h]," ",g]}),(0,s.jsx)(u.$,{variant:"ghost",size:"icon",onClick:()=>{11===h?(f(0),x(g+1)):f(h+1)},className:"h-8 w-8",children:(0,s.jsx)(B.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"grid grid-cols-7 border-b border-slate-100",children:ej.map(e=>(0,s.jsx)("div",{className:"p-2 text-center text-xs font-medium text-slate-500",children:e},e))}),(0,s.jsxs)("div",{className:"grid grid-cols-7 p-2 gap-1",children:[Array.from({length:C}).map((e,t)=>(0,s.jsx)("div",{className:"h-9"},"empty-".concat(t))),Array.from({length:A}).map((e,t)=>{let a=t+1,i=v(new Date(g,h,a));return(0,s.jsx)(r.P.button,{whileHover:i?void 0:{scale:1.1},whileTap:i?void 0:{scale:.95},onClick:()=>j(a),disabled:i,className:(0,p.cn)("h-9 w-full rounded-lg text-sm font-medium transition-colors",i&&"text-slate-300 cursor-not-allowed",!i&&"hover:bg-slate-100 cursor-pointer",k(a)&&!N(a)&&"bg-sky-50 text-sky-600",N(a)&&"bg-sky-500 text-white hover:bg-sky-600"),children:a},a)})]})]}),y&&(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-3 bg-sky-50 rounded-lg border border-sky-200",children:[(0,s.jsx)(l.A,{className:"h-5 w-5 text-sky-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Selected Date"}),(0,s.jsx)("p",{className:"font-semibold text-slate-900",children:y.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[o&&(0,s.jsx)(u.$,{variant:"outline",onClick:o,className:"flex-1",children:"Cancel"}),(0,s.jsx)(u.$,{onClick:()=>{y&&n(y)},disabled:!y,className:"flex-1 bg-sky-500 hover:bg-sky-600",children:"Confirm Date"})]})]})}var eS=a(1511);let eI=i.forwardRef((e,t)=>{let{className:a,children:i,...n}=e;return(0,s.jsxs)(eS.bL,{ref:t,className:(0,p.cn)("relative overflow-hidden",a),...n,children:[(0,s.jsx)(eS.LM,{className:"h-full w-full rounded-[inherit]",children:i}),(0,s.jsx)(eD,{}),(0,s.jsx)(eS.OK,{})]})});eI.displayName=eS.bL.displayName;let eD=i.forwardRef((e,t)=>{let{className:a,orientation:i="vertical",...n}=e;return(0,s.jsx)(eS.VM,{ref:t,orientation:i,className:(0,p.cn)("flex touch-none select-none transition-colors","vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,s.jsx)(eS.lr,{className:"relative flex-1 rounded-full bg-slate-200 hover:bg-slate-300"})})});eD.displayName=eS.VM.displayName;let eT={jfk:{code:"JFK",city:"New York",aliases:["new york","nyc","manhattan","kennedy","john f kennedy"]},lga:{code:"LGA",city:"New York",aliases:["laguardia","la guardia"]},ewr:{code:"EWR",city:"Newark",aliases:["newark","new jersey","nj"]},lax:{code:"LAX",city:"Los Angeles",aliases:["los angeles","la","l.a.","hollywood"]},sfo:{code:"SFO",city:"San Francisco",aliases:["san francisco","sf","san fran","bay area","frisco"]},ord:{code:"ORD",city:"Chicago",aliases:["chicago","o'hare","ohare"]},dfw:{code:"DFW",city:"Dallas",aliases:["dallas","fort worth","dallas-fort worth","dallas fort worth"]},den:{code:"DEN",city:"Denver",aliases:["denver","colorado"]},sea:{code:"SEA",city:"Seattle",aliases:["seattle","tacoma","seatac"]},mia:{code:"MIA",city:"Miami",aliases:["miami","south florida"]},bos:{code:"BOS",city:"Boston",aliases:["boston","logan"]},atl:{code:"ATL",city:"Atlanta",aliases:["atlanta","hartsfield"]},phx:{code:"PHX",city:"Phoenix",aliases:["phoenix","arizona"]},iah:{code:"IAH",city:"Houston",aliases:["houston","george bush","intercontinental"]},las:{code:"LAS",city:"Las Vegas",aliases:["las vegas","vegas"]},mco:{code:"MCO",city:"Orlando",aliases:["orlando","disney","florida"]},lhr:{code:"LHR",city:"London",aliases:["london","heathrow","england","uk"]},cdg:{code:"CDG",city:"Paris",aliases:["paris","charles de gaulle","france"]},nrt:{code:"NRT",city:"Tokyo",aliases:["tokyo","narita","japan"]},hnd:{code:"HND",city:"Tokyo",aliases:["haneda"]},ist:{code:"IST",city:"Istanbul",aliases:["istanbul","turkey","turkiye"]},saw:{code:"SAW",city:"Istanbul",aliases:["sabiha","sabiha gokcen"]},dxb:{code:"DXB",city:"Dubai",aliases:["dubai","uae","emirates"]},sin:{code:"SIN",city:"Singapore",aliases:["singapore","changi"]},hkg:{code:"HKG",city:"Hong Kong",aliases:["hong kong"]},ams:{code:"AMS",city:"Amsterdam",aliases:["amsterdam","netherlands","schiphol"]},fra:{code:"FRA",city:"Frankfurt",aliases:["frankfurt","germany"]},muc:{code:"MUC",city:"Munich",aliases:["munich","munchen"]},mad:{code:"MAD",city:"Madrid",aliases:["madrid","spain"]},bcn:{code:"BCN",city:"Barcelona",aliases:["barcelona"]},fco:{code:"FCO",city:"Rome",aliases:["rome","fiumicino","italy"]},syd:{code:"SYD",city:"Sydney",aliases:["sydney","australia"]},yyz:{code:"YYZ",city:"Toronto",aliases:["toronto","pearson","canada"]},mex:{code:"MEX",city:"Mexico City",aliases:["mexico city","mexico","cdmx"]},gru:{code:"GRU",city:"Sao Paulo",aliases:["sao paulo","brazil","guarulhos"]},icn:{code:"ICN",city:"Seoul",aliases:["seoul","incheon","korea"]}},eL=[/(?:i (?:want|need|would like) to |book |fly |get |find )?(?:a )?(?:flight|flights|ticket|tickets)/i,/(?:fly|flying|travel|traveling|trip|going) (?:to|from)/i,/(?:book|reserve|get) (?:me )?(?:a )?(?:flight|ticket)/i,/(?:search|look|find|check) (?:for )?(?:flights?|tickets?)/i,/(?:i'm |im |i am )?(?:heading|going|flying|traveling) to/i,/(?:take me|get me) to/i,/(?:round[ -]?trip|one[ -]?way) (?:to|from)/i],eF=[/(?:change|modify|update|edit|reschedule) (?:my )?(?:flight|booking|reservation|trip)/i,/(?:i need to |can i |want to )?(?:change|modify|reschedule)/i,/(?:different|another|other) (?:flight|date|time)/i],eP=[/(?:cancel|nevermind|never mind|forget|stop|abort)/i,/(?:don't|dont|do not) (?:book|want|need)/i,/(?:start over|start again|begin again)/i],eO=[/\b(?:what|where|how|when)(?:'s| is| are)? (?:my |the )?(?:status|trip|flight|booking)\b/i,/\b(?:show|tell|give) (?:me )?(?:my |the )?(?:status|details|info)\b/i,/\b(?:track|check) (?:my )?(?:flight|trip|booking)\b/i],eR=[/^show my trips?$/i,/^show trips?$/i,/^my trips?$/i,/show\s+(?:my\s+)?trips?/i,/(?:show|list|see|view|display)\s+(?:my\s+|all\s+)?(?:upcoming\s+|past\s+)?(?:trips?|bookings?|flights?|reservations?)/i,/(?:my|upcoming|past)\s+(?:trips?|bookings?|reservations?)/i,/(?:what|which)\s+(?:trips?|flights?)\s+do\s+i\s+have/i],e_=[/(?:import|scan|check|read|find) (?:my )?(?:email|emails|mail|inbox|confirmations?)/i,/(?:get|pull|extract) (?:flights? )?from (?:my )?(?:email|mail)/i,/(?:email|mail|gmail|outlook) (?:import|scan)/i,/(?:confirmation|booking) (?:email|emails|mail)/i,/(?:automatically|auto) (?:import|scan|check)/i,/import (?:flights? )?from (?:my )?(?:email|mail)/i],eM=[/(?:check|show|view) (?:my )?calendar/i,/(?:calendar|schedule) (?:conflicts?|availability)/i,/(?:am i |do i have )?(?:free|available|busy)/i],eW=[/^(?:hi|hello|hey|greetings|good (?:morning|afternoon|evening)|howdy)[\s!.,]*$/i,/^(?:what's up|sup|yo|hiya)[\s!.,]*$/i],eE=[/(?:help|assist|support)/i,/(?:what can you do|how does this work|how do i)/i,/(?:guide|tutorial|instructions)/i];function eH(e){let t=new Date,a=new Date(t);a.setDate(a.getDate()+1);let s=e.toLowerCase().trim();if(/today/.test(s))return t;if(/tomorrow/.test(s))return a;let i=s.match(/(?:next|this)?\s*(monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i);if(i){let e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(i[1].toLowerCase())-t.getDay();e<=0&&(e+=7),s.includes("next")&&e<=7&&(e+=7);let a=new Date(t);return a.setDate(t.getDate()+e),a}let n=s.match(/in\s+(\d+)\s*(day|days|week|weeks)/i);if(n){let e=parseInt(n[1]),a=n[2].toLowerCase().startsWith("week")?7:1,s=new Date(t);return s.setDate(t.getDate()+e*a),s}let r=s.match(/(?:on\s+)?(?:the\s+)?(\d{1,2})(?:st|nd|rd|th)?\s+(?:of\s+)?(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i)||s.match(/(?:on\s+)?(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+(\d{1,2})(?:st|nd|rd|th)?/i);if(r){let e,a;/^\d/.test(r[1])?(e=parseInt(r[1]),a=r[2].toLowerCase()):(a=r[1].toLowerCase(),e=parseInt(r[2]));let s=["january","february","march","april","may","june","july","august","september","october","november","december"].indexOf(a);if(-1===s&&(s=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(a)),-1!==s&&e>=1&&e<=31){let a=new Date(t.getFullYear(),s,e);return a<t&&a.setFullYear(a.getFullYear()+1),a}}let o=s.match(/(\d{1,2})[\/\-](\d{1,2})(?:[\/\-](\d{2,4}))?/);if(o){let e=parseInt(o[1]),a=parseInt(o[2]),s=o[3]?parseInt(o[3]):t.getFullYear();s<100&&(s+=2e3);let i=e-1;if(i>=0&&i<12&&a>=1&&a<=31){let e=new Date(s,i,a);return e<t&&!o[3]&&e.setFullYear(e.getFullYear()+1),e}}}function eY(e){let t=e.toLowerCase().trim(),a=t.match(/\b([a-z]{3})\b/i);if(a){let e=a[1].toLowerCase();if(eT[e])return{city:eT[e].city,code:eT[e].code}}for(let[e,a]of Object.entries(eT)){if(t.includes(a.city.toLowerCase()))return{city:a.city,code:a.code};for(let e of a.aliases)if(t.includes(e))return{city:a.city,code:a.code}}}function eU(e){let t,a;let s=e.toLowerCase(),i=s.match(/from\s+(.+?)\s+to\s+(.+?)(?:\s+on|\s+next|\s+this|\s+in|\s*$)/i);i&&(t=eY(i[1]),a=eY(i[2]));let n=s.match(/to\s+(.+?)\s+from\s+(.+?)(?:\s+on|\s+next|\s+this|\s+in|\s*$)/i);if(n&&!a&&(a=eY(n[1]),t=eY(n[2])),!a){let e=s.match(/(?:to|for)\s+(.+?)(?:\s+on|\s+next|\s+this|\s+in|\s*$)/i);e&&(a=eY(e[1]))}if(!t){let e=s.match(/from\s+(.+?)(?:\s+to|\s+on|\s+next|\s+this|\s+in|\s*$)/i);e&&(t=eY(e[1]))}return{origin:t,destination:a}}let eB=["Hi! I'm your SkyWise travel assistant. Where would you like to fly today?","Hello! Ready to help you find the perfect flight. Where are you headed?","Hey there! Let's find you a great flight. Where would you like to go?","Welcome to SkyWise! I can help you book flights, import confirmations from email, and check your calendar. What can I do for you?"],ez=["Find a flight","Import from email","Show my trips","Help"],e$=["Where would you like to fly to?","What's your destination?","Where are you headed?"],eG=["When would you like to travel?","What date works for you?","When do you need to fly?"],eJ=["Tomorrow","Next week","This weekend","Pick a date"],eK=["Searching for flights...","Looking for the best options...","Finding flights for you...","Checking availability..."];function eV(e,t,a){let s=t?" to ".concat(t):"",i=a?" on ".concat(a):"";return 0===e?"I couldn't find any flights".concat(s).concat(i,". Would you like to try different dates or destinations?"):1===e?"I found 1 flight option".concat(s).concat(i,". Here it is:"):"I found ".concat(e," flight options").concat(s).concat(i,". I've checked your calendar - here are the best matches:")}let eq=["Try different dates","Search nearby airports","Change destination","Start over"],eZ=["Great choice! Here's a summary of your trip. Ready to book?","Excellent! I've prepared your booking details. Shall I confirm this reservation?","Perfect! Here's what your trip looks like. Would you like to proceed with booking?"],eX=["Confirm booking","Change flight","Cancel"],eQ=["Book another flight","Show my trips","Done"],e0=["Book anyway","Choose different flight","Check calendar"],e1=["Try again","Start over","Help"],e2=["Find a flight","Import from email","Show my trips"],e5=["No problem! Let me know if you need anything else.","Got it, I've cancelled that. What else can I help with?","Okay, starting fresh. Where would you like to fly?"],e4=["Scanning your email for flight confirmations...","Looking for booking confirmations in your inbox...","Checking your email for travel confirmations..."];function e3(e){return e[Math.floor(Math.random()*e.length)]}function e6(e){var t,a,s,i,n,r;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=function(e){let t={greeting:w.short,clarification:w.short,searching:w.searching,options:w.long,no_flights:w.medium,confirmation:w.medium,booking_success:w.medium,conflict_detected:w.medium,error:w.error,help:w.medium,cancel:w.short,import_start:w.searching,import_found:w.long,import_none:w.medium,goodbye:w.short}[e]||w.medium;return Math.floor(Math.random()*(t.max-t.min)+t.min)}(e);switch(e){case"greeting":return{message:e3(eB),suggestions:ez,delay:l};case"clarification":let c=o.context;if(null==c?void 0:null===(t=c.currentIntent)||void 0===t?void 0:t.missingRequired.includes("destination"))return{message:e3(e$),suggestions:["New York","Los Angeles","San Francisco","Miami"],delay:l};if(null==c?void 0:null===(a=c.currentIntent)||void 0===a?void 0:a.missingRequired.includes("date"))return{message:e3(eG),suggestions:eJ,delay:l};return{message:"I need a bit more information. Where and when would you like to travel?",suggestions:["Help me plan","Show examples"],delay:l};case"searching":return{message:e3(eK),delay:l};case"options":return{message:eV(o.count||0,o.destination,o.date),suggestions:["Sort by price","Sort by time","Filter nonstop"],delay:l};case"no_flights":return{message:eV(0,o.destination,o.date),suggestions:eq,delay:l};case"confirmation":return{message:e3(eZ),suggestions:eX,delay:l};case"booking_success":return{message:(i=null===(s=o.trip)||void 0===s?void 0:s.confirmationNumber,"Your flight is booked!".concat(i?" Your confirmation number is ".concat(i,"."):""," I've added it to your calendar. Have a great trip!")),suggestions:eQ,delay:l};case"conflict_detected":if(o.conflict)return{message:(n=o.conflict,"I noticed a ".concat({low:"minor",medium:"potential",high:"significant"}[n.severity],' calendar conflict. You have "').concat(n.eventTitle,'" scheduled around this time. How would you like to proceed?')),suggestions:e0,delay:l};return{message:"I found a potential scheduling conflict. Would you like to review it?",suggestions:e0,delay:l};case"error":if(o.error)return{message:function(e){let t={NO_FLIGHTS_FOUND:"I couldn't find any flights matching your search. This route might not have direct flights, or the dates may not be available.",INVALID_ROUTE:"I couldn't find that route. Please check the airport codes or city names and try again.",DATE_UNAVAILABLE:"Flights aren't available for the selected date. Would you like to try a different date?",DATE_IN_PAST:"The date you selected is in the past. Please choose a future date.",SERVICE_ERROR:"I'm having trouble connecting to the flight search service. Please try again in a moment.",CALENDAR_ERROR:"I couldn't access your calendar. Please check your permissions and try again.",EMAIL_PARSE_ERROR:"I had trouble reading the flight confirmation from that email. The format might not be recognized.",BOOKING_FAILED:"The booking couldn't be completed. The flight might no longer be available at this price.",CONFLICT_UNRESOLVED:"We need to resolve the calendar conflict before proceeding with the booking.",UNKNOWN_ERROR:"Something went wrong. Please try again or start over."};return e.message||t[e.code]||t.UNKNOWN_ERROR}(o.error),suggestions:o.error.retryable?["Try again","Start over"]:["Start over","Help"],delay:l};return{message:"Something went wrong. Please try again.",suggestions:e1,delay:l};case"help":return{message:"I can help you with:\n\n• **Book flights** - Just tell me where you want to go and when\n• **Import from email** - I'll scan your inbox for flight confirmations\n• **Check calendar** - I'll make sure flights don't conflict with your schedule\n• **Manage trips** - View and modify your bookings\n\nTry saying something like \"I need a flight to San Francisco next Tuesday\"",suggestions:e2,delay:l};case"cancel":return{message:e3(e5),suggestions:ez,delay:l};case"import_start":return{message:e3(e4),delay:l};case"import_found":return{message:1===(r=o.count||1)?"I found 1 flight confirmation in your email. Here's what I extracted:":"I found ".concat(r," flight confirmations in your email. Let me show you what I found:"),suggestions:["Add to calendar","Dismiss","Scan again"],delay:l};case"import_none":return{message:"I didn't find any flight confirmations in your recent emails. Make sure you're connected to your email account.",suggestions:["Connect email","Try again","Book a flight"],delay:l};case"goodbye":return{message:"Have a great trip! Let me know if you need anything else.",delay:l};default:return{message:"I'm here to help! What can I do for you?",suggestions:ez,delay:l}}}var e8=a(241);let e9={id:"chat-tour",name:"Chat Usage Tour",steps:[{id:"quick-replies",target:"quick-replies",title:"Quick Actions",content:"Click these buttons to quickly search for flights, import from email, or view your trips.",placement:"top",highlightPadding:8},{id:"chat-input",target:"chat-input",title:"Message Input",content:"Type anything here. For example: 'Find a flight to NYC tomorrow' or 'Show my upcoming trips'.",placement:"top",highlightPadding:4},{id:"send-button",target:"send-button",title:"Send",content:"Click this button to send your message, or press Enter on your keyboard.",placement:"left",highlightPadding:4},{id:"nav-trips",target:"nav-trips",title:"My Trips",content:"View all your trips here, including past and upcoming flights.",placement:"bottom",highlightPadding:4}]},e7="skywise-completed-tours";function te(e){try{let t=localStorage.getItem(e7),a=t?JSON.parse(t):[];a.includes(e)||(a.push(e),localStorage.setItem(e7,JSON.stringify(a)))}catch(e){}}let tt=[{id:"date-ambiguity",trigger:"next tuesday",aiInterpretation:{field:"date",understood:"January 21, 2025",confidence:.65},correctValue:"January 28, 2025",recoveryOptions:["Actually, I meant January 28","The Tuesday after that","Let me pick a different date"],explanation:"The phrase 'next Tuesday' can mean this coming Tuesday or the Tuesday of next week. Different people interpret this differently."},{id:"airport-ambiguity",trigger:"new york",aiInterpretation:{field:"airport",understood:"JFK - John F. Kennedy International",confidence:.72},correctValue:"LGA - LaGuardia",recoveryOptions:["Actually, LaGuardia works better for me","What about Newark?","Show me all NYC airports"],explanation:"New York has three major airports. I selected JFK as it's the main international hub, but LaGuardia or Newark might be more convenient."},{id:"destination-similar",trigger:"san francisco",aiInterpretation:{field:"destination",understood:"SFO - San Francisco International",confidence:.88},correctValue:"OAK - Oakland International",recoveryOptions:["Oakland would actually be closer","Show me flights to both","SFO is fine"],explanation:"San Francisco Bay Area has two major airports. SFO is the primary one, but Oakland might be more convenient depending on your final destination."},{id:"time-ambiguity",trigger:"morning flight",aiInterpretation:{field:"time",understood:"6:00 AM - 9:00 AM",confidence:.6},correctValue:"9:00 AM - 12:00 PM",recoveryOptions:["I meant mid-morning, around 9-10 AM","Earlier is fine, before 7 AM","Show me all morning options"],explanation:"'Morning' can mean early morning (5-8 AM) or late morning (9-12 PM). I assumed early morning—let me know if you prefer later."},{id:"city-confusion",trigger:"chicago",aiInterpretation:{field:"airport",understood:"ORD - O'Hare International",confidence:.75},correctValue:"MDW - Chicago Midway",recoveryOptions:["Midway would be better for me","O'Hare is fine","Which one has cheaper flights?"],explanation:"Chicago has two major airports. O'Hare is the main hub, but Midway often has budget-friendly options with Southwest."},{id:"international-destination",trigger:"tokyo",aiInterpretation:{field:"destination",understood:"NRT - Tokyo Narita International",confidence:.68},correctValue:"HND - Tokyo Haneda",recoveryOptions:["Yes, Narita is fine","Actually, Haneda is more convenient","Show me flights to both airports"],explanation:"Tokyo has two major airports. Narita (NRT) is the main international hub but is farther from the city center. Haneda (HND) is closer to downtown Tokyo and may be more convenient."}];function ta(e){let t=e.toLowerCase();for(let e of tt)if(t.includes(e.trigger))return e;return null}let ts=[{id:"1",airline:"United",flightNumber:"UA 442",departureAirport:"JFK",arrivalAirport:"SFO",departureTime:"2025-01-21T11:30:00",arrivalTime:"2025-01-21T14:45:00",duration:375,stops:0,price:28900,calendarFit:"fits"},{id:"2",airline:"American",flightNumber:"AA 178",departureAirport:"JFK",arrivalAirport:"SFO",departureTime:"2025-01-21T14:15:00",arrivalTime:"2025-01-21T17:30:00",duration:375,stops:0,price:25400,calendarFit:"fits"},{id:"3",airline:"Delta",flightNumber:"DL 891",departureTime:"2025-01-21T07:00:00",arrivalTime:"2025-01-21T10:15:00",departureAirport:"JFK",arrivalAirport:"SFO",duration:375,stops:0,price:21900,calendarFit:"conflict",conflictDetails:"Overlaps with 'Team Standup' (9:00 AM - 9:30 AM)"}],ti=[{id:"1",destination:"San Francisco",origin:"New York",departureDate:"2025-01-28",returnDate:"2025-01-31",status:"upcoming",calendarSynced:!0,airline:"United",flightNumber:"UA 442"},{id:"2",destination:"Chicago",origin:"New York",departureDate:"2025-02-15",status:"upcoming",calendarSynced:!1,airline:"American",flightNumber:"AA 178"},{id:"3",destination:"Miami",origin:"Boston",departureDate:"2025-02-20",returnDate:"2025-02-24",status:"upcoming",calendarSynced:!0,airline:"JetBlue",flightNumber:"B6 917"},{id:"4",destination:"Seattle",origin:"Los Angeles",departureDate:"2024-11-15",returnDate:"2024-11-18",status:"completed",calendarSynced:!0,airline:"Alaska",flightNumber:"AS 1284"},{id:"5",destination:"Denver",origin:"Dallas",departureDate:"2024-12-01",returnDate:"2024-12-03",status:"completed",calendarSynced:!0,airline:"Southwest",flightNumber:"WN 2341"},{id:"6",destination:"London",origin:"New York",departureDate:"2024-10-10",returnDate:"2024-10-17",status:"completed",calendarSynced:!0,airline:"British Airways",flightNumber:"BA 178"}];function tn(){let{messages:e,isTyping:t,conversationState:a,setConversationState:h,addMessage:u,simulateTyping:g,resetConversation:x,setIsTyping:y,parseUserInput:w,updateCollectedInfo:b,getSuggestions:k,canSearch:N,getClarificationPrompt:j}=function(){let[e,t]=(0,i.useState)([]),[a,s]=(0,i.useState)(!1),[n,r]=(0,i.useState)({step:"idle",collectedInfo:{}}),o=(0,i.useRef)(null),l=(0,i.useCallback)((e,a,s)=>{let i={id:(0,p.$C)(),role:e,content:a,timestamp:new Date,metadata:s};return t(e=>[...e,i]),i},[]),c=(0,i.useCallback)(e=>(function(e){let t=e.trim();if(!t)return{type:"unknown",confidence:0,entities:{},missingRequired:[],rawInput:e};let{type:a,confidence:s}=function(e){let t=e.toLowerCase().trim();for(let e of eW)if(e.test(t))return{type:"greeting",confidence:.95};for(let e of eE)if(e.test(t))return{type:"help",confidence:.9};for(let e of eP)if(e.test(t))return{type:"cancel",confidence:.9};for(let e of eF)if(e.test(t))return{type:"modify_flight",confidence:.85};for(let e of e_)if(e.test(t))return{type:"import_email",confidence:.9};for(let e of eM)if(e.test(t))return{type:"check_calendar",confidence:.85};for(let e of eO)if(e.test(t))return{type:"query_status",confidence:.85};for(let e of eR)if(e.test(t))return{type:"show_trips",confidence:.9};for(let e of eL)if(e.test(t))return{type:"book_flight",confidence:.85};let{origin:a,destination:s}=eU(e);return s||a?{type:"book_flight",confidence:.7}:eH(e)?{type:"book_flight",confidence:.5}:{type:"unknown",confidence:.3}}(t),i=function(e){let t={},a=e.toLowerCase(),{origin:s,destination:i}=eU(e);s&&(t.origin=s.city,t.originCode=s.code),i&&(t.destination=i.city,t.destinationCode=i.code);let n=[a.match(/(?:on\s+|for\s+|departure[:\s]+)?(\d{1,2}(?:st|nd|rd|th)?\s+(?:of\s+)?(?:january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec))/i),a.match(/((?:january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+\d{1,2}(?:st|nd|rd|th)?)/i),a.match(/(today|tomorrow)/i),a.match(/((?:next|this)\s*(?:monday|tuesday|wednesday|thursday|friday|saturday|sunday))/i),a.match(/(in\s+\d+\s*(?:day|days|week|weeks))/i),a.match(/(\d{1,2}[\/\-]\d{1,2}(?:[\/\-]\d{2,4})?)/)],r=[];for(let e of n)e&&r.push(e[1]);if(r.length>0){let e=eH(r[0]);if(e&&(t.departureDate=e),r.length>1){let e=eH(r[1]);e&&(t.returnDate=e)}}/round[ -]?trip|return(?:ing)?|both ways|two[ -]?way/i.test(a)&&t.departureDate&&t.returnDate;let o=a.match(/(\d+)\s*(?:passenger|passengers|people|person|adult|adults|traveler|travelers|ticket|tickets)/i);return o&&(t.passengers=Math.min(parseInt(o[1]),9)),!t.passengers&&/(?:for|just)\s+me\b/i.test(a)&&(t.passengers=1),!t.passengers&&/for\s+us\b/i.test(a)&&(t.passengers=2),/business\s*class/i.test(a)?t.class="business":/first\s*class/i.test(a)?t.class="first":/economy|coach/i.test(a)&&(t.class="economy"),/flexible|anytime|any\s*time|open|not\s*strict/i.test(a)?t.flexibility="flexible":/exact|specific|only|must\s*be/i.test(a)&&(t.flexibility="exact"),t}(t),n=function(e,t){let a=[];return"book_flight"!==t||(e.destination||e.destinationCode||a.push("destination"),e.departureDate||a.push("date")),a}(i,a),r=s;return"book_flight"===a&&(i.destination&&(r+=.1),i.departureDate&&(r+=.1),n.length>0&&(r-=.1*n.length)),{type:a,confidence:r=Math.max(0,Math.min(1,r)),entities:i,missingRequired:n,rawInput:e}})(e),[]),d=(0,i.useCallback)(e=>{r(t=>{var a,s,i,n,r,o,l,c,d;return{...t,currentIntent:e,collectedInfo:{...t.collectedInfo,...e.entities},searchParams:{...t.searchParams,destination:e.entities.destination||(null===(a=t.searchParams)||void 0===a?void 0:a.destination),destinationCode:e.entities.destinationCode||(null===(s=t.searchParams)||void 0===s?void 0:s.destinationCode),origin:e.entities.origin||(null===(i=t.searchParams)||void 0===i?void 0:i.origin),originCode:e.entities.originCode||(null===(n=t.searchParams)||void 0===n?void 0:n.originCode),departureDate:(null===(r=e.entities.departureDate)||void 0===r?void 0:r.toISOString())||(null===(o=t.searchParams)||void 0===o?void 0:o.departureDate),returnDate:(null===(l=e.entities.returnDate)||void 0===l?void 0:l.toISOString())||(null===(c=t.searchParams)||void 0===c?void 0:c.returnDate),passengers:e.entities.passengers||(null===(d=t.searchParams)||void 0===d?void 0:d.passengers)}}})},[]),m=(0,i.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500;return o.current&&clearTimeout(o.current),s(!0),new Promise(a=>{o.current=setTimeout(()=>{s(!1),e(),a()},t)})},[]),h=(0,i.useCallback)((e,t)=>{var a;return function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e6({"greeting:idle":"greeting","help:idle":"help","cancel:idle":"cancel","book_flight:clarifying":"clarification","book_flight:searching":"searching","book_flight:showing_options":"options","book_flight:confirming":"confirmation","book_flight:complete":"booking_success","book_flight:checking_conflicts":"conflict_detected","import_email:importing_email":"import_start","import_email:reviewing_import":"import_found","unknown:idle":"greeting","unknown:clarifying":"clarification"}["".concat(e,":").concat(t)]||"greeting",a)}(e.type,t,{destination:e.entities.destination,date:null===(a=e.entities.departureDate)||void 0===a?void 0:a.toLocaleDateString()})},[]),u=(0,i.useCallback)(()=>(function(e){var t,a,s;let i=new Date,n=i.getHours(),r=i.getDay(),{collectedInfo:o,userPreferences:l,previousMessages:c}=e,d=[];n>=5&&n<12?d.push("Morning flight"):n>=12&&n<17?d.push("Afternoon flight"):d.push("Evening flight"),5===r&&d.push("Weekend trip"),(0===r||6===r)&&d.push("Book for tomorrow"),o.destination&&d.push("Return from ".concat(o.destination)),l.homeAirport&&!o.origin&&d.push("Fly from ".concat(l.homeAirport));let m=c.find(e=>{var t,a;return"user"===e.role&&(null===(a=e.metadata)||void 0===a?void 0:null===(t=a.intent)||void 0===t?void 0:t.type)==="book_flight"});if(null==m?void 0:null===(s=m.metadata)||void 0===s?void 0:null===(a=s.intent)||void 0===a?void 0:null===(t=a.entities)||void 0===t?void 0:t.destination){let e=m.metadata.intent.entities.destination;e!==o.destination&&d.push("Search ".concat(e," again"))}if(d.length<4){for(let e of["Find a flight","Import from email","Show my trips","Help"])if(d.includes(e)||d.push(e),d.length>=4)break}return d.slice(0,4)})({sessionId:"current",currentIntent:n.currentIntent,collectedInfo:n.collectedInfo,previousMessages:e,userPreferences:{},lastActivity:new Date}),[n,e]),f=(0,i.useCallback)(()=>{let{collectedInfo:e}=n;return!!(e.destination||e.destinationCode)&&e.departureDate},[n]),g=(0,i.useCallback)(()=>{let{currentIntent:e}=n;return e?e.missingRequired:[]},[n]),x=(0,i.useCallback)(()=>(function(e,t){if(0===e.length)return"";let a={destination:(null==t?void 0:t.origin)?"Where would you like to fly to from ".concat(t.origin,"?"):"Where would you like to fly to?",origin:(null==t?void 0:t.destination)?"Where will you be flying from to reach ".concat(t.destination,"?"):"Where will you be flying from?",date:(null==t?void 0:t.destination)?"When would you like to fly to ".concat(t.destination,"?"):"When would you like to travel?",passengers:"How many passengers will be traveling?"};if(1===e.length)return a[e[0]]||"Could you tell me the ".concat(e[0],"?");let s=["destination","date","origin","passengers"],i=e.sort((e,t)=>s.indexOf(e)-s.indexOf(t));return a[i[0]]||"I need a few more details. ".concat(a[i[0]])})(g(),n.collectedInfo),[g,n.collectedInfo]),y=(0,i.useCallback)(()=>{o.current&&clearTimeout(o.current),t([]),r({step:"idle",collectedInfo:{}}),s(!1)},[]),w=(0,i.useCallback)(e=>{r(t=>({...t,step:e}))},[]),b=(0,i.useCallback)((e,t)=>{r(a=>({...a,step:"error",error:{code:e,message:t}}))},[]),v=(0,i.useCallback)(()=>{r(e=>({...e,step:"idle",error:void 0}))},[]);return{messages:e,isTyping:a,conversationState:n,setMessages:t,setIsTyping:s,setConversationState:r,setStep:w,setError:b,clearError:v,addMessage:l,simulateTyping:m,resetConversation:y,parseUserInput:c,updateCollectedInfo:d,generateAssistantResponse:h,getSuggestions:u,canSearch:f,getMissingFields:g,getClarificationPrompt:x}}(),{toast:A}=(0,e8.dj)(),C=(0,i.useRef)(null),[S,I]=(0,i.useState)(!1),[D,T]=(0,i.useState)(null),[L,F]=(0,i.useState)(!1),[P,O]=(0,i.useState)(null),[_,M]=(0,i.useState)(!1),[W,E]=(0,i.useState)(""),[Y,B]=(0,i.useState)(null),[z,G]=(0,i.useState)(()=>window.innerWidth<768),[J,K]=(0,i.useState)(null),[V,X]=(0,i.useState)(!1),[ee,et]=(0,i.useState)(!1),[ea,es]=(0,i.useState)(["Book a Flight to New York","Import from my mail","Show my upcoming trips"]),[ei,en]=(0,i.useState)(!0),eo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{onComplete:a,onSkip:s,autoStart:n=!1}=t,[r,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(0),[d,m]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let t=function(e){try{let t=localStorage.getItem(e7);if(!t)return!1;return JSON.parse(t).includes(e)}catch(e){return!1}}(e.id);m(t),n&&!t&&o(!0)},[e.id,n]);let h=e.steps.length,u=r?e.steps[l]:null,p=(0,i.useCallback)(()=>{c(0),o(!0)},[]),f=(0,i.useCallback)(()=>{l<h-1?c(e=>e+1):(te(e.id),m(!0),o(!1),null==a||a())},[l,h,e.id,a]),g=(0,i.useCallback)(()=>{l>0&&c(e=>e-1)},[l]),x=(0,i.useCallback)(()=>{o(!1),c(0),null==s||s()},[s]),y=(0,i.useCallback)(()=>{te(e.id),m(!0),o(!1),null==a||a()},[e.id,a]),w=(0,i.useCallback)(e=>{e>=0&&e<h&&c(e)},[h]);return{isActive:r,currentStep:l,currentStepData:u,totalSteps:h,startTour:p,nextStep:f,prevStep:g,skipTour:x,completeTour:y,goToStep:w,isCompleted:d}}(e9,{onComplete:()=>{A({title:"Tour Complete!",description:"You're all set to use SkyWise."})}});(0,i.useEffect)(()=>{let e=()=>G(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{if(C.current){let e=C.current.querySelector("[data-radix-scroll-area-viewport]");e&&(e.scrollTop=e.scrollHeight)}},[e,t]),(0,i.useEffect)(()=>{if(0===e.length&&!ei){let e=e6("greeting");u("assistant",e.message,{suggestions:e.suggestions}),es(e.suggestions||[])}},[e.length,u,ei]);let el=(0,i.useCallback)(e=>{en(!1),u("assistant",e6("greeting").message),setTimeout(()=>{switch(e){case"search":eS("I want to find a flight");break;case"import":eS("Import flights from my email");break;case"calendar":eS("Show my trips");break;case"assistant":eS("I need help")}},500)},[u]),ed=(0,i.useCallback)(()=>{en(!1);let e=e6("greeting");u("assistant",e.message,{suggestions:e.suggestions}),es(e.suggestions||[])},[u]),em=(0,i.useCallback)(e=>{window.innerWidth<768?(O(e),F(!0)):(T(e),I(!0))},[]),eh=(0,i.useCallback)(()=>{I(!1),F(!1)},[]),ep=(0,i.useCallback)(e=>{h(e=>({...e,step:"booking"})),g(()=>{u("assistant","Your flight is booked! ".concat(e.airline," ").concat(e.flightNumber," to ").concat(e.arrivalAirport,".\n\nI've added it to your calendar and a confirmation email is on its way."),{type:"success"}),h(e=>({...e,step:"complete"})),eh(),E("Flight booked & added to calendar"),M(!0),es(["Book another flight","Show my upcoming trips","Done"])},2e3)},[h,g,u,eh]),eg=(0,i.useCallback)(e=>{em((0,s.jsx)(ec,{origin:"New York",destination:"San Francisco",outbound:{date:e.departureTime,departureTime:e.departureTime,arrivalTime:e.arrivalTime,departureAirport:e.departureAirport,arrivalAirport:e.arrivalAirport,airline:e.airline,flightNumber:e.flightNumber,duration:"6h 15m"},returnFlight:{date:"2025-01-23T17:15:00",departureTime:"2025-01-23T17:15:00",arrivalTime:"2025-01-24T01:30:00",departureAirport:"SFO",arrivalAirport:"JFK",airline:e.airline,flightNumber:e.flightNumber.replace(/\d+/,e=>String(parseInt(e)+1)),duration:"5h 15m"},totalPrice:2*e.price,calendarEvents:[{title:"Flight to San Francisco",start:e.departureTime,end:e.arrivalTime},{title:"Flight home",start:"2025-01-23T17:15:00",end:"2025-01-24T01:30:00"}],onConfirm:()=>ep(e),onEdit:()=>{eh(),u("assistant","What would you like to change about your booking?")},onCancel:()=>{eh(),h(e=>({...e,step:"showing_options"}))},isLoading:"booking"===a.step}))},[em,ep,eh,u,a.step,h]),ex=(0,i.useCallback)(e=>{let t=ts.find(t=>t.id===e);t&&(B(e),"conflict"===t.calendarFit?(h(e=>({...e,step:"checking_conflicts",selectedFlight:t,conflict:{eventTitle:"Team Standup",eventStart:"2025-01-21T09:00:00",eventEnd:"2025-01-21T09:30:00"}})),u("assistant","I noticed this flight has a calendar conflict. Let me show you the details so you can decide.",{type:"conflict"}),em((0,s.jsx)(ef,{flightArrivalTime:t.arrivalTime,flightDepartureTime:t.departureTime,conflictingEvent:{id:"1",title:"Team Standup",start:"2025-01-21T09:00:00",end:"2025-01-21T09:30:00"},onFindAlternatives:()=>{eh(),u("user","Find flights without conflicts");let e=ts.filter(e=>"fits"===e.calendarFit);g(()=>{u("assistant","Here are flights that work with your schedule:",{type:"flight_options",flightOptions:e}),h(t=>({...t,step:"showing_options",flightOptions:e}))})},onBookAnyway:()=>{eh(),u("user","Book this flight anyway"),g(()=>{u("assistant","Understood! I'll book this flight but won't add it to your calendar. You may want to reschedule your meeting."),h(e=>({...e,step:"confirming",selectedFlight:t})),eg(t)})},onShowDetails:()=>{A({title:"Team Standup",description:"Daily sync meeting - 9:00 AM to 9:30 AM"})}}))):(h(e=>({...e,step:"confirming",selectedFlight:t})),u("assistant","Great choice! Here's your trip summary:"),eg(t)))},[h,u,em,eh,g,eg,A]),ey={airline:"Delta",flightNumber:"DL 1247",date:"April 5, 2025",departureTime:"8:00 AM",departureAirport:"JFK",arrivalAirport:"LAX"},ew=(0,i.useCallback)(e=>{eh(),u("user","Add to Calendar"),g(()=>{u("assistant","Done! Your ".concat(e.airline," flight to ").concat(e.arrivalAirport," is now on your calendar."),{type:"success"}),h(e=>({...e,step:"idle"})),es(["Book a Flight to New York","Import from my mail","Show my upcoming trips"]),E("Added to calendar"),M(!0)})},[eh,u,g,h]),eb=(0,i.useCallback)(()=>{eh(),u("assistant","No problem, I'll skip that email."),h(e=>({...e,step:"idle"})),es(["Book a Flight to New York","Import from my mail","Show my upcoming trips"])},[eh,u,h]),ev=(0,i.useCallback)(()=>{u("assistant","Scanning your email for flight confirmations...",{type:"searching"}),g(()=>{u("assistant","I found a flight confirmation in your email! Here's what I extracted:",{type:"imported_trip",data:ey}),em((0,s.jsx)(eu,{source:"Email from Delta Airlines",data:ey,confidence:{airline:"high",flightNumber:"high",date:"high",departureTime:"low",airports:"high"},onAddToCalendar:ew,onDismiss:eb}))},2e3)},[u,em,g,ew,eb]),ej=(0,i.useCallback)(()=>{if(K(null),(null==J?void 0:J.id)==="international-destination"){h(e=>({...e,step:"clarifying",collectedInfo:{...e.collectedInfo,destination:"Tokyo",destinationCode:"NRT"}})),g(()=>{u("assistant","Perfect, **Tokyo (NRT - Narita)** it is! When do you want to travel?"),es(["Tomorrow","Next week","This weekend","Pick a date"])},800);return}g(()=>{u("assistant","Perfect! Let me search for flights with those details..."),h(e=>({...e,step:"searching"})),setTimeout(()=>{y(!1),u("assistant","I found 3 flights that fit your schedule. The prices range from $219 to $289.",{type:"flight_options",flightOptions:ts}),h(e=>({...e,step:"showing_options",flightOptions:ts})),es(["Sort by price","Nonstop only","Change dates"])},1500)})},[J,u,h,g,y]),eA=(0,i.useCallback)(e=>{if(K(null),u("user",e),(null==J?void 0:J.id)==="international-destination"){let t=e.toLowerCase().includes("haneda"),a=t?"HND":"NRT",s=t?"Haneda":"Narita";h(e=>({...e,step:"clarifying",collectedInfo:{...e.collectedInfo,destination:"Tokyo",destinationCode:a}})),g(()=>{u("assistant","Got it, **Tokyo (".concat(a," - ").concat(s,")** it is! When do you want to travel?")),es(["Tomorrow","Next week","This weekend","Pick a date"])},800);return}g(()=>{u("assistant","Got it! I've updated the search. Let me find flights with that correction..."),h(e=>({...e,step:"searching"})),setTimeout(()=>{y(!1),u("assistant","Here are 3 flights that match your corrected search:",{type:"flight_options",flightOptions:ts}),h(e=>({...e,step:"showing_options",flightOptions:ts}))},1500)})},[J,u,h,g,y]),eS=(0,i.useCallback)(e=>{var t,i;u("user",e);let n=w(e);if(b(n),"importing_email"!==a.step&&"reviewing_import"!==a.step&&"clarifying"!==a.step&&"book_flight"!==n.type&&"show_trips"!==n.type&&"import_email"!==n.type){let t=ta(e.toLowerCase());if(t&&t.aiInterpretation.confidence<.85){g(()=>{u("assistant","I understood you want to go to ".concat(t.aiInterpretation.understood,"..."),{confidence:t.aiInterpretation.confidence}),K(t),h(e=>({...e,step:"clarifying"})),es(t.recoveryOptions.slice(0,3))});return}}if("importing_email"===a.step){if("automatic discovery"===e.toLowerCase()){ev();return}if("manual entry"===e.toLowerCase()){g(()=>{u("assistant","Sure! You can paste your flight confirmation email or enter the details:\n\n• Flight number (e.g., UA 442)\n• Date and time\n• Origin and destination airports"),h(e=>({...e,step:"reviewing_import"})),es(["Book a Flight to New York","Import from my mail","Show my upcoming trips"])},800);return}}if("reviewing_import"===a.step){let t={"new york":["JFK","LGA","EWR"],london:["LHR","LGW","STN","LTN"],tokyo:["NRT","HND"],chicago:["ORD","MDW"],"los angeles":["LAX","BUR","SNA"],"san francisco":["SFO","OAK","SJC"],washington:["DCA","IAD","BWI"],paris:["CDG","ORY"],miami:["MIA","FLL"]},a=e.match(/(?:flight[:\s]*)?([A-Z]{2})\s*(\d{2,4})/i),i=e.match(/(?:date[:\s]*)?(january|february|march|april|may|june|july|august|september|october|november|december)\s+(\d{1,2}),?\s*(\d{4})/i),n=e.match(/(?:departure[:\s]*)?(\d{1,2}:\d{2}\s*(?:AM|PM))\s*(?:from\s+)?([A-Z]{3})(?:\s|$|\))/i),r=e.match(/(?:arrival[:\s]*)?(\d{1,2}:\d{2}\s*(?:AM|PM))\s*(?:at\s+)?([A-Z]{3})(?:\s|$|\))/i),o=e.match(/(?:departure[:\s]*)?(\d{1,2}:\d{2}\s*(?:AM|PM))\s*(?:from\s+)?\(?([A-Za-z\s]+)\)?/i),l=e.match(/(?:arrival[:\s]*)?(\d{1,2}:\d{2}\s*(?:AM|PM))\s*(?:at\s+)?[A-Z]{3}\s*\(([A-Za-z\s]+)\)/i),c="Unknown",d="low",m="Unknown",p=!1;if(n)m=n[1],c=n[2].toUpperCase(),d="high";else if(o){m=o[1];let e=o[2].trim().toLowerCase();t[e]?(c="".concat(o[2].trim()," (").concat(t[e].join("/"),"?)"),d="low",p=!0):(c=o[2].trim(),d="medium")}let f="Unknown",x="low";if(r)f=r[2].toUpperCase(),x="high";else if(l){let e=l[2].trim().toLowerCase();t[e]?(f="".concat(l[2].trim()," (").concat(t[e].join("/"),"?)"),x="low"):(f=l[2].trim(),x="medium")}let y="high"===d&&"high"===x?"high":"low"===d||"low"===x?"low":"medium";if(a||i||"Unknown"!==m){let e={airline:a?"UA"===a[1].toUpperCase()?"United":"AA"===a[1].toUpperCase()?"American":"DL"===a[1].toUpperCase()?"Delta":a[1].toUpperCase():"Unknown",flightNumber:a?"".concat(a[1].toUpperCase()," ").concat(a[2]):"Unknown",date:i?"".concat(i[1]," ").concat(i[2],", ").concat(i[3]):"Unknown",departureTime:m,departureAirport:c,arrivalAirport:f},t=p?"I extracted the following flight details, but **I need your help** - New York has multiple airports (JFK, LGA, EWR). Please verify:":"I extracted the following flight details from your email:";g(()=>{u("assistant",t,{type:"imported_trip",data:e}),em((0,s.jsx)(eu,{source:"Pasted email content",data:e,confidence:{airline:a?"high":"low",flightNumber:a?"high":"low",date:i?"high":"low",departureTime:"Unknown"!==m?"high":"low",airports:y},onAddToCalendar:ew,onDismiss:eb})),h(e=>({...e,step:"idle"}))},1500);return}}if("clarifying"===a.step){let i=e.toLowerCase().trim(),r=e.toUpperCase().trim(),o={"new york":{airports:["JFK","LGA","EWR"],names:["JFK - John F. Kennedy International","LGA - LaGuardia","EWR - Newark Liberty"]},"san francisco":{airports:["SFO","OAK","SJC"],names:["SFO - San Francisco International","OAK - Oakland International","SJC - San Jose"]},chicago:{airports:["ORD","MDW"],names:["ORD - O'Hare International","MDW - Midway"]},miami:{airports:["MIA","FLL"],names:["MIA - Miami International","FLL - Fort Lauderdale"]},"los angeles":{airports:["LAX","BUR","SNA"],names:["LAX - Los Angeles International","BUR - Burbank","SNA - John Wayne (Orange County)"]},london:{airports:["LHR","LGW","STN"],names:["LHR - Heathrow","LGW - Gatwick","STN - Stansted"]},tokyo:{airports:["NRT","HND"],names:["NRT - Narita International","HND - Haneda"]},washington:{airports:["DCA","IAD","BWI"],names:["DCA - Reagan National","IAD - Dulles International","BWI - Baltimore-Washington"]},paris:{airports:["CDG","ORY"],names:["CDG - Charles de Gaulle","ORY - Orly"]}},l={boston:"BOS",seattle:"SEA",denver:"DEN",atlanta:"ATL",dallas:"DFW",phoenix:"PHX","las vegas":"LAS",orlando:"MCO",houston:"IAH"};if(["JFK","LGA","EWR","LHR","LGW","STN","NRT","HND","ORD","MDW","LAX","BUR","SNA","SFO","OAK","SJC","DCA","IAD","BWI","CDG","ORY","MIA","FLL"].includes(r)){h(e=>({...e,step:"clarifying",collectedInfo:{...e.collectedInfo,destinationCode:r}})),g(()=>{u("assistant","Perfect, **".concat(r,"** it is! When do you want to travel?")),es(["Tomorrow","Next week","This weekend","Pick a date"])},800);return}if("tokyo"===i){let e=ta("tokyo");if(e){g(()=>{u("assistant","I understood you want to go to **Tokyo** - specifically **NRT (Narita International)**...",{confidence:e.aiInterpretation.confidence}),K(e),es(e.recoveryOptions.slice(0,3))});return}}if(o[i]){let t=o[i],a=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();h(e=>({...e,collectedInfo:{...e.collectedInfo,destination:a}})),g(()=>{u("assistant","Great choice! **".concat(a,"** has ").concat(t.airports.length," major airports:\n\n").concat(t.names.map((e,a)=>"• **".concat(t.airports[a],"** - ").concat(e.split(" - ")[1])).join("\n"),"\n\nWhich airport works best for you?")),es(t.airports)},800);return}if(l[i]){let t=l[i],a=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();h(e=>({...e,step:"clarifying",collectedInfo:{...e.collectedInfo,destination:a,destinationCode:t}})),g(()=>{u("assistant","Great, **".concat(a,"** (").concat(t,") it is! When do you want to travel?")),es(["Tomorrow","Next week","This weekend","Pick a date"])},800);return}let{collectedInfo:c}=a;if("pick a date"===i&&(c.destinationCode||c.destination)){let e=c.destination||c.destinationCode,t=c.destinationCode;em((0,s.jsx)(eC,{onSelect:a=>{eh();let s=a.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});u("user",s),h(e=>({...e,step:"searching"})),g(()=>{u("assistant","Searching for flights to **".concat(e,"**").concat(t&&e!==t?" (".concat(t,")"):""," on **").concat(s,"**...\n\nI'm also checking your calendar for conflicts."),{type:"searching"}),setTimeout(()=>{y(!1),u("assistant","I found 3 flights to ".concat(e,". I've marked any calendar conflicts so you can see what fits best."),{type:"flight_options",flightOptions:ts}),h(e=>({...e,step:"showing_options",flightOptions:ts})),es(["Sort by price","Nonstop only","Earlier flights"])},2e3)},1500)},onCancel:eh,minDate:new Date}));return}if((c.destinationCode||c.destination)&&([/^tomorrow$/i,/^next\s+(?:week|monday|tuesday|wednesday|thursday|friday|saturday|sunday)$/i,/^this\s+(?:weekend|week)$/i,/^\d{1,2}\/\d{1,2}(?:\/\d{2,4})?$/,/^(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i].some(e=>e.test(i))||n.entities.departureDate)){let a=c.destination||c.destinationCode,s=c.destinationCode,i=(null===(t=n.entities.departureDate)||void 0===t?void 0:t.toLocaleDateString())||e;h(e=>({...e,step:"searching"})),g(()=>{u("assistant","Searching for flights to **".concat(a,"**").concat(s&&a!==s?" (".concat(s,")"):""," on **").concat(i,"**...\n\nI'm also checking your calendar for conflicts."),{type:"searching"}),setTimeout(()=>{y(!1),u("assistant","I found 3 flights to ".concat(a,". I've marked any calendar conflicts so you can see what fits best."),{type:"flight_options",flightOptions:ts}),h(e=>({...e,step:"showing_options",flightOptions:ts})),es(["Sort by price","Nonstop only","Earlier flights"])},2e3)},1500);return}}switch(n.type){case"greeting":h(e=>({...e,step:"idle"})),g(()=>{let e=e6("greeting");u("assistant",e.message),es(e.suggestions||[])},800);break;case"help":h(e=>({...e,step:"idle"})),g(()=>{let e=e6("help");u("assistant",e.message),es(e.suggestions||[])},1e3);break;case"show_trips":{let t=e.toLowerCase().includes("upcoming");X(!0),et(t),h(e=>({...e,step:"idle"}));let a=ti.filter(e=>"upcoming"===e.status),s=ti.filter(e=>"completed"===e.status);g(()=>{t?(u("assistant","Here are your **".concat(a.length," upcoming trips**:")),es(["Book a Flight to New York","Import from my mail","Show my trips"])):(u("assistant","Here are all your trips (**".concat(a.length," upcoming**, **").concat(s.length," completed**):")),es(["Book a Flight to New York","Import from my mail","Show my upcoming trips"]))},800);break}case"import_email":h(e=>({...e,step:"importing_email"})),g(()=>{u("assistant","I can help you import your flight information. How would you like to proceed?\n\n• **Automatic Discovery** - I'll scan your inbox for flight confirmations\n• **Manual Entry** - You can paste or type in your flight details"),es(["Automatic Discovery","Manual Entry"])},800);break;case"cancel":g(()=>{u("assistant",e6("cancel").message),h(e=>({...e,step:"idle",collectedInfo:{}})),es(["Book a Flight to New York","Import from my mail","Show my upcoming trips"])},800);break;case"book_flight":if(n.missingRequired.length>0){h(e=>({...e,step:"clarifying"}));let e="",t=n.entities.destination,a=n.entities.departureDate,s=null==t?void 0:t.toLowerCase(),i=s?({"new york":{airports:["JFK","LGA","EWR"],names:["JFK - John F. Kennedy International","LGA - LaGuardia","EWR - Newark Liberty"]},london:{airports:["LHR","LGW","STN"],names:["LHR - Heathrow","LGW - Gatwick","STN - Stansted"]},tokyo:{airports:["NRT","HND"],names:["NRT - Narita International","HND - Haneda"]},chicago:{airports:["ORD","MDW"],names:["ORD - O'Hare International","MDW - Midway"]},"los angeles":{airports:["LAX","BUR","SNA"],names:["LAX - Los Angeles International","BUR - Burbank","SNA - John Wayne (Orange County)"]},"san francisco":{airports:["SFO","OAK","SJC"],names:["SFO - San Francisco International","OAK - Oakland International","SJC - San Jose"]},washington:{airports:["DCA","IAD","BWI"],names:["DCA - Reagan National","IAD - Dulles International","BWI - Baltimore-Washington"]},paris:{airports:["CDG","ORY"],names:["CDG - Charles de Gaulle","ORY - Orly"]},miami:{airports:["MIA","FLL"],names:["MIA - Miami International","FLL - Fort Lauderdale"]}})[s]:null;t&&i&&!a?(e="Let me confirm I understood correctly.\n\n**".concat(t,"** has ").concat(i.airports.length," major airports:\n\n").concat(i.names.map((e,t)=>"• **".concat(i.airports[t],"** - ").concat(e.split(" - ")[1])).join("\n"),"\n\nWhich airport works best for you?"),es(i.airports)):t&&!a?(e="Great, ".concat(t,"! When do you want to travel?"),es(["Tomorrow","Next week","This weekend","Pick a date"])):!t&&a?(e="Got it, ".concat(a.toLocaleDateString(),". Where would you like to fly to?"),es(["New York","Los Angeles","San Francisco","Miami"])):t?(e="Got it, you want to fly to ".concat(t,". A few quick questions:\n\n• What date works for you?\n• Do you have an airport preference?"),es(["Tomorrow morning","Next Tuesday","This weekend"])):(e="I can help you book a flight! Where would you like to go?",es(["San Francisco","New York","Miami","Tokyo"])),g(()=>{u("assistant",e,t&&i?{confidence:n.confidence}:void 0)},1e3)}else{h(e=>({...e,step:"searching"}));let e=n.entities.destination||n.entities.destinationCode,t=null===(i=n.entities.departureDate)||void 0===i?void 0:i.toLocaleDateString();g(()=>{u("assistant","Searching for flights to ".concat(e).concat(t?" on ".concat(t):"","...\n\nI'm also checking your calendar for conflicts."),{type:"searching"}),setTimeout(()=>{y(!1),u("assistant","I found 3 flights to ".concat(e,". I've marked any calendar conflicts so you can see what fits best."),{type:"flight_options",flightOptions:ts}),h(e=>({...e,step:"showing_options",flightOptions:ts})),es(["Sort by price","Nonstop only","Earlier flights"])},2e3)},1500)}break;default:h(e=>({...e,step:"idle"})),g(()=>{u("assistant","I can help you with:\n\n• Finding and booking flights\n• Importing trips from your email\n• Checking your calendar for conflicts\n\nJust tell me where you want to go, or try one of the suggestions below!",{confidence:n.confidence}),es(["Book a Flight to New York","Import from my mail","Show my upcoming trips"])},1e3)}},[u,w,b,g,h,y,ev,a.step,a.collectedInfo,em,eh]),eD=(0,i.useCallback)(e=>{eS(e)},[eS]),eT=(0,i.useCallback)(async()=>{M(!1),A({title:"Action Undone",description:"The flight has been removed from your calendar."}),u("assistant","No problem, I've removed the flight from your calendar."),h(e=>({...e,step:"idle"})),es(["Book a Flight to New York","Import from my mail","Show my upcoming trips"])},[A,h,u]);return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-slate-50 via-white to-slate-50 overflow-x-hidden",children:[(0,s.jsx)(m.j,{}),(0,s.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-sky-100/30 rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-100/20 rounded-full blur-3xl"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-hidden pt-20 pb-44 relative z-10 w-full min-w-0",children:(0,s.jsx)(eI,{className:"h-full w-full",ref:C,children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 overflow-hidden w-full min-w-0 box-border",children:[(0,s.jsx)(n.N,{mode:"wait",children:ei&&0===e.length&&(0,s.jsx)(q,{onFeatureClick:el,onStartTour:()=>{en(!1),ed(),setTimeout(()=>eo.startTour(),300)},onDismiss:ed})}),(0,s.jsx)("div",{className:"space-y-1 overflow-hidden min-w-0 w-full",children:(0,s.jsxs)(n.N,{mode:"popLayout",children:[e.map(e=>{var t,a,i,n,m,h,u;return(0,s.jsxs)(R,{role:e.role,content:e.content,timestamp:e.timestamp,confidence:null===(t=e.metadata)||void 0===t?void 0:t.confidence,showConfidence:(null===(a=e.metadata)||void 0===a?void 0:a.confidence)!==void 0&&e.metadata.confidence<.85,messageType:null===(i=e.metadata)||void 0===i?void 0:i.type,children:[(null===(n=e.metadata)||void 0===n?void 0:n.type)==="flight_options"&&(null===(m=e.metadata)||void 0===m?void 0:m.flightOptions)&&(0,s.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 space-y-3 w-full max-w-full overflow-hidden",children:e.metadata.flightOptions.map((e,t)=>(0,s.jsx)(r.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},children:(0,s.jsx)(er,{...e,selected:Y===e.id,onSelect:ex})},e.id))}),(null===(h=e.metadata)||void 0===h?void 0:h.type)==="imported_trip"&&!!(null===(u=e.metadata)||void 0===u?void 0:u.data)&&(0,s.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 w-full max-w-full overflow-hidden",children:(0,s.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-amber-500 flex items-center justify-center shadow-lg shadow-amber-500/30",children:(0,s.jsx)(o.A,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold text-slate-900",children:[e.metadata.data.airline," ",e.metadata.data.flightNumber]}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"From your email"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.metadata.data.date})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.metadata.data.departureTime})]}),(0,s.jsxs)("div",{className:"col-span-2 flex items-center gap-2 text-slate-600",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[e.metadata.data.departureAirport," → ",e.metadata.data.arrivalAirport]})]})]})]})}),"assistant"===e.role&&(e.content.includes("quick questions")||e.content.includes("What date")||e.content.includes("When do you"))&&(0,s.jsx)("div",{className:"mt-4 w-full min-w-0 overflow-hidden box-border",children:(0,s.jsx)(U,{options:ea.slice(0,4),onSelect:eD})}),"assistant"===e.role&&e.content.includes("I understood you want")&&J&&(0,s.jsx)($,{scenario:J,onConfirmOriginal:ej,onSelectOption:eA}),"assistant"===e.role&&(e.content.includes("upcoming trips")||e.content.includes("all your trips")||e.content.toLowerCase().includes("here are your"))&&V&&(0,s.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 space-y-2 w-full max-w-full overflow-hidden",children:(ee?ti.filter(e=>"upcoming"===e.status):ti).map((e,t)=>(0,s.jsx)(r.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*t},children:(0,s.jsx)(eN,{...e,onClick:()=>{A({title:"".concat(e.origin," → ").concat(e.destination),description:"".concat(e.airline," ").concat(e.flightNumber," - ").concat(e.departureDate)})}})},e.id))})]},e.id)}),t&&(0,s.jsx)(R,{role:"assistant",content:"",isTyping:!0})]})})]})})}),(0,s.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 z-30",children:[(0,s.jsx)("div",{className:"h-8 bg-gradient-to-t from-white to-transparent"}),(0,s.jsx)("div",{className:"bg-white/95 backdrop-blur-xl border-t border-slate-200/60",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsx)("div",{"data-tour-id":"quick-replies",children:(0,s.jsx)(H,{onSend:eS,disabled:"booking"===a.step,isLoading:t,placeholder:"Where do you want to fly?",suggestions:ea.length>0?ea:["Book a Flight to New York","Import from my mail","Show my upcoming trips"],onSuggestionClick:eD})})})})]}),(0,s.jsx)(Z,{isActive:eo.isActive,step:eo.currentStepData}),eo.isActive&&eo.currentStepData&&(0,s.jsx)(Q,{step:eo.currentStepData,currentStep:eo.currentStep,totalSteps:eo.totalSteps,onNext:eo.nextStep,onPrev:eo.prevStep,onSkip:eo.skipTour}),(0,s.jsx)(f,{open:S,onClose:eh,title:"Trip Details",children:D}),(0,s.jsx)(v,{open:L,onClose:eh,title:"Trip Details",children:P}),(0,s.jsx)(ek,{show:_,message:W,onUndo:eT,onDismiss:()=>M(!1),actionType:"booking_confirm",description:"Your trip has been confirmed"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[86,173,780,525,256,687,441,517,358],()=>t(5794)),_N_E=e.O()}]);