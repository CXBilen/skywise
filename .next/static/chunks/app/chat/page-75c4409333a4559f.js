(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{5794:(e,t,s)=>{Promise.resolve().then(s.bind(s,5151))},5151:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ex});var a=s(5155),l=s(2115),i=s(5683),r=s(9308),n=s(1556),o=s(2428),d=s(767),c=s(4085),m=s(1511),x=s(9602);let h=l.forwardRef((e,t)=>{let{className:s,children:l,...i}=e;return(0,a.jsxs)(m.bL,{ref:t,className:(0,x.cn)("relative overflow-hidden",s),...i,children:[(0,a.jsx)(m.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,a.jsx)(u,{}),(0,a.jsx)(m.OK,{})]})});h.displayName=m.bL.displayName;let u=l.forwardRef((e,t)=>{let{className:s,orientation:l="vertical",...i}=e;return(0,a.jsx)(m.VM,{ref:t,orientation:l,className:(0,x.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...i,children:(0,a.jsx)(m.lr,{className:"relative flex-1 rounded-full bg-slate-200 hover:bg-slate-300"})})});function p(e){let{open:t,onClose:s,title:l,children:n,className:o}=e;return(0,a.jsx)(i.N,{children:t&&(0,a.jsxs)(r.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{type:"spring",damping:25,stiffness:300},className:(0,x.cn)("h-full bg-white/80 backdrop-blur-xl border-l border-slate-200/60 flex flex-col",o),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200/60",children:[l&&(0,a.jsx)("h2",{className:"font-semibold text-slate-900",children:l}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:s,className:"ml-auto",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(h,{className:"flex-1",children:(0,a.jsx)("div",{className:"p-4",children:n})})]})})}u.displayName=m.VM.displayName;var f=s(1396),g=s(2606);let j={px:"1px",0:"0",.5:"2px",1:"4px",1.5:"6px",2:"8px",2.5:"10px",3:"12px",3.5:"14px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",11:"44px",12:"48px",14:"56px",16:"64px",20:"80px",24:"96px",28:"112px",32:"128px"},b={md:"10px",lg:"14px","2xl":"24px"},v={card:"0 1px 3px 0 rgb(0 0 0 / 0.08), 0 1px 2px -1px rgb(0 0 0 / 0.08)",cardHover:"0 4px 12px 0 rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.08)"};j[11],j[4],j[2],b.md,j[4],b.lg,v.card,v.cardHover,j[10],j[3],b.md,j[8],j[10],j[12],j[4],b.lg,b["2xl"];let N={default:15e3},w=[.25,.5,.9];function y(e){let{open:t,onClose:s,title:n,children:o,snapPoints:m=w,defaultSnapPoint:x,showHandle:u=!0,showCloseButton:p=!0,onSnapChange:j}=e,b=(0,l.useRef)(null),v=(0,f.m)(),N=(0,g.s)(),[y,k]=(0,l.useState)(void 0!==x?m.indexOf(x):Math.floor(m.length/2)),[A,C]=(0,l.useState)(window.innerHeight),T=function(){let[e,t]=(0,l.useState)({top:0,bottom:0,left:0,right:0});return(0,l.useEffect)(()=>{if("undefined"==typeof CSS)return;let e=()=>{let e=getComputedStyle(document.documentElement);t({top:parseInt(e.getPropertyValue("--sat")||"0")||0,bottom:parseInt(e.getPropertyValue("--sab")||"0")||0,left:parseInt(e.getPropertyValue("--sal")||"0")||0,right:parseInt(e.getPropertyValue("--sar")||"0")||0})};return document.documentElement.style.setProperty("--sat","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--sab","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--sal","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--sar","env(safe-area-inset-right)"),requestAnimationFrame(e),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}(),S=function(){let[e,t]=(0,l.useState)({isOpen:!1,height:0});return(0,l.useEffect)(()=>{if("visualViewport"in window&&window.visualViewport){let e=window.visualViewport,s=()=>{let s=window.innerHeight-e.height;t({isOpen:s>100,height:Math.max(0,s)})};return e.addEventListener("resize",s),()=>e.removeEventListener("resize",s)}let e=window.innerHeight,s=()=>{let s=window.innerHeight,a=e-s;a>100?t({isOpen:!0,height:a}):a<50&&(t({isOpen:!1,height:0}),e=s)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e}();!function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,l.useEffect)(()=>{if("undefined"==typeof document)return;let t=document.body.style.overflow,s=document.body.style.paddingRight;if(e){let e=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.body.style.paddingRight="".concat(e,"px")}return()=>{document.body.style.overflow=t,document.body.style.paddingRight=s}},[e])}(t),(0,l.useEffect)(()=>{let e=()=>{C(window.innerHeight)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,l.useEffect)(()=>{if(S.isOpen&&t){let e=m.length-1;k(e),N.start({y:F(e)})}},[S.isOpen,t,m.length,N]);let F=(0,l.useCallback)(e=>A*(1-(m[e]||.5)),[m,A]),E=(0,l.useCallback)(e=>{let t=0,s=1/0;return m.forEach((a,l)=>{let i=Math.abs(e-F(l));i<s&&(s=i,t=l)}),t},[m,F]),P=(0,l.useCallback)((e,t)=>{let a=F(y)+t.offset.y,l=t.velocity.y;if(l>500&&0===y){s();return}if(l>300&&y>0){let e=y-1;k(e),N.start({y:F(e)}),null==j||j(m[e]);return}if(l<-300&&y<m.length-1){let e=y+1;k(e),N.start({y:F(e)}),null==j||j(m[e]);return}let i=E(a);if(a>.9*A){s();return}k(i),N.start({y:F(i)}),null==j||j(m[i])},[y,F,E,N,s,m,j,A]);(0,l.useEffect)(()=>{if(t){let e=void 0!==x?m.indexOf(x):Math.floor(m.length/2);k(e>=0?e:Math.floor(m.length/2)),N.start({y:F(e>=0?e:Math.floor(m.length/2))})}},[t,x,m,N,F]);let O=A*(m[y]||.5);return(0,a.jsx)(i.N,{children:t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:s,className:"fixed inset-0 bg-slate-900/40 bottom-sheet-backdrop z-50","aria-hidden":"true"}),(0,a.jsxs)(r.P.div,{ref:b,initial:{y:A},animate:N,exit:{y:A},transition:{type:"spring",damping:30,stiffness:300},drag:"y",dragControls:v,dragConstraints:{top:F(m.length-1),bottom:A},dragElastic:{top:.1,bottom:.3},onDragEnd:P,className:"fixed bottom-0 left-0 right-0 z-50 bg-white rounded-t-3xl shadow-2xl overflow-hidden touch-none",style:{height:A,paddingBottom:T.bottom},role:"dialog","aria-modal":"true","aria-labelledby":n?"bottom-sheet-title":void 0,children:[u&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-3 cursor-grab active:cursor-grabbing touch-none",onPointerDown:e=>v.start(e),children:[(0,a.jsx)("div",{className:"w-12 h-1.5 rounded-full transition-colors",style:{backgroundColor:"#cbd5e1"}}),(0,a.jsx)("span",{className:"sr-only",children:"Drag to resize"})]}),(n||p)&&(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 pb-3 border-b border-slate-200/60",children:[n&&(0,a.jsx)("h2",{id:"bottom-sheet-title",className:"font-semibold text-slate-900 text-lg",children:n}),p&&(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:s,className:"ml-auto h-9 w-9 rounded-full hover:bg-slate-100","aria-label":"Close",children:(0,a.jsx)(d.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"flex justify-center gap-1.5 py-2",children:m.map((e,t)=>(0,a.jsx)("button",{onClick:()=>{k(t),N.start({y:F(t)}),null==j||j(m[t])},className:"w-2 h-2 rounded-full transition-colors ".concat(t===y?"bg-sky-500":"bg-slate-300 hover:bg-slate-400"),"aria-label":"Snap to ".concat(Math.round(100*m[t]),"%")},t))}),(0,a.jsx)(h,{className:"h-full",style:{maxHeight:"calc(".concat(O,"px - ").concat(u?"48px":"0px"," - ").concat(n||p?"56px":"0px"," - 32px - ").concat(T.bottom,"px)")},children:(0,a.jsx)("div",{className:"p-4 pb-8",children:o})})]})]})})}var k=s(4752);let A=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(k.bL,{ref:t,className:(0,x.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...l})});A.displayName=k.bL.displayName;let C=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(k._V,{ref:t,className:(0,x.cn)("aspect-square h-full w-full",s),...l})});C.displayName=k._V.displayName;let T=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(k.H4,{ref:t,className:(0,x.cn)("flex h-full w-full items-center justify-center rounded-full bg-gradient-to-br from-sky-400 to-sky-600 text-white font-medium",s),...l})});T.displayName=k.H4.displayName;var S=s(1466),F=s(4522);function E(e){let{role:t,content:s,timestamp:l,isTyping:i,children:n}=e,o="user"===t;return"system"===t?(0,a.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-center py-2",children:(0,a.jsx)("div",{className:"bg-slate-100 text-slate-600 text-sm px-4 py-2 rounded-full",children:s})}):(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:(0,x.cn)("flex gap-3 py-4",o?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)(A,{className:"h-9 w-9 shrink-0 shadow-md",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{src:"/avatar-user.png"}),(0,a.jsx)(T,{className:"bg-gradient-to-br from-slate-600 to-slate-800",children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{src:"/avatar-assistant.png"}),(0,a.jsx)(T,{className:"bg-gradient-to-br from-sky-400 to-sky-600",children:(0,a.jsx)(F.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)("div",{className:(0,x.cn)("flex flex-col gap-2 max-w-[85%] lg:max-w-[75%]",o?"items-end":"items-start"),children:[(0,a.jsx)("div",{className:(0,x.cn)("rounded-2xl px-4 py-3 shadow-sm",o?"bg-gradient-to-br from-sky-500 to-sky-600 text-white rounded-tr-md":"bg-white/80 backdrop-blur-sm border border-slate-200/60 text-slate-800 rounded-tl-md"),children:i?(0,a.jsxs)("div",{className:"flex gap-1.5 py-1",children:[(0,a.jsx)(r.P.span,{animate:{opacity:[.4,1,.4]},transition:{duration:1,repeat:1/0,delay:0},className:"w-2 h-2 bg-current rounded-full"}),(0,a.jsx)(r.P.span,{animate:{opacity:[.4,1,.4]},transition:{duration:1,repeat:1/0,delay:.2},className:"w-2 h-2 bg-current rounded-full"}),(0,a.jsx)(r.P.span,{animate:{opacity:[.4,1,.4]},transition:{duration:1,repeat:1/0,delay:.4},className:"w-2 h-2 bg-current rounded-full"})]}):(0,a.jsx)("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap",children:s})}),n&&(0,a.jsx)("div",{className:"w-full",children:n}),l&&(0,a.jsx)("span",{className:"text-xs text-slate-400 px-1",children:l.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})]})]})}var P=s(5015),O=s(6164),L=s(8283);function D(e){let{onSend:t,disabled:s,placeholder:n="Type a message...",suggestions:o,onSuggestionClick:d}=e,[m,h]=(0,l.useState)(""),u=(0,l.useRef)(null);(0,l.useEffect)(()=>{u.current&&(u.current.style.height="auto",u.current.style.height="".concat(Math.min(u.current.scrollHeight,150),"px"))},[m]);let p=()=>{m.trim()&&!s&&(t(m.trim()),h(""))};return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(i.N,{children:o&&o.length>0&&(0,a.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex flex-wrap gap-2",children:o.map((e,t)=>(0,a.jsx)(r.P.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},onClick:()=>null==d?void 0:d(e),className:"px-4 py-2 text-sm bg-white/80 backdrop-blur-sm border border-slate-200/60 rounded-full text-slate-700 hover:bg-sky-50 hover:border-sky-200 hover:text-sky-700 transition-all duration-200 shadow-sm",children:e},e))})}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"flex items-end gap-2 p-2 bg-white/80 backdrop-blur-xl border border-slate-200/60 rounded-2xl shadow-lg shadow-slate-900/5",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"icon",className:"h-10 w-10 shrink-0 text-slate-400 hover:text-slate-600",disabled:s,children:(0,a.jsx)(P.A,{className:"h-5 w-5"})}),(0,a.jsx)("textarea",{ref:u,value:m,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},placeholder:n,disabled:s,rows:1,className:(0,x.cn)("flex-1 resize-none bg-transparent text-slate-800 placeholder:text-slate-400 focus:outline-none text-[15px] py-2.5 px-1 max-h-[150px]",s&&"opacity-50 cursor-not-allowed")}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"icon",className:"h-10 w-10 shrink-0 text-slate-400 hover:text-slate-600",disabled:s,children:(0,a.jsx)(O.A,{className:"h-5 w-5"})}),(0,a.jsx)(c.$,{onClick:p,disabled:!m.trim()||s,size:"icon",className:"h-10 w-10 shrink-0",children:(0,a.jsx)(L.A,{className:"h-4 w-4"})})]})]})})]})}function _(e){let{options:t,onSelect:s,disabled:l,variant:i="default"}=e;return(0,a.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex flex-wrap gap-2",children:t.map((e,t)=>(0,a.jsx)(r.P.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},onClick:()=>!l&&s(e),disabled:l,className:(0,x.cn)("transition-all duration-200","default"===i?"px-4 py-2.5 text-sm bg-white/80 backdrop-blur-sm border-2 border-sky-200 rounded-xl text-sky-700 hover:bg-sky-50 hover:border-sky-400 shadow-sm font-medium":"px-3 py-1.5 text-xs bg-slate-100 rounded-full text-slate-600 hover:bg-slate-200",l&&"opacity-50 cursor-not-allowed"),children:e},e))})}var z=s(8867),U=s(3950),I=s(6889),R=s(9286),$=s(5007);let M={united:"from-blue-600 to-blue-700",delta:"from-red-600 to-red-700",american:"from-sky-600 to-sky-700",jetblue:"from-sky-500 to-blue-600",southwest:"from-amber-500 to-orange-600",alaska:"from-teal-600 to-teal-700",default:"from-slate-600 to-slate-700"};function H(e){let{id:t,airline:s,flightNumber:l,departureAirport:i,arrivalAirport:n,departureTime:o,arrivalTime:d,duration:m,stops:h,price:u,calendarFit:p,conflictDetails:f,selected:g,onSelect:j,compact:b}=e,v=M[s.toLowerCase().replace(/\s+/g,"")]||M.default;return(0,a.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.01},transition:{duration:.2},children:(0,a.jsx)($.Zp,{className:(0,x.cn)("overflow-hidden transition-all duration-300 cursor-pointer",g?"ring-2 ring-sky-500 shadow-lg shadow-sky-500/20":"hover:shadow-lg hover:shadow-slate-900/10",b&&"p-3"),onClick:()=>null==j?void 0:j(t),children:(0,a.jsxs)("div",{className:(0,x.cn)("p-4",b&&"p-0"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,x.cn)("w-10 h-10 rounded-xl bg-gradient-to-br flex items-center justify-center shadow-lg",v),children:(0,a.jsx)(F.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-slate-900",children:s}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:l})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,x.$g)(u)}),(0,a.jsxs)(R.E,{variant:"fits"===p?"fits":"conflict"===p?"conflict":"secondary",className:"mt-1",children:["fits"===p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.A,{className:"h-3 w-3 mr-1"}),"Fits calendar"]}),"conflict"===p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-3 w-3 mr-1"}),"Conflict"]}),"unknown"===p&&"Checking..."]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(0,x.fU)(o)}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:i})]}),(0,a.jsx)("div",{className:"flex-1 px-4",children:(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t-2 border-dashed border-slate-200"})}),(0,a.jsxs)("div",{className:"relative flex flex-col items-center bg-white px-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-slate-500",children:[(0,a.jsx)(I.A,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:(0,x.a3)(m)})]}),h>0?(0,a.jsxs)("span",{className:"text-xs text-slate-400 mt-0.5",children:[h," stop",h>1?"s":""]}):(0,a.jsx)("span",{className:"text-xs text-emerald-600 font-medium mt-0.5",children:"Nonstop"})]}),(0,a.jsx)(F.A,{className:"absolute right-0 h-4 w-4 text-sky-500 transform translate-x-1"})]})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(0,x.fU)(d)}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:n})]})]}),"conflict"===p&&f&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-orange-50 rounded-xl border border-orange-200",children:(0,a.jsx)("p",{className:"text-sm text-orange-800",children:f})}),j&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-100",children:(0,a.jsx)(c.$,{onClick:e=>{e.stopPropagation(),j(t)},variant:g?"default":"outline",className:"w-full",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"Selected"]}):"Select this flight"})})]})})})}var W=s(6967),V=s(2423),B=s(3580),q=s(9282);function Y(e){let{origin:t,destination:s,outbound:l,returnFlight:i,totalPrice:n,calendarEvents:o,onConfirm:m,onEdit:h,onCancel:u,isLoading:p,showCalendarPreview:f=!0}=e;return(0,a.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,a.jsxs)($.Zp,{className:"overflow-hidden border-2 border-sky-200/60 bg-gradient-to-b from-white to-sky-50/30",children:[(0,a.jsx)($.aR,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center shadow-lg shadow-sky-500/30",children:(0,a.jsx)(F.A,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)($.ZB,{className:"text-lg",children:["Trip to ",s]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:[t," → ",s,i&&" → ".concat(t)]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(0,x.$g)(n)}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Total"})]})]})}),(0,a.jsxs)($.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-white rounded-xl border border-slate-200/60 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-3",children:[(0,a.jsx)(F.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Outbound"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:(0,x.Yq)(l.date)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,x.fU)(l.departureTime)}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:l.departureAirport})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,a.jsx)("div",{className:"w-8 h-px bg-slate-300"}),(0,a.jsx)(W.A,{className:"h-4 w-4"}),(0,a.jsx)("div",{className:"w-8 h-px bg-slate-300"})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:l.duration})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,x.fU)(l.arrivalTime)}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:l.arrivalAirport})]})]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500 mt-2",children:[l.airline," ",l.flightNumber]})]}),i&&(0,a.jsxs)("div",{className:"p-4 bg-white rounded-xl border border-slate-200/60 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-3",children:[(0,a.jsx)(F.A,{className:"h-4 w-4 rotate-180"}),(0,a.jsx)("span",{className:"font-medium",children:"Return"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:(0,x.Yq)(i.date)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,x.fU)(i.departureTime)}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:i.departureAirport})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,a.jsx)("div",{className:"w-8 h-px bg-slate-300"}),(0,a.jsx)(W.A,{className:"h-4 w-4"}),(0,a.jsx)("div",{className:"w-8 h-px bg-slate-300"})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:i.duration})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,x.fU)(i.arrivalTime)}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:i.arrivalAirport})]})]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500 mt-2",children:[i.airline," ",i.flightNumber]})]}),f&&o.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.w,{}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 mb-3",children:[(0,a.jsx)(V.A,{className:"h-4 w-4 text-sky-500"}),"What I'll add to your calendar"]}),(0,a.jsx)("div",{className:"space-y-2",children:o.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-sky-50 rounded-lg border border-sky-100",children:[(0,a.jsx)("div",{className:"w-1 h-8 bg-sky-500 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-slate-900",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:[(0,x.Yq)(e.start)," • ",(0,x.fU)(e.start)," -"," ",(0,x.fU)(e.end)]})]})]},t))})]})]}),(m||h||u)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.w,{}),(0,a.jsxs)("div",{className:"flex gap-3",children:[u&&(0,a.jsxs)(c.$,{variant:"ghost",onClick:u,disabled:p,className:"flex-1",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Cancel"]}),h&&(0,a.jsxs)(c.$,{variant:"outline",onClick:h,disabled:p,className:"flex-1",children:[(0,a.jsx)(B.A,{className:"h-4 w-4 mr-2"}),"Edit"]}),m&&(0,a.jsx)(c.$,{onClick:m,disabled:p,className:"flex-1",children:p?(0,a.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"Confirm Booking"]})})]})]})]})]})})}var K=s(6462),Z=s(7223);let J=l.forwardRef((e,t)=>{let{className:s,type:l,...i}=e;return(0,a.jsx)("input",{type:l,className:(0,x.cn)("flex h-11 w-full rounded-xl border-2 border-slate-200 bg-white/80 backdrop-blur-sm px-4 py-2 text-base text-slate-900 shadow-sm transition-all duration-200","placeholder:text-slate-400","focus:outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500","hover:border-slate-300","disabled:cursor-not-allowed disabled:opacity-50","file:border-0 file:bg-transparent file:text-sm file:font-medium",s),ref:t,...i})});function G(e){let{level:t}=e;return(0,a.jsxs)(R.E,{variant:"high"===t?"fits":"medium"===t?"warning":"conflict",className:"text-xs",children:["high"===t&&(0,a.jsx)(z.A,{className:"h-2.5 w-2.5 mr-1"}),"low"===t&&(0,a.jsx)(U.A,{className:"h-2.5 w-2.5 mr-1"}),"high"===t?"✓":"low"===t?"Check this":"Verify"]})}function X(e){let{label:t,value:s,confidence:l,isEditing:i,onChange:r,icon:n}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[n,(0,a.jsx)("span",{className:"text-sm",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[i?(0,a.jsx)(J,{value:s,onChange:e=>r(e.target.value),className:"h-8 w-32 text-right"}):(0,a.jsx)("span",{className:"font-medium text-slate-900",children:s}),(0,a.jsx)(G,{level:l})]})]})}function Q(e){let{source:t,data:s,confidence:i,onAddToCalendar:n,onDismiss:o}=e,[m,x]=(0,l.useState)(!1),[h,u]=(0,l.useState)(s),p=(e,t)=>{u(s=>({...s,[e]:t}))},f=Object.values(i).some(e=>"low"===e);return(0,a.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,a.jsxs)($.Zp,{className:"overflow-hidden border-2 border-amber-200/60 bg-gradient-to-b from-white to-amber-50/30",children:[(0,a.jsx)($.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-amber-500 flex items-center justify-center shadow-lg shadow-amber-500/30",children:(0,a.jsx)(K.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)($.ZB,{className:"text-base",children:"Found in your email"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:t})]})]}),f&&(0,a.jsxs)(R.E,{variant:"warning",className:"text-xs",children:[(0,a.jsx)(U.A,{className:"h-3 w-3 mr-1"}),"Review needed"]})]})}),(0,a.jsxs)($.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"divide-y divide-slate-100",children:[(0,a.jsx)(X,{label:"Airline",value:h.airline,confidence:i.airline,isEditing:m,onChange:e=>p("airline",e),icon:(0,a.jsx)(F.A,{className:"h-4 w-4"})}),(0,a.jsx)(X,{label:"Flight",value:h.flightNumber,confidence:i.flightNumber,isEditing:m,onChange:e=>p("flightNumber",e),icon:(0,a.jsx)("span",{className:"text-xs font-mono",children:"#"})}),(0,a.jsx)(X,{label:"Date",value:h.date,confidence:i.date,isEditing:m,onChange:e=>p("date",e),icon:(0,a.jsx)(V.A,{className:"h-4 w-4"})}),(0,a.jsx)(X,{label:"Departure",value:h.departureTime,confidence:i.departureTime,isEditing:m,onChange:e=>p("departureTime",e),icon:(0,a.jsx)(I.A,{className:"h-4 w-4"})}),(0,a.jsx)(X,{label:"Route",value:"".concat(h.departureAirport," → ").concat(h.arrivalAirport),confidence:i.airports,isEditing:m,onChange:e=>{let[t,s]=e.split("→").map(e=>e.trim());p("departureAirport",t||h.departureAirport),p("arrivalAirport",s||h.arrivalAirport)},icon:(0,a.jsx)(Z.A,{className:"h-4 w-4"})})]}),f&&!m&&(0,a.jsx)("p",{className:"text-sm text-amber-700 bg-amber-50 p-3 rounded-lg",children:"I'm not 100% certain about some details. Please verify before adding to your calendar."}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[o&&(0,a.jsxs)(c.$,{variant:"ghost",onClick:o,className:"flex-1",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Dismiss"]}),(0,a.jsxs)(c.$,{variant:"outline",onClick:()=>x(!m),className:"flex-1",children:[(0,a.jsx)(B.A,{className:"h-4 w-4 mr-2"}),m?"Done editing":"Edit"]}),n&&(0,a.jsxs)(c.$,{onClick:()=>n(h),className:"flex-1",disabled:m,children:[(0,a.jsx)(V.A,{className:"h-4 w-4 mr-2"}),"Add to Calendar"]})]})]})]})})}J.displayName="Input";var ee=s(853),et=s(9053),es=s(2598);function ea(e){let{flightArrivalTime:t,flightDepartureTime:s,conflictingEvent:l,onFindAlternatives:i,onBookAnyway:n,onShowDetails:o,isLoadingAlternatives:d}=e;return(0,a.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,a.jsxs)($.Zp,{className:"overflow-hidden border-2 border-orange-200/60 bg-gradient-to-b from-white to-orange-50/30",children:[(0,a.jsx)($.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-400 to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/30",children:(0,a.jsx)(U.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)($.ZB,{className:"text-base text-orange-800",children:"Schedule Conflict Detected"}),(0,a.jsx)("p",{className:"text-sm text-orange-600",children:"This flight overlaps with an existing event"})]})]})}),(0,a.jsxs)($.Wu,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"relative bg-white rounded-xl p-4 border border-orange-200",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-sky-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-slate-900",children:["Flight ",s?"departs":"arrives"]}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:(0,x.fU)(s||t)})]})]}),(0,a.jsx)("div",{className:"ml-1 w-0.5 h-6 bg-gradient-to-b from-sky-500 via-orange-500 to-red-500"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-orange-800",children:l.title}),(0,a.jsxs)("p",{className:"text-xs text-orange-600",children:[(0,x.fU)(l.start)," -"," ",(0,x.fU)(l.end)]})]}),(0,a.jsx)(V.A,{className:"h-4 w-4 text-orange-400"})]})]})}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:s?(0,a.jsxs)(a.Fragment,{children:["Your flight departs at ",(0,x.fU)(s),', but you have "',l.title,'" scheduled from'," ",(0,x.fU)(l.start)," to"," ",(0,x.fU)(l.end),"."]}):(0,a.jsxs)(a.Fragment,{children:["Your flight lands at ",(0,x.fU)(t),', which overlaps with "',l.title,'" (',(0,x.fU)(l.start)," -"," ",(0,x.fU)(l.end),")."]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"What would you like to do?"}),(0,a.jsxs)("div",{className:"grid gap-2",children:[i&&(0,a.jsxs)(c.$,{variant:"default",onClick:i,disabled:d,className:"w-full justify-start",children:[d?(0,a.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}):(0,a.jsx)(ee.A,{className:"h-4 w-4 mr-2"}),"Find alternative flights"]}),n&&(0,a.jsxs)(c.$,{variant:"outline",onClick:n,className:"w-full justify-start",children:[(0,a.jsx)(et.A,{className:"h-4 w-4 mr-2"}),"Book anyway, skip calendar"]}),o&&(0,a.jsxs)(c.$,{variant:"ghost",onClick:o,className:"w-full justify-start",children:[(0,a.jsx)(es.A,{className:"h-4 w-4 mr-2"}),"Show conflict details"]})]})]})]})]})})}var el=s(5686),ei=s(8324),er=s(2263);l.forwardRef((e,t)=>{let{className:s,value:l,...i}=e;return(0,a.jsx)(er.bL,{ref:t,className:(0,x.cn)("relative h-2 w-full overflow-hidden rounded-full bg-slate-100",s),...i,children:(0,a.jsx)(er.C1,{className:"h-full w-full flex-1 bg-gradient-to-r from-sky-500 to-sky-600 transition-all duration-500 ease-out",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})}).displayName=er.bL.displayName;let en={calendar_add:V.A,booking_confirm:F.A,email_import:K.A,trip_delete:el.A,preference_change:z.A},eo={calendar_add:{bg:"bg-emerald-500/20",icon:"text-emerald-400"},booking_confirm:{bg:"bg-sky-500/20",icon:"text-sky-400"},email_import:{bg:"bg-purple-500/20",icon:"text-purple-400"},trip_delete:{bg:"bg-red-500/20",icon:"text-red-400"},preference_change:{bg:"bg-slate-500/20",icon:"text-slate-400"}};function ed(e){let{message:t,description:s,duration:n=N.default,onUndo:o,onDismiss:m,show:x,actionType:h="calendar_add"}=e,[u,p]=(0,l.useState)(100),[f,g]=(0,l.useState)(!1),[j,b]=(0,l.useState)(!1),v=(0,l.useRef)(100),w=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(!x){p(100);return}if(j){w.current&&(clearInterval(w.current),w.current=null);return}return w.current=setInterval(()=>{p(e=>{let t=e-100/(n/100);return t<=0?(w.current&&(clearInterval(w.current),w.current=null),m(),0):t})},100),()=>{w.current&&(clearInterval(w.current),w.current=null)}},[x,n,m,j]);let y=(0,l.useCallback)(()=>{v.current=u,b(!0)},[u]),k=(0,l.useCallback)(()=>{p(Math.min(100,v.current+3e3/n*100)),b(!1)},[n]),A=async()=>{g(!0);try{await o()}finally{g(!1)}},C=en[h]||z.A,T=eo[h]||eo.calendar_add,S=Math.ceil(u/100*(n/1e3));return(0,a.jsx)(i.N,{children:x&&(0,a.jsx)(r.P.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-md px-4",onMouseEnter:y,onMouseLeave:k,role:"alert","aria-live":"polite",children:(0,a.jsxs)("div",{className:"bg-slate-900/95 backdrop-blur-xl text-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl ".concat(T.bg," flex items-center justify-center flex-shrink-0"),children:(0,a.jsx)(C,{className:"h-5 w-5 ".concat(T.icon)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:t}),s&&(0,a.jsx)("p",{className:"text-xs text-slate-400 truncate",children:s}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:j?(0,a.jsx)("span",{className:"text-amber-400",children:"Paused - hover to extend"}):(0,a.jsxs)("span",{children:[S,"s to undo"]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:A,disabled:f,className:"text-white hover:bg-white/10 touch-target","aria-label":"Undo action",children:f?(0,a.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ei.A,{className:"h-4 w-4 mr-1"}),"Undo"]})}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:m,className:"h-8 w-8 text-slate-400 hover:text-white hover:bg-white/10","aria-label":"Dismiss",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"relative h-1 bg-slate-700",children:(0,a.jsx)(r.P.div,{className:"absolute inset-y-0 left-0 ".concat(j?"bg-amber-500":"bg-sky-500"),initial:{width:"100%"},animate:{width:"".concat(u,"%")},transition:{duration:.1}})})]})})})}var ec=s(241);let em=[{id:"1",airline:"United",flightNumber:"UA 442",departureAirport:"JFK",arrivalAirport:"SFO",departureTime:"2025-01-21T11:30:00",arrivalTime:"2025-01-21T14:45:00",duration:375,stops:0,price:28900,calendarFit:"fits"},{id:"2",airline:"American",flightNumber:"AA 178",departureAirport:"JFK",arrivalAirport:"SFO",departureTime:"2025-01-21T14:15:00",arrivalTime:"2025-01-21T17:30:00",duration:375,stops:0,price:25400,calendarFit:"fits"},{id:"3",airline:"Delta",flightNumber:"DL 891",departureTime:"2025-01-21T07:00:00",arrivalTime:"2025-01-21T10:15:00",departureAirport:"JFK",arrivalAirport:"SFO",duration:375,stops:0,price:21900,calendarFit:"conflict",conflictDetails:"Overlaps with 'Team Standup' (9:00 AM - 9:30 AM)"}];function ex(){let{messages:e,isTyping:t,conversationState:s,setConversationState:d,addMessage:m,simulateTyping:u,resetConversation:f,setIsTyping:g}=function(){let[e,t]=(0,l.useState)([]),[s,a]=(0,l.useState)(!1),[i,r]=(0,l.useState)({step:"idle"}),n=(0,l.useCallback)((e,s,a)=>{let l={id:(0,x.$C)(),role:e,content:s,timestamp:new Date,metadata:a};return t(e=>[...e,l]),l},[]),o=(0,l.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500;a(!0),await new Promise(e=>setTimeout(e,t)),a(!1),e()},[]),d=(0,l.useCallback)(()=>{t([]),r({step:"idle"}),a(!1)},[]);return{messages:e,isTyping:s,conversationState:i,setConversationState:r,addMessage:n,simulateTyping:o,resetConversation:d,setIsTyping:a}}(),{toast:j}=(0,ec.dj)(),b=(0,l.useRef)(null),[v,N]=(0,l.useState)(!1),[w,k]=(0,l.useState)(null),[A,C]=(0,l.useState)(!1),[T,S]=(0,l.useState)(null),[F,P]=(0,l.useState)(!1),[O,L]=(0,l.useState)(""),[z,U]=(0,l.useState)(null),[I,R]=(0,l.useState)(!1),[$,M]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=()=>R(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,l.useEffect)(()=>{b.current&&(b.current.scrollTop=b.current.scrollHeight)},[e,t]),(0,l.useEffect)(()=>{0===e.length&&m("assistant","Hi! I'm your travel assistant. I can help you find and book flights that fit your schedule. What's your next trip?")},[e.length,m]);let W=(0,l.useCallback)(e=>{I?(S(e),C(!0)):(k(e),N(!0))},[I]),V=(0,l.useCallback)(()=>{N(!1),C(!1)},[]),B=(0,l.useCallback)(()=>{let e=s.selectedFlight;e&&(d({...s,step:"booking"}),u(()=>{m("assistant","You're booked! ✈️ ".concat(e.airline," ").concat(e.flightNumber," to SFO.\n\nI've added your flight to your calendar. Confirmation email is on its way."),{type:"success"}),d({...s,step:"complete"}),V(),L("Added to calendar"),P(!0)},2e3))},[s,d,u,m,V]),q=(0,l.useCallback)(e=>{W((0,a.jsx)(Y,{origin:"New York",destination:"San Francisco",outbound:{date:e.departureTime,departureTime:e.departureTime,arrivalTime:e.arrivalTime,departureAirport:e.departureAirport,arrivalAirport:e.arrivalAirport,airline:e.airline,flightNumber:e.flightNumber,duration:"6h 15m"},returnFlight:{date:"2025-01-23T17:15:00",departureTime:"2025-01-23T17:15:00",arrivalTime:"2025-01-24T01:30:00",departureAirport:"SFO",arrivalAirport:"JFK",airline:e.airline,flightNumber:e.flightNumber.replace(/\d+/,e=>String(parseInt(e)+1)),duration:"5h 15m"},totalPrice:2*e.price,calendarEvents:[{title:"Flight to San Francisco",start:e.departureTime,end:e.arrivalTime},{title:"Flight home",start:"2025-01-23T17:15:00",end:"2025-01-24T01:30:00"}],onConfirm:B,onEdit:()=>{V(),m("assistant","What would you like to change?")},onCancel:()=>{V(),d({...s,step:"showing_options"})},isLoading:"booking"===s.step}))},[W,B,V,m,s,d]),K=(0,l.useCallback)(e=>{let t=em.find(t=>t.id===e);t&&(U(e),"conflict"===t.calendarFit?(d({...s,step:"conflict_detected",selectedFlight:t,conflict:{eventTitle:"Team Standup",eventStart:"2025-01-21T09:00:00",eventEnd:"2025-01-21T09:30:00"}}),m("assistant","Heads up: This flight has a schedule conflict. Let me show you the details."),W((0,a.jsx)(ea,{flightArrivalTime:t.arrivalTime,flightDepartureTime:t.departureTime,conflictingEvent:{id:"1",title:"Team Standup",start:"2025-01-21T09:00:00",end:"2025-01-21T09:30:00"},onFindAlternatives:()=>{V(),m("user","Find alternative flights"),u(()=>{m("assistant","Here are flights that avoid your conflict:"),d({...s,step:"showing_options",flightOptions:em.filter(e=>"fits"===e.calendarFit)})})},onBookAnyway:()=>{V(),m("user","Book anyway, skip calendar"),u(()=>{m("assistant","Understood. I'll book this flight but won't add it to your calendar—you might want to reschedule your meeting first."),d({...s,step:"confirming",selectedFlight:t}),q(t)})},onShowDetails:()=>{j({title:"Team Standup",description:"Daily sync meeting • 9:00 AM - 9:30 AM"})}}))):(d({...s,step:"confirming",selectedFlight:t}),m("assistant","Great choice! Here's your trip summary:"),q(t)))},[s,d,m,W,V,u,q,j]),Z=(0,l.useCallback)(()=>{M(!0),m("assistant","I found a flight confirmation in your email. Here's what I extracted:"),W((0,a.jsx)(Q,{source:"Email from Delta Airlines",data:{airline:"Delta",flightNumber:"DL 1247",date:"April 5, 2025",departureTime:"8:00 AM",departureAirport:"JFK",arrivalAirport:"LAX"},confidence:{airline:"high",flightNumber:"high",date:"high",departureTime:"low",airports:"high"},onAddToCalendar:e=>{V(),m("user","Add to Calendar"),u(()=>{m("assistant","Done! Your ".concat(e.airline," flight to ").concat(e.arrivalAirport," is now on your calendar.")),L("Added to calendar"),P(!0)})},onDismiss:()=>{V(),m("assistant","No problem, I'll ignore that email.")}}))},[m,W,V,u]),J=(0,l.useCallback)(e=>{m("user",e);let t=e.toLowerCase();t.includes("san francisco")||t.includes("sfo")||t.includes("fly")||t.includes("flight")||t.includes("book")?u(()=>{m("assistant","Got it—San Francisco! A few quick questions:\n\n• Do you prefer SFO or Oakland?\n• What time works best for departure?"),d({...s,step:"clarifying",searchParams:{destination:"San Francisco"}})}):t.includes("sfo")||t.includes("morning")||t.includes("afternoon")||"clarifying"===s.step?u(()=>{m("assistant","Let me check your calendar... You have a 9am meeting on Tuesday. I'll look for flights after that.\n\nSearching for flights now..."),setTimeout(()=>{g(!0),setTimeout(()=>{g(!1),m("assistant","Here are 3 options that fit your schedule:"),d({...s,step:"showing_options",flightOptions:em})},1500)},1e3)}):t.includes("import")||t.includes("email")?Z():t.includes("chicago")||t.includes("boston")?u(()=>{m("assistant","Got it—".concat(t.includes("chicago")?"Chicago":"Boston","! When do you need to travel?")),d({...s,step:"clarifying"})}):u(()=>{m("assistant","I can help you with:\n\n• Finding and booking flights\n• Importing trips from your email\n• Checking your calendar for conflicts\n\nJust tell me where you want to go!")})},[m,s,d,u,g,Z]),G=(0,l.useCallback)(e=>{J(e)},[J]),X=(0,l.useCallback)(async()=>{P(!1),j({title:"Undone",description:"Calendar events removed. Booking cancelled.",variant:"default"}),d({...s,step:"showing_options"})},[j,s,d]),ee=(0,l.useCallback)(()=>"idle"===s.step&&e.length<=1?["Book a flight","Import from email","Show my trips"]:"clarifying"===s.step?["SFO, morning","Oakland, afternoon","Flexible"]:[],[s.step,e.length]);return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)(o.j,{}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,a.jsx)(h,{className:"flex-1 p-4",ref:b,children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto space-y-1",children:(0,a.jsxs)(i.N,{mode:"popLayout",children:[e.map(e=>(0,a.jsxs)(E,{role:e.role,content:e.content,timestamp:e.timestamp,children:[e.content.includes("options that fit")&&"showing_options"===s.step&&(0,a.jsx)("div",{className:"mt-4 space-y-3",children:(s.flightOptions||em).map(e=>(0,a.jsx)(H,{...e,selected:z===e.id,onSelect:K},e.id))}),"assistant"===e.role&&e.content.includes("quick questions")&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(_,{options:["SFO, morning","Oakland, afternoon","Flexible"],onSelect:G})})]},e.id)),t&&(0,a.jsx)(E,{role:"assistant",content:"",isTyping:!0})]})})}),(0,a.jsx)("div",{className:"border-t border-slate-200/60 bg-white/50 backdrop-blur-sm p-4",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,a.jsx)(D,{onSend:J,disabled:t||"booking"===s.step,placeholder:"Where do you want to fly?",suggestions:ee(),onSuggestionClick:G})})})]}),(0,a.jsx)("div",{className:"hidden md:block w-[400px] shrink-0",children:(0,a.jsx)(p,{open:v,onClose:V,title:"Trip Details",children:w})})]}),(0,a.jsx)(y,{open:A,onClose:V,title:"Trip Details",children:T}),(0,a.jsx)(ed,{show:F,message:O,onUndo:X,onDismiss:()=>P(!1)}),(0,a.jsx)(r.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"fixed bottom-24 right-4 md:bottom-8",children:(0,a.jsx)(c.$,{variant:"outline",size:"icon",onClick:f,className:"rounded-full shadow-lg bg-white/80 backdrop-blur-sm",children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[86,587,173,426,826,411,441,517,358],()=>t(5794)),_N_E=e.O()}]);