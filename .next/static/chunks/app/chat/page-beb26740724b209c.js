(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{5794:(e,t,s)=>{Promise.resolve().then(s.bind(s,683))},683:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eb});var a=s(5155),i=s(2115),r=s(5683),l=s(9308),n=s(1556),o=s(2428),d=s(767),c=s(4085),m=s(1511),x=s(9602);let h=i.forwardRef((e,t)=>{let{className:s,children:i,...r}=e;return(0,a.jsxs)(m.bL,{ref:t,className:(0,x.cn)("relative overflow-hidden",s),...r,children:[(0,a.jsx)(m.LM,{className:"h-full w-full rounded-[inherit]",children:i}),(0,a.jsx)(u,{}),(0,a.jsx)(m.OK,{})]})});h.displayName=m.bL.displayName;let u=i.forwardRef((e,t)=>{let{className:s,orientation:i="vertical",...r}=e;return(0,a.jsx)(m.VM,{ref:t,orientation:i,className:(0,x.cn)("flex touch-none select-none transition-colors","vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:(0,a.jsx)(m.lr,{className:"relative flex-1 rounded-full bg-slate-200 hover:bg-slate-300"})})});function p(e){let{open:t,onClose:s,title:i,children:n,className:o}=e;return(0,a.jsx)(r.N,{children:t&&(0,a.jsxs)(l.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{type:"spring",damping:25,stiffness:300},className:(0,x.cn)("h-full bg-white/80 backdrop-blur-xl border-l border-slate-200/60 flex flex-col",o),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200/60",children:[i&&(0,a.jsx)("h2",{className:"font-semibold text-slate-900",children:i}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:s,className:"ml-auto",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(h,{className:"flex-1",children:(0,a.jsx)("div",{className:"p-4",children:n})})]})})}u.displayName=m.VM.displayName;var f=s(1396),g=s(2606);let b={px:"1px",0:"0",.5:"2px",1:"4px",1.5:"6px",2:"8px",2.5:"10px",3:"12px",3.5:"14px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",11:"44px",12:"48px",14:"56px",16:"64px",20:"80px",24:"96px",28:"112px",32:"128px"},j={md:"10px",lg:"14px","2xl":"24px"},y={card:"0 1px 3px 0 rgb(0 0 0 / 0.08), 0 1px 2px -1px rgb(0 0 0 / 0.08)",cardHover:"0 4px 12px 0 rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.08)"};b[11],b[4],b[2],j.md,b[4],j.lg,y.card,y.cardHover,b[10],b[3],j.md,b[8],b[10],b[12],b[4],j.lg,j["2xl"];let w={default:15e3},v=[.25,.5,.9];function N(e){let{open:t,onClose:s,title:n,children:o,snapPoints:m=v,defaultSnapPoint:x,showHandle:u=!0,showCloseButton:p=!0,onSnapChange:b}=e,j=(0,i.useRef)(null),y=(0,f.m)(),w=(0,g.s)(),[N,k]=(0,i.useState)(void 0!==x?m.indexOf(x):Math.floor(m.length/2)),[A,C]=(0,i.useState)(window.innerHeight),T=function(){let[e,t]=(0,i.useState)({top:0,bottom:0,left:0,right:0});return(0,i.useEffect)(()=>{if("undefined"==typeof CSS)return;let e=()=>{let e=getComputedStyle(document.documentElement);t({top:parseInt(e.getPropertyValue("--sat")||"0")||0,bottom:parseInt(e.getPropertyValue("--sab")||"0")||0,left:parseInt(e.getPropertyValue("--sal")||"0")||0,right:parseInt(e.getPropertyValue("--sar")||"0")||0})};return document.documentElement.style.setProperty("--sat","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--sab","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--sal","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--sar","env(safe-area-inset-right)"),requestAnimationFrame(e),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}(),S=function(){let[e,t]=(0,i.useState)({isOpen:!1,height:0});return(0,i.useEffect)(()=>{if("visualViewport"in window&&window.visualViewport){let e=window.visualViewport,s=()=>{let s=window.innerHeight-e.height;t({isOpen:s>100,height:Math.max(0,s)})};return e.addEventListener("resize",s),()=>e.removeEventListener("resize",s)}let e=window.innerHeight,s=()=>{let s=window.innerHeight,a=e-s;a>100?t({isOpen:!0,height:a}):a<50&&(t({isOpen:!1,height:0}),e=s)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e}();!function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,i.useEffect)(()=>{if("undefined"==typeof document)return;let t=document.body.style.overflow,s=document.body.style.paddingRight;if(e){let e=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.body.style.paddingRight="".concat(e,"px")}return()=>{document.body.style.overflow=t,document.body.style.paddingRight=s}},[e])}(t),(0,i.useEffect)(()=>{let e=()=>{C(window.innerHeight)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{if(S.isOpen&&t){let e=m.length-1;k(e),w.start({y:F(e)})}},[S.isOpen,t,m.length,w]);let F=(0,i.useCallback)(e=>A*(1-(m[e]||.5)),[m,A]),E=(0,i.useCallback)(e=>{let t=0,s=1/0;return m.forEach((a,i)=>{let r=Math.abs(e-F(i));r<s&&(s=r,t=i)}),t},[m,F]),O=(0,i.useCallback)((e,t)=>{let a=F(N)+t.offset.y,i=t.velocity.y;if(i>500&&0===N){s();return}if(i>300&&N>0){let e=N-1;k(e),w.start({y:F(e)}),null==b||b(m[e]);return}if(i<-300&&N<m.length-1){let e=N+1;k(e),w.start({y:F(e)}),null==b||b(m[e]);return}let r=E(a);if(a>.9*A){s();return}k(r),w.start({y:F(r)}),null==b||b(m[r])},[N,F,E,w,s,m,b,A]);(0,i.useEffect)(()=>{if(t){let e=void 0!==x?m.indexOf(x):Math.floor(m.length/2);k(e>=0?e:Math.floor(m.length/2)),w.start({y:F(e>=0?e:Math.floor(m.length/2))})}},[t,x,m,w,F]);let I=A*(m[N]||.5);return(0,a.jsx)(r.N,{children:t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:s,className:"fixed inset-0 bg-slate-900/40 bottom-sheet-backdrop z-50","aria-hidden":"true"}),(0,a.jsxs)(l.P.div,{ref:j,initial:{y:A},animate:w,exit:{y:A},transition:{type:"spring",damping:30,stiffness:300},drag:"y",dragControls:y,dragConstraints:{top:F(m.length-1),bottom:A},dragElastic:{top:.1,bottom:.3},onDragEnd:O,className:"fixed bottom-0 left-0 right-0 z-50 bg-white rounded-t-3xl shadow-2xl overflow-hidden touch-none",style:{height:A,paddingBottom:T.bottom},role:"dialog","aria-modal":"true","aria-labelledby":n?"bottom-sheet-title":void 0,children:[u&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-3 cursor-grab active:cursor-grabbing touch-none",onPointerDown:e=>y.start(e),children:[(0,a.jsx)("div",{className:"w-12 h-1.5 rounded-full transition-colors",style:{backgroundColor:"#cbd5e1"}}),(0,a.jsx)("span",{className:"sr-only",children:"Drag to resize"})]}),(n||p)&&(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 pb-3 border-b border-slate-200/60",children:[n&&(0,a.jsx)("h2",{id:"bottom-sheet-title",className:"font-semibold text-slate-900 text-lg",children:n}),p&&(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:s,className:"ml-auto h-9 w-9 rounded-full hover:bg-slate-100","aria-label":"Close",children:(0,a.jsx)(d.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"flex justify-center gap-1.5 py-2",children:m.map((e,t)=>(0,a.jsx)("button",{onClick:()=>{k(t),w.start({y:F(t)}),null==b||b(m[t])},className:"w-2 h-2 rounded-full transition-colors ".concat(t===N?"bg-sky-500":"bg-slate-300 hover:bg-slate-400"),"aria-label":"Snap to ".concat(Math.round(100*m[t]),"%")},t))}),(0,a.jsx)(h,{className:"h-full",style:{maxHeight:"calc(".concat(I,"px - ").concat(u?"48px":"0px"," - ").concat(n||p?"56px":"0px"," - 32px - ").concat(T.bottom,"px)")},children:(0,a.jsx)("div",{className:"p-4 pb-8",children:o})})]})]})})}var k=s(4752);let A=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(k.bL,{ref:t,className:(0,x.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...i})});A.displayName=k.bL.displayName;let C=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(k._V,{ref:t,className:(0,x.cn)("aspect-square h-full w-full",s),...i})});C.displayName=k._V.displayName;let T=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(k.H4,{ref:t,className:(0,x.cn)("flex h-full w-full items-center justify-center rounded-full bg-gradient-to-br from-sky-400 to-sky-600 text-white font-medium",s),...i})});T.displayName=k.H4.displayName;var S=s(1466),F=s(4522);function E(e){let{role:t,content:s,timestamp:i,isTyping:r,children:n}=e,o="user"===t;return"system"===t?(0,a.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-center py-2",children:(0,a.jsx)("div",{className:"bg-slate-100 text-slate-600 text-sm px-4 py-2 rounded-full",children:s})}):(0,a.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:(0,x.cn)("flex gap-3 py-4",o?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)(A,{className:"h-9 w-9 shrink-0 shadow-md",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{src:"/avatar-user.png"}),(0,a.jsx)(T,{className:"bg-gradient-to-br from-slate-600 to-slate-800",children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{src:"/avatar-assistant.png"}),(0,a.jsx)(T,{className:"bg-gradient-to-br from-sky-400 to-sky-600",children:(0,a.jsx)(F.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)("div",{className:(0,x.cn)("flex flex-col gap-2 max-w-[85%] lg:max-w-[75%]",o?"items-end":"items-start"),children:[(0,a.jsx)("div",{className:(0,x.cn)("rounded-2xl px-4 py-3 shadow-sm",o?"bg-gradient-to-br from-sky-500 to-sky-600 text-white rounded-tr-md":"bg-white/80 backdrop-blur-sm border border-slate-200/60 text-slate-800 rounded-tl-md"),children:r?(0,a.jsxs)("div",{className:"flex gap-1.5 py-1",children:[(0,a.jsx)(l.P.span,{animate:{opacity:[.4,1,.4]},transition:{duration:1,repeat:1/0,delay:0},className:"w-2 h-2 bg-current rounded-full"}),(0,a.jsx)(l.P.span,{animate:{opacity:[.4,1,.4]},transition:{duration:1,repeat:1/0,delay:.2},className:"w-2 h-2 bg-current rounded-full"}),(0,a.jsx)(l.P.span,{animate:{opacity:[.4,1,.4]},transition:{duration:1,repeat:1/0,delay:.4},className:"w-2 h-2 bg-current rounded-full"})]}):(0,a.jsx)("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap",children:s})}),n&&(0,a.jsx)("div",{className:"w-full",children:n}),i&&(0,a.jsx)("span",{className:"text-xs text-slate-400 px-1",children:i.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})]})]})}var O=s(5015),I=s(6164),P=s(8283);function L(e){let{onSend:t,disabled:s,placeholder:n="Type a message...",suggestions:o,onSuggestionClick:d}=e,[m,h]=(0,i.useState)(""),u=(0,i.useRef)(null);(0,i.useEffect)(()=>{u.current&&(u.current.style.height="auto",u.current.style.height="".concat(Math.min(u.current.scrollHeight,150),"px"))},[m]);let p=()=>{m.trim()&&!s&&(t(m.trim()),h(""))};return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(r.N,{children:o&&o.length>0&&(0,a.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex flex-wrap gap-2",children:o.map((e,t)=>(0,a.jsx)(l.P.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},onClick:()=>null==d?void 0:d(e),className:"px-4 py-2 text-sm bg-white/80 backdrop-blur-sm border border-slate-200/60 rounded-full text-slate-700 hover:bg-sky-50 hover:border-sky-200 hover:text-sky-700 transition-all duration-200 shadow-sm",children:e},e))})}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"flex items-end gap-2 p-2 bg-white/80 backdrop-blur-xl border border-slate-200/60 rounded-2xl shadow-lg shadow-slate-900/5",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"icon",className:"h-10 w-10 shrink-0 text-slate-400 hover:text-slate-600",disabled:s,children:(0,a.jsx)(O.A,{className:"h-5 w-5"})}),(0,a.jsx)("textarea",{ref:u,value:m,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},placeholder:n,disabled:s,rows:1,className:(0,x.cn)("flex-1 resize-none bg-transparent text-slate-800 placeholder:text-slate-400 focus:outline-none text-[15px] py-2.5 px-1 max-h-[150px]",s&&"opacity-50 cursor-not-allowed")}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"icon",className:"h-10 w-10 shrink-0 text-slate-400 hover:text-slate-600",disabled:s,children:(0,a.jsx)(I.A,{className:"h-5 w-5"})}),(0,a.jsx)(c.$,{onClick:p,disabled:!m.trim()||s,size:"icon",className:"h-10 w-10 shrink-0",children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})]})]})})]})}function M(e){let{options:t,onSelect:s,disabled:i,variant:r="default"}=e;return(0,a.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex flex-wrap gap-2",children:t.map((e,t)=>(0,a.jsx)(l.P.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},onClick:()=>!i&&s(e),disabled:i,className:(0,x.cn)("transition-all duration-200","default"===r?"px-4 py-2.5 text-sm bg-white/80 backdrop-blur-sm border-2 border-sky-200 rounded-xl text-sky-700 hover:bg-sky-50 hover:border-sky-400 shadow-sm font-medium":"px-3 py-1.5 text-xs bg-slate-100 rounded-full text-slate-600 hover:bg-slate-200",i&&"opacity-50 cursor-not-allowed"),children:e},e))})}var _=s(6835),D=s(6336),U=s(6967),H=s(1773),z=s(1594);function $(e){let{scenario:t,onSelectOption:s,onConfirmOriginal:n}=e,[o,d]=(0,i.useState)(!1),m=t.aiInterpretation.confidence>.8?"high":t.aiInterpretation.confidence>.6?"medium":"low";return(0,a.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 rounded-xl border border-amber-200 bg-amber-50/50 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 border-b border-amber-200/50",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-amber-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(_.A,{className:"h-4 w-4 text-amber-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-amber-900",children:"Let me confirm I understood correctly"}),(0,a.jsxs)("div",{className:"mt-2 p-2 bg-white rounded-lg border border-amber-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:t.aiInterpretation.field}),(0,a.jsxs)("span",{className:(0,x.cn)("text-xs font-medium px-2 py-0.5 rounded-full",{high:"bg-emerald-100 text-emerald-700",medium:"bg-amber-100 text-amber-700",low:"bg-orange-100 text-orange-700"}[m]),children:[Math.round(100*t.aiInterpretation.confidence),"% confident"]})]}),(0,a.jsx)("p",{className:"text-base font-semibold text-slate-900 mt-1",children:t.aiInterpretation.understood})]})]})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-amber-700 mb-3",children:"Is this what you meant?"}),(0,a.jsxs)(c.$,{variant:"outline",className:"w-full justify-between bg-white hover:bg-emerald-50 border-emerald-200 text-emerald-700",onClick:n,children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"h-4 w-4"}),"Yes, that's correct"]}),(0,a.jsx)(U.A,{className:"h-4 w-4"})]}),t.recoveryOptions.map((e,t)=>(0,a.jsxs)(c.$,{variant:"outline",className:"w-full justify-between bg-white hover:bg-slate-50",onClick:()=>s(e),children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(H.A,{className:"h-4 w-4 text-slate-400"}),e]}),(0,a.jsx)(U.A,{className:"h-4 w-4 text-slate-400"})]},t))]}),(0,a.jsxs)("div",{className:"px-4 pb-4",children:[(0,a.jsxs)("button",{onClick:()=>d(!o),className:"text-xs text-amber-600 hover:text-amber-800 flex items-center gap-1",children:[(0,a.jsx)(z.A,{className:"h-3 w-3"}),o?"Hide":"Why am I asking?"]}),(0,a.jsx)(r.N,{children:o&&(0,a.jsx)(l.P.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-xs text-amber-700 mt-2 p-2 bg-amber-100/50 rounded-lg",children:t.explanation})})]})]})}var R=s(8867),V=s(3950),W=s(6889),Y=s(9286),B=s(5007);let J={united:"from-blue-600 to-blue-700",delta:"from-red-600 to-red-700",american:"from-sky-600 to-sky-700",jetblue:"from-sky-500 to-blue-600",southwest:"from-amber-500 to-orange-600",alaska:"from-teal-600 to-teal-700",default:"from-slate-600 to-slate-700"};function K(e){let{id:t,airline:s,flightNumber:i,departureAirport:r,arrivalAirport:n,departureTime:o,arrivalTime:d,duration:m,stops:h,price:u,calendarFit:p,conflictDetails:f,selected:g,onSelect:b,compact:j}=e,y=J[s.toLowerCase().replace(/\s+/g,"")]||J.default;return(0,a.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.01},transition:{duration:.2},children:(0,a.jsx)(B.Zp,{className:(0,x.cn)("overflow-hidden transition-all duration-300 cursor-pointer",g?"ring-2 ring-sky-500 shadow-lg shadow-sky-500/20":"hover:shadow-lg hover:shadow-slate-900/10",j&&"p-3"),onClick:()=>null==b?void 0:b(t),children:(0,a.jsxs)("div",{className:(0,x.cn)("p-4",j&&"p-0"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,x.cn)("w-10 h-10 rounded-xl bg-gradient-to-br flex items-center justify-center shadow-lg",y),children:(0,a.jsx)(F.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-slate-900",children:s}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:i})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,x.$g)(u)}),(0,a.jsxs)(Y.E,{variant:"fits"===p?"fits":"conflict"===p?"conflict":"secondary",className:"mt-1",children:["fits"===p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"h-3 w-3 mr-1"}),"Fits calendar"]}),"conflict"===p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.A,{className:"h-3 w-3 mr-1"}),"Conflict"]}),"unknown"===p&&"Checking..."]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(0,x.fU)(o)}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:r})]}),(0,a.jsx)("div",{className:"flex-1 px-4",children:(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t-2 border-dashed border-slate-200"})}),(0,a.jsxs)("div",{className:"relative flex flex-col items-center bg-white px-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-slate-500",children:[(0,a.jsx)(W.A,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:(0,x.a3)(m)})]}),h>0?(0,a.jsxs)("span",{className:"text-xs text-slate-400 mt-0.5",children:[h," stop",h>1?"s":""]}):(0,a.jsx)("span",{className:"text-xs text-emerald-600 font-medium mt-0.5",children:"Nonstop"})]}),(0,a.jsx)(F.A,{className:"absolute right-0 h-4 w-4 text-sky-500 transform translate-x-1"})]})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(0,x.fU)(d)}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:n})]})]}),"conflict"===p&&f&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-orange-50 rounded-xl border border-orange-200",children:(0,a.jsx)("p",{className:"text-sm text-orange-800",children:f})}),b&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-100",children:(0,a.jsx)(c.$,{onClick:e=>{e.stopPropagation(),b(t)},variant:g?"default":"outline",className:"w-full",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Selected"]}):"Select this flight"})})]})})})}var q=s(2423),G=s(3580),Z=s(9282);function X(e){let{origin:t,destination:s,outbound:i,returnFlight:r,totalPrice:n,calendarEvents:o,onConfirm:m,onEdit:h,onCancel:u,isLoading:p,showCalendarPreview:f=!0}=e;return(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,a.jsxs)(B.Zp,{className:"overflow-hidden border-2 border-sky-200/60 bg-gradient-to-b from-white to-sky-50/30",children:[(0,a.jsx)(B.aR,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center shadow-lg shadow-sky-500/30",children:(0,a.jsx)(F.A,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(B.ZB,{className:"text-lg",children:["Trip to ",s]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:[t," → ",s,r&&" → ".concat(t)]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(0,x.$g)(n)}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Total"})]})]})}),(0,a.jsxs)(B.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-white rounded-xl border border-slate-200/60 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-3",children:[(0,a.jsx)(F.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Outbound"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:(0,x.Yq)(i.date)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,x.fU)(i.departureTime)}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:i.departureAirport})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,a.jsx)("div",{className:"w-8 h-px bg-slate-300"}),(0,a.jsx)(U.A,{className:"h-4 w-4"}),(0,a.jsx)("div",{className:"w-8 h-px bg-slate-300"})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:i.duration})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,x.fU)(i.arrivalTime)}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:i.arrivalAirport})]})]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500 mt-2",children:[i.airline," ",i.flightNumber]})]}),r&&(0,a.jsxs)("div",{className:"p-4 bg-white rounded-xl border border-slate-200/60 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-3",children:[(0,a.jsx)(F.A,{className:"h-4 w-4 rotate-180"}),(0,a.jsx)("span",{className:"font-medium",children:"Return"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:(0,x.Yq)(r.date)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,x.fU)(r.departureTime)}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:r.departureAirport})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,a.jsx)("div",{className:"w-8 h-px bg-slate-300"}),(0,a.jsx)(U.A,{className:"h-4 w-4"}),(0,a.jsx)("div",{className:"w-8 h-px bg-slate-300"})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:r.duration})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xl font-bold text-slate-900",children:(0,x.fU)(r.arrivalTime)}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:r.arrivalAirport})]})]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500 mt-2",children:[r.airline," ",r.flightNumber]})]}),f&&o.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.w,{}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 mb-3",children:[(0,a.jsx)(q.A,{className:"h-4 w-4 text-sky-500"}),"What I'll add to your calendar"]}),(0,a.jsx)("div",{className:"space-y-2",children:o.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-sky-50 rounded-lg border border-sky-100",children:[(0,a.jsx)("div",{className:"w-1 h-8 bg-sky-500 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-slate-900",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:[(0,x.Yq)(e.start)," • ",(0,x.fU)(e.start)," -"," ",(0,x.fU)(e.end)]})]})]},t))})]})]}),(m||h||u)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.w,{}),(0,a.jsxs)("div",{className:"flex gap-3",children:[u&&(0,a.jsxs)(c.$,{variant:"ghost",onClick:u,disabled:p,className:"flex-1",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Cancel"]}),h&&(0,a.jsxs)(c.$,{variant:"outline",onClick:h,disabled:p,className:"flex-1",children:[(0,a.jsx)(G.A,{className:"h-4 w-4 mr-2"}),"Edit"]}),m&&(0,a.jsx)(c.$,{onClick:m,disabled:p,className:"flex-1",children:p?(0,a.jsx)(l.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Confirm Booking"]})})]})]})]})]})})}var Q=s(6462),ee=s(7223);let et=i.forwardRef((e,t)=>{let{className:s,type:i,...r}=e;return(0,a.jsx)("input",{type:i,className:(0,x.cn)("flex h-11 w-full rounded-xl border-2 border-slate-200 bg-white/80 backdrop-blur-sm px-4 py-2 text-base text-slate-900 shadow-sm transition-all duration-200","placeholder:text-slate-400","focus:outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500","hover:border-slate-300","disabled:cursor-not-allowed disabled:opacity-50","file:border-0 file:bg-transparent file:text-sm file:font-medium",s),ref:t,...r})});function es(e){let{level:t}=e;return(0,a.jsxs)(Y.E,{variant:"high"===t?"fits":"medium"===t?"warning":"conflict",className:"text-xs",children:["high"===t&&(0,a.jsx)(R.A,{className:"h-2.5 w-2.5 mr-1"}),"low"===t&&(0,a.jsx)(V.A,{className:"h-2.5 w-2.5 mr-1"}),"high"===t?"✓":"low"===t?"Check this":"Verify"]})}function ea(e){let{label:t,value:s,confidence:i,isEditing:r,onChange:l,icon:n}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[n,(0,a.jsx)("span",{className:"text-sm",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[r?(0,a.jsx)(et,{value:s,onChange:e=>l(e.target.value),className:"h-8 w-32 text-right"}):(0,a.jsx)("span",{className:"font-medium text-slate-900",children:s}),(0,a.jsx)(es,{level:i})]})]})}function ei(e){let{source:t,data:s,confidence:r,onAddToCalendar:n,onDismiss:o}=e,[m,x]=(0,i.useState)(!1),[h,u]=(0,i.useState)(s),p=(e,t)=>{u(s=>({...s,[e]:t}))},f=Object.values(r).some(e=>"low"===e);return(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,a.jsxs)(B.Zp,{className:"overflow-hidden border-2 border-amber-200/60 bg-gradient-to-b from-white to-amber-50/30",children:[(0,a.jsx)(B.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-amber-500 flex items-center justify-center shadow-lg shadow-amber-500/30",children:(0,a.jsx)(Q.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(B.ZB,{className:"text-base",children:"Found in your email"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:t})]})]}),f&&(0,a.jsxs)(Y.E,{variant:"warning",className:"text-xs",children:[(0,a.jsx)(V.A,{className:"h-3 w-3 mr-1"}),"Review needed"]})]})}),(0,a.jsxs)(B.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"divide-y divide-slate-100",children:[(0,a.jsx)(ea,{label:"Airline",value:h.airline,confidence:r.airline,isEditing:m,onChange:e=>p("airline",e),icon:(0,a.jsx)(F.A,{className:"h-4 w-4"})}),(0,a.jsx)(ea,{label:"Flight",value:h.flightNumber,confidence:r.flightNumber,isEditing:m,onChange:e=>p("flightNumber",e),icon:(0,a.jsx)("span",{className:"text-xs font-mono",children:"#"})}),(0,a.jsx)(ea,{label:"Date",value:h.date,confidence:r.date,isEditing:m,onChange:e=>p("date",e),icon:(0,a.jsx)(q.A,{className:"h-4 w-4"})}),(0,a.jsx)(ea,{label:"Departure",value:h.departureTime,confidence:r.departureTime,isEditing:m,onChange:e=>p("departureTime",e),icon:(0,a.jsx)(W.A,{className:"h-4 w-4"})}),(0,a.jsx)(ea,{label:"Route",value:"".concat(h.departureAirport," → ").concat(h.arrivalAirport),confidence:r.airports,isEditing:m,onChange:e=>{let[t,s]=e.split("→").map(e=>e.trim());p("departureAirport",t||h.departureAirport),p("arrivalAirport",s||h.arrivalAirport)},icon:(0,a.jsx)(ee.A,{className:"h-4 w-4"})})]}),f&&!m&&(0,a.jsx)("p",{className:"text-sm text-amber-700 bg-amber-50 p-3 rounded-lg",children:"I'm not 100% certain about some details. Please verify before adding to your calendar."}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[o&&(0,a.jsxs)(c.$,{variant:"ghost",onClick:o,className:"flex-1",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Dismiss"]}),(0,a.jsxs)(c.$,{variant:"outline",onClick:()=>x(!m),className:"flex-1",children:[(0,a.jsx)(G.A,{className:"h-4 w-4 mr-2"}),m?"Done editing":"Edit"]}),n&&(0,a.jsxs)(c.$,{onClick:()=>n(h),className:"flex-1",disabled:m,children:[(0,a.jsx)(q.A,{className:"h-4 w-4 mr-2"}),"Add to Calendar"]})]})]})]})})}et.displayName="Input";var er=s(853),el=s(9053),en=s(2598);function eo(e){let{flightArrivalTime:t,flightDepartureTime:s,conflictingEvent:i,onFindAlternatives:r,onBookAnyway:n,onShowDetails:o,isLoadingAlternatives:d}=e;return(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,a.jsxs)(B.Zp,{className:"overflow-hidden border-2 border-orange-200/60 bg-gradient-to-b from-white to-orange-50/30",children:[(0,a.jsx)(B.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-400 to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/30",children:(0,a.jsx)(V.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(B.ZB,{className:"text-base text-orange-800",children:"Schedule Conflict Detected"}),(0,a.jsx)("p",{className:"text-sm text-orange-600",children:"This flight overlaps with an existing event"})]})]})}),(0,a.jsxs)(B.Wu,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"relative bg-white rounded-xl p-4 border border-orange-200",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-sky-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-slate-900",children:["Flight ",s?"departs":"arrives"]}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:(0,x.fU)(s||t)})]})]}),(0,a.jsx)("div",{className:"ml-1 w-0.5 h-6 bg-gradient-to-b from-sky-500 via-orange-500 to-red-500"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-orange-800",children:i.title}),(0,a.jsxs)("p",{className:"text-xs text-orange-600",children:[(0,x.fU)(i.start)," -"," ",(0,x.fU)(i.end)]})]}),(0,a.jsx)(q.A,{className:"h-4 w-4 text-orange-400"})]})]})}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:s?(0,a.jsxs)(a.Fragment,{children:["Your flight departs at ",(0,x.fU)(s),', but you have "',i.title,'" scheduled from'," ",(0,x.fU)(i.start)," to"," ",(0,x.fU)(i.end),"."]}):(0,a.jsxs)(a.Fragment,{children:["Your flight lands at ",(0,x.fU)(t),', which overlaps with "',i.title,'" (',(0,x.fU)(i.start)," -"," ",(0,x.fU)(i.end),")."]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"What would you like to do?"}),(0,a.jsxs)("div",{className:"grid gap-2",children:[r&&(0,a.jsxs)(c.$,{variant:"default",onClick:r,disabled:d,className:"w-full justify-start",children:[d?(0,a.jsx)(l.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}):(0,a.jsx)(er.A,{className:"h-4 w-4 mr-2"}),"Find alternative flights"]}),n&&(0,a.jsxs)(c.$,{variant:"outline",onClick:n,className:"w-full justify-start",children:[(0,a.jsx)(el.A,{className:"h-4 w-4 mr-2"}),"Book anyway, skip calendar"]}),o&&(0,a.jsxs)(c.$,{variant:"ghost",onClick:o,className:"w-full justify-start",children:[(0,a.jsx)(en.A,{className:"h-4 w-4 mr-2"}),"Show conflict details"]})]})]})]})]})})}var ed=s(5686),ec=s(8324),em=s(2263);i.forwardRef((e,t)=>{let{className:s,value:i,...r}=e;return(0,a.jsx)(em.bL,{ref:t,className:(0,x.cn)("relative h-2 w-full overflow-hidden rounded-full bg-slate-100",s),...r,children:(0,a.jsx)(em.C1,{className:"h-full w-full flex-1 bg-gradient-to-r from-sky-500 to-sky-600 transition-all duration-500 ease-out",style:{transform:"translateX(-".concat(100-(i||0),"%)")}})})}).displayName=em.bL.displayName;let ex={calendar_add:q.A,booking_confirm:F.A,email_import:Q.A,trip_delete:ed.A,preference_change:R.A},eh={calendar_add:{bg:"bg-emerald-500/20",icon:"text-emerald-400"},booking_confirm:{bg:"bg-sky-500/20",icon:"text-sky-400"},email_import:{bg:"bg-purple-500/20",icon:"text-purple-400"},trip_delete:{bg:"bg-red-500/20",icon:"text-red-400"},preference_change:{bg:"bg-slate-500/20",icon:"text-slate-400"}};function eu(e){let{message:t,description:s,duration:n=w.default,onUndo:o,onDismiss:m,show:x,actionType:h="calendar_add"}=e,[u,p]=(0,i.useState)(100),[f,g]=(0,i.useState)(!1),[b,j]=(0,i.useState)(!1),y=(0,i.useRef)(100),v=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(!x){p(100);return}if(b){v.current&&(clearInterval(v.current),v.current=null);return}return v.current=setInterval(()=>{p(e=>{let t=e-100/(n/100);return t<=0?(v.current&&(clearInterval(v.current),v.current=null),m(),0):t})},100),()=>{v.current&&(clearInterval(v.current),v.current=null)}},[x,n,m,b]);let N=(0,i.useCallback)(()=>{y.current=u,j(!0)},[u]),k=(0,i.useCallback)(()=>{p(Math.min(100,y.current+3e3/n*100)),j(!1)},[n]),A=async()=>{g(!0);try{await o()}finally{g(!1)}},C=ex[h]||R.A,T=eh[h]||eh.calendar_add,S=Math.ceil(u/100*(n/1e3));return(0,a.jsx)(r.N,{children:x&&(0,a.jsx)(l.P.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-md px-4",onMouseEnter:N,onMouseLeave:k,role:"alert","aria-live":"polite",children:(0,a.jsxs)("div",{className:"bg-slate-900/95 backdrop-blur-xl text-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl ".concat(T.bg," flex items-center justify-center flex-shrink-0"),children:(0,a.jsx)(C,{className:"h-5 w-5 ".concat(T.icon)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:t}),s&&(0,a.jsx)("p",{className:"text-xs text-slate-400 truncate",children:s}),(0,a.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["calendar_add"===h&&"Undo will remove the event from your calendar","booking_confirm"===h&&"Undo will cancel the booking and remove calendar events","email_import"===h&&"Undo will remove the imported trip","trip_delete"===h&&"Undo will restore the deleted trip","preference_change"===h&&"Undo will restore your previous preferences"]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:b?(0,a.jsx)("span",{className:"text-amber-400",children:"⏸ Paused - hover to extend"}):(0,a.jsxs)("span",{children:[S,"s to undo"]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:A,disabled:f,className:"text-white hover:bg-white/10 touch-target","aria-label":"Undo action",children:f?(0,a.jsx)(l.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec.A,{className:"h-4 w-4 mr-1"}),"Undo"]})}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:m,className:"h-8 w-8 text-slate-400 hover:text-white hover:bg-white/10","aria-label":"Dismiss",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"relative h-1 bg-slate-700",children:(0,a.jsx)(l.P.div,{className:"absolute inset-y-0 left-0 ".concat(b?"bg-amber-500":"bg-sky-500"),initial:{width:"100%"},animate:{width:"".concat(u,"%")},transition:{duration:.1}})})]})})})}var ep=s(241);let ef=[{id:"date-ambiguity",trigger:"next tuesday",aiInterpretation:{field:"date",understood:"January 21, 2025",confidence:.65},correctValue:"January 28, 2025",recoveryOptions:["Actually, I meant January 28","The Tuesday after that","Let me pick a different date"],explanation:"The phrase 'next Tuesday' can mean this coming Tuesday or the Tuesday of next week. Different people interpret this differently."},{id:"airport-ambiguity",trigger:"new york",aiInterpretation:{field:"airport",understood:"JFK - John F. Kennedy International",confidence:.72},correctValue:"LGA - LaGuardia",recoveryOptions:["Actually, LaGuardia works better for me","What about Newark?","Show me all NYC airports"],explanation:"New York has three major airports. I selected JFK as it's the main international hub, but LaGuardia or Newark might be more convenient."},{id:"destination-similar",trigger:"san francisco",aiInterpretation:{field:"destination",understood:"SFO - San Francisco International",confidence:.88},correctValue:"OAK - Oakland International",recoveryOptions:["Oakland would actually be closer","Show me flights to both","SFO is fine"],explanation:"San Francisco Bay Area has two major airports. SFO is the primary one, but Oakland might be more convenient depending on your final destination."},{id:"time-ambiguity",trigger:"morning flight",aiInterpretation:{field:"time",understood:"6:00 AM - 9:00 AM",confidence:.6},correctValue:"9:00 AM - 12:00 PM",recoveryOptions:["I meant mid-morning, around 9-10 AM","Earlier is fine, before 7 AM","Show me all morning options"],explanation:"'Morning' can mean early morning (5-8 AM) or late morning (9-12 PM). I assumed early morning—let me know if you prefer later."},{id:"city-confusion",trigger:"chicago",aiInterpretation:{field:"airport",understood:"ORD - O'Hare International",confidence:.75},correctValue:"MDW - Chicago Midway",recoveryOptions:["Midway would be better for me","O'Hare is fine","Which one has cheaper flights?"],explanation:"Chicago has two major airports. O'Hare is the main hub, but Midway often has budget-friendly options with Southwest."}],eg=[{id:"1",airline:"United",flightNumber:"UA 442",departureAirport:"JFK",arrivalAirport:"SFO",departureTime:"2025-01-21T11:30:00",arrivalTime:"2025-01-21T14:45:00",duration:375,stops:0,price:28900,calendarFit:"fits"},{id:"2",airline:"American",flightNumber:"AA 178",departureAirport:"JFK",arrivalAirport:"SFO",departureTime:"2025-01-21T14:15:00",arrivalTime:"2025-01-21T17:30:00",duration:375,stops:0,price:25400,calendarFit:"fits"},{id:"3",airline:"Delta",flightNumber:"DL 891",departureTime:"2025-01-21T07:00:00",arrivalTime:"2025-01-21T10:15:00",departureAirport:"JFK",arrivalAirport:"SFO",duration:375,stops:0,price:21900,calendarFit:"conflict",conflictDetails:"Overlaps with 'Team Standup' (9:00 AM - 9:30 AM)"}];function eb(){let{messages:e,isTyping:t,conversationState:s,setConversationState:d,addMessage:m,simulateTyping:u,resetConversation:f,setIsTyping:g}=function(){let[e,t]=(0,i.useState)([]),[s,a]=(0,i.useState)(!1),[r,l]=(0,i.useState)({step:"idle"}),n=(0,i.useCallback)((e,s,a)=>{let i={id:(0,x.$C)(),role:e,content:s,timestamp:new Date,metadata:a};return t(e=>[...e,i]),i},[]),o=(0,i.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500;a(!0),await new Promise(e=>setTimeout(e,t)),a(!1),e()},[]),d=(0,i.useCallback)(()=>{t([]),l({step:"idle"}),a(!1)},[]);return{messages:e,isTyping:s,conversationState:r,setConversationState:l,addMessage:n,simulateTyping:o,resetConversation:d,setIsTyping:a}}(),{toast:b}=(0,ep.dj)(),j=(0,i.useRef)(null),[y,w]=(0,i.useState)(!1),[v,k]=(0,i.useState)(null),[A,C]=(0,i.useState)(!1),[T,S]=(0,i.useState)(null),[F,O]=(0,i.useState)(!1),[I,P]=(0,i.useState)(""),[_,D]=(0,i.useState)(null),[U,H]=(0,i.useState)(!1),[z,R]=(0,i.useState)(!1),[V,W]=(0,i.useState)(null),[Y,B]=(0,i.useState)(!1),[J,q]=(0,i.useState)("calendar_add");(0,i.useEffect)(()=>{let e=()=>H(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)},[e,t]),(0,i.useEffect)(()=>{0===e.length&&m("assistant","Hi! I'm your travel assistant. I can help you find and book flights that fit your schedule. What's your next trip?")},[e.length,m]);let G=(0,i.useCallback)(e=>{U?(S(e),C(!0)):(k(e),w(!0))},[U]),Z=(0,i.useCallback)(()=>{w(!1),C(!1)},[]),Q=(0,i.useCallback)(()=>{let e=s.selectedFlight;e&&(d({...s,step:"booking"}),u(()=>{m("assistant","You're booked! ✈️ ".concat(e.airline," ").concat(e.flightNumber," to SFO.\n\nI've added your flight to your calendar. Confirmation email is on its way."),{type:"success"}),d({...s,step:"complete"}),Z(),P("Added to calendar"),O(!0)},2e3))},[s,d,u,m,Z]),ee=(0,i.useCallback)(e=>{G((0,a.jsx)(X,{origin:"New York",destination:"San Francisco",outbound:{date:e.departureTime,departureTime:e.departureTime,arrivalTime:e.arrivalTime,departureAirport:e.departureAirport,arrivalAirport:e.arrivalAirport,airline:e.airline,flightNumber:e.flightNumber,duration:"6h 15m"},returnFlight:{date:"2025-01-23T17:15:00",departureTime:"2025-01-23T17:15:00",arrivalTime:"2025-01-24T01:30:00",departureAirport:"SFO",arrivalAirport:"JFK",airline:e.airline,flightNumber:e.flightNumber.replace(/\d+/,e=>String(parseInt(e)+1)),duration:"5h 15m"},totalPrice:2*e.price,calendarEvents:[{title:"Flight to San Francisco",start:e.departureTime,end:e.arrivalTime},{title:"Flight home",start:"2025-01-23T17:15:00",end:"2025-01-24T01:30:00"}],onConfirm:Q,onEdit:()=>{Z(),m("assistant","What would you like to change?")},onCancel:()=>{Z(),d({...s,step:"showing_options"})},isLoading:"booking"===s.step}))},[G,Q,Z,m,s,d]),et=(0,i.useCallback)(e=>{let t=eg.find(t=>t.id===e);t&&(D(e),"conflict"===t.calendarFit?(d({...s,step:"conflict_detected",selectedFlight:t,conflict:{eventTitle:"Team Standup",eventStart:"2025-01-21T09:00:00",eventEnd:"2025-01-21T09:30:00"}}),m("assistant","Heads up: This flight has a schedule conflict. Let me show you the details."),G((0,a.jsx)(eo,{flightArrivalTime:t.arrivalTime,flightDepartureTime:t.departureTime,conflictingEvent:{id:"1",title:"Team Standup",start:"2025-01-21T09:00:00",end:"2025-01-21T09:30:00"},onFindAlternatives:()=>{Z(),m("user","Find alternative flights"),u(()=>{m("assistant","Here are flights that avoid your conflict:"),d({...s,step:"showing_options",flightOptions:eg.filter(e=>"fits"===e.calendarFit)})})},onBookAnyway:()=>{Z(),m("user","Book anyway, skip calendar"),u(()=>{m("assistant","Understood. I'll book this flight but won't add it to your calendar—you might want to reschedule your meeting first."),d({...s,step:"confirming",selectedFlight:t}),ee(t)})},onShowDetails:()=>{b({title:"Team Standup",description:"Daily sync meeting • 9:00 AM - 9:30 AM"})}}))):(d({...s,step:"confirming",selectedFlight:t}),m("assistant","Great choice! Here's your trip summary:"),ee(t)))},[s,d,m,G,Z,u,ee,b]),es=(0,i.useCallback)(()=>{R(!0),m("assistant","I found a flight confirmation in your email. Here's what I extracted:"),G((0,a.jsx)(ei,{source:"Email from Delta Airlines",data:{airline:"Delta",flightNumber:"DL 1247",date:"April 5, 2025",departureTime:"8:00 AM",departureAirport:"JFK",arrivalAirport:"LAX"},confidence:{airline:"high",flightNumber:"high",date:"high",departureTime:"low",airports:"high"},onAddToCalendar:e=>{Z(),m("user","Add to Calendar"),u(()=>{m("assistant","Done! Your ".concat(e.airline," flight to ").concat(e.arrivalAirport," is now on your calendar.")),P("Added to calendar"),O(!0)})},onDismiss:()=>{Z(),m("assistant","No problem, I'll ignore that email.")}}))},[m,G,Z,u]),ea=(0,i.useCallback)(()=>{W(null),u(()=>{m("assistant","Great! Let me search for flights with those details..."),d({...s,step:"searching"}),setTimeout(()=>{g(!1),m("assistant","Here are 3 options that fit your schedule:"),d({...s,step:"showing_options",flightOptions:eg})},1500)})},[m,s,d,u,g]),er=(0,i.useCallback)(e=>{W(null),m("user",e),u(()=>{m("assistant","Got it, I've updated that. Let me search with the corrected information..."),d({...s,step:"searching"}),setTimeout(()=>{g(!1),m("assistant","Here are 3 options that fit your schedule:"),d({...s,step:"showing_options",flightOptions:eg})},1500)})},[m,s,d,u,g]),el=(0,i.useCallback)(e=>{m("user",e);let t=e.toLowerCase(),a=function(e){let t=e.toLowerCase();for(let e of ef)if(t.includes(e.trigger))return e;return null}(t);if(a&&a.aiInterpretation.confidence<.85){u(()=>{m("assistant","I understood you want to go to ".concat(a.aiInterpretation.understood,"...")),W(a),d({...s,step:"clarifying"})});return}t.includes("san francisco")||t.includes("sfo")||t.includes("fly")||t.includes("flight")||t.includes("book")?u(()=>{m("assistant","Got it—San Francisco! A few quick questions:\n\n• Do you prefer SFO or Oakland?\n• What time works best for departure?"),d({...s,step:"clarifying",searchParams:{destination:"San Francisco"}})}):t.includes("sfo")||t.includes("morning")||t.includes("afternoon")||"clarifying"===s.step?u(()=>{m("assistant","Let me check your calendar... You have a 9am meeting on Tuesday. I'll look for flights after that.\n\nSearching for flights now..."),setTimeout(()=>{g(!0),setTimeout(()=>{g(!1),m("assistant","Here are 3 options that fit your schedule:"),d({...s,step:"showing_options",flightOptions:eg})},1500)},1e3)}):t.includes("import")||t.includes("email")?es():t.includes("chicago")||t.includes("boston")?u(()=>{m("assistant","Got it—".concat(t.includes("chicago")?"Chicago":"Boston","! When do you need to travel?")),d({...s,step:"clarifying"})}):u(()=>{m("assistant","I can help you with:\n\n• Finding and booking flights\n• Importing trips from your email\n• Checking your calendar for conflicts\n\nJust tell me where you want to go!")})},[m,s,d,u,g,es]),en=(0,i.useCallback)(e=>{el(e)},[el]),ed=(0,i.useCallback)(async()=>{O(!1),b({title:"Undone",description:"Calendar events removed. Booking cancelled.",variant:"default"}),d({...s,step:"showing_options"})},[b,s,d]),ec=(0,i.useCallback)(()=>"idle"===s.step&&e.length<=1?["Book a flight","Import from email","Show my trips"]:"clarifying"===s.step?["SFO, morning","Oakland, afternoon","Flexible"]:[],[s.step,e.length]);return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)(o.j,{}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,a.jsx)(h,{className:"flex-1 p-4",ref:j,children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto space-y-1",children:(0,a.jsxs)(r.N,{mode:"popLayout",children:[e.map(e=>(0,a.jsxs)(E,{role:e.role,content:e.content,timestamp:e.timestamp,children:[e.content.includes("options that fit")&&"showing_options"===s.step&&(0,a.jsx)("div",{className:"mt-4 space-y-3",children:(s.flightOptions||eg).map(e=>(0,a.jsx)(K,{...e,selected:_===e.id,onSelect:et},e.id))}),"assistant"===e.role&&e.content.includes("quick questions")&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(M,{options:["SFO, morning","Oakland, afternoon","Flexible"],onSelect:en})}),"assistant"===e.role&&e.content.includes("I understood you want")&&V&&(0,a.jsx)($,{scenario:V,onConfirmOriginal:ea,onSelectOption:er})]},e.id)),t&&(0,a.jsx)(E,{role:"assistant",content:"",isTyping:!0})]})})}),(0,a.jsx)("div",{className:"border-t border-slate-200/60 bg-white/50 backdrop-blur-sm p-4",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,a.jsx)(L,{onSend:el,disabled:t||"booking"===s.step,placeholder:"Where do you want to fly?",suggestions:ec(),onSuggestionClick:en})})})]}),(0,a.jsx)("div",{className:"hidden md:block w-[400px] shrink-0",children:(0,a.jsx)(p,{open:y,onClose:Z,title:"Trip Details",children:v})})]}),(0,a.jsx)(N,{open:A,onClose:Z,title:"Trip Details",children:T}),(0,a.jsx)(eu,{show:F,message:I,onUndo:ed,onDismiss:()=>O(!1),actionType:J,description:"Your trip has been confirmed"}),(0,a.jsx)(l.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"fixed bottom-24 right-4 md:bottom-8",children:(0,a.jsx)(c.$,{variant:"outline",size:"icon",onClick:f,className:"rounded-full shadow-lg bg-white/80 backdrop-blur-sm",children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[86,587,173,426,486,411,441,517,358],()=>t(5794)),_N_E=e.O()}]);